<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <title>Untitled Document</title>
  <meta http-equiv="Content-Type"
 content="text/html; charset=iso-8859-1">
</head>
<body>
<h2><a name="telnet"></a>SFTP</h2>
<h3>Description </h3>
This element performs file operations over an SSH connection using the
SFTP protocol.<br>
<p>This is a nested element of the SSH task; each element represents a
single SFTP session and can be used to transfer files, make
directories, delete files or change file modes.&nbsp; Each element has
only one action however multiple elements may be added to each
&lt;ssh&gt; task. For transfer operations the element supports nested FileSet and
FileList elements<br>
</p>
<p><strong>Parameters for &lt;sftp&gt; </strong></p>
<p>The &lt;sftp&gt; element opens an SFTP session on the SSH connection
and performs a single action.<br>
</p>
<table border="1" cellpadding="2" cellspacing="0" bordercolor="#cccccc">
  <tbody>
    <tr>
      <td><strong>Attribute</strong></td>
      <td><strong>Values</strong></td>
      <td><strong>Required</strong></td>
    </tr>
    <tr>
      <td width="30">action</td>
      <td width="514">
      <p>Determines what operation will be executed within this SFTP
session. The valid actions are "get", "put", "delete", "mkdir", "rmdir"
and "chmod" </p>
      </td>
      <td width="114">yes<br>
      </td>
    </tr>
    <tr>
      <td>remotedir<br>
      </td>
      <td>Specifies the directory on the remote host to use as the root
of the operation. Defaults to the users home directory.<br>
      </td>
      <td>No</td>
    </tr>
    <tr>
      <td>depends<br>
      </td>
      <td>If set to true source files will only be transfered if they
are newer that the destination file. Defaults to false<br>
      </td>
      <td>No</td>
    </tr>
    <tr>
      <td style="vertical-align: top;">newer<br>
      </td>
      <td style="vertical-align: top;">A synonym for depends<br>
      </td>
      <td style="vertical-align: top;">No<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">mode<br>
      </td>
      <td style="vertical-align: top;">Sets the file mode for use with
the "chmod" action; this must be an octal number for example file mode
"644"<br>
      </td>
      <td style="vertical-align: top;">Yes if action is "chmod"<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">skipfailedtransfers<br>
      </td>
      <td style="vertical-align: top;">Do not stop operation of the
task if file transfers fails. Defaults to false<br>
      </td>
      <td style="vertical-align: top;">No<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">umask<br>
      </td>
      <td style="vertical-align: top;">The Unix style umask to use when
creating new files on the remote server. Defaults to 022<br>
      </td>
      <td style="vertical-align: top;">No<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">verbose<br>
      </td>
      <td style="vertical-align: top;">Output detailed information.
Defaults to false<br>
      </td>
      <td style="vertical-align: top;">No<br>
      </td>
    </tr>
  </tbody>
</table>
<br>
<br>
<h3>Examples </h3>
<p><span style="font-weight: bold;">&nbsp;Uploading files to the remote
computer</span><br>
</p>
<blockquote><pre>
&lt;sftp action="put" 
      remotedir="ant_rules"
      verbose="true"&gt;
   &lt;fileset dir="../release/java/dist"&gt;
       &lt;include name="*.jar"/&gt;
   &lt;/fileset&gt;
&lt;/sftp&gt;
</pre></blockquote>
<p><span style="font-weight: bold;">Downloading files to the local
computer<br>
</span></p>
<blockquote><pre>
&lt;sftp action="get"&gt;
   &lt;fileset dir="."&gt;
     &lt;include name="*.gz"/&gt;
   &lt;/fileset&gt;
&lt;/sftp&gt;
&lt;sftp action="get"&gt;
   &lt;filelist dir="."
        files="archive.tar.gz"/&gt;
&lt;/sftp&gt;<br>
</pre></blockquote>
<p><strong>Deleting files</strong></p>
<blockquote><pre>
&lt;sftp action="delete" 
	 remotedir="ant_rules" 
  &lt;fileset&gt; 
     &lt;include name="*.jar"/&gt; 
  &lt;/fileset&gt; 
&lt;/sftp&gt;
</pre></blockquote><br>
<span style="font-weight: bold;">Making a directory<br>
</span>
<blockquote><pre>
&lt;sftp umask="077"
      action="mkdir"
      remotedir="ant_rules_umask"/&gt;
</pre></blockquote><br>
<span style="font-weight: bold;">Deleting a directory (Deletes all
contents including child directories)<br>
</span>
<blockquote><pre>
&lt;sftp action="rmdir" remotedir="ant_rules_umask"/&gt;
</pre></blockquote><br>
<span style="font-weight: bold;">Changing the mode of a file</span><br>
<blockquote><pre>
&lt;sftp mode="666"
      action="chmod"
      remotedir="ant_rules"
      verbose="true"&gt;
  &lt;fileset&gt;
      &lt;include name="*.jar"/&gt;
  &lt;/fileset&gt;
&lt;/sftp&gt;</pre></blockquote>
<span style="font-weight: bold;"></span>
</body>
</html>
