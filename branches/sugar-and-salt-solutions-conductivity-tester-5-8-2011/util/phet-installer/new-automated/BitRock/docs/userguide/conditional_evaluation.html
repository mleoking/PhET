
<style type="text/css"><!-- @import url("userguide.css"); --> </style>
<head><title>Conditional Evaluation</title></head>
<body>
<center>
<table id="frame" border="0" cellpadding="20">	
<tr><td valign="top" cellpadding="0"><div id="content_left"><ul id="table_of_contents"><li><a href="overview.html">Overview</a></li><li><a href="features.html">Features</a></li><li><a href="what's_new_on_installbuilder_5.html">What's new on InstallBuilder 5</a></li><li><a href="specifications.html">Specifications</a></li><li><a href="how_to_register.html">How to Register</a></li><li><a href="installing_bitrock_installbuilder.html">Installing BitRock InstallBuilder</a></li><li><a href="building_your_first_installer.html">Building Your First Installer</a></li><li><a href="advanced_functionality.html">Advanced Functionality</a></li><li><a href="actions.html">Actions</a></li><li><a href="custom_pages.html">Custom Pages</a></li><li>Conditional Evaluation</li><li><a href="running_the_installer.html">Running the Installer</a></li><li><a href="appendix.html">Appendix</a></li></ul></div></td><td valign="top">
<table border="0" cellpadding="0" cellspacing="0" align="center" style="margin-left:auto;margin-right:auto" >
  <tr><td>
<div id="content_right"><h1>Conditional Evaluation</h1>
<p>BitRock InstallBuilder allows you to control whether certain actions take place, pages are shown or files are installed.
You can include a &lt;ruleList&gt; section in action, parameter and folder sections. Each &lt;ruleList&gt; contains a set of
rules or conditions that are evaluated, and depending on the result, the action is executed, the page associated with the parameter
shown, or the folder installed. By default, rules are evaluated with 'and' logic; that is, all rules must be true
for the result of the evaluation to be true. You can change that by adding a &lt;ruleEvaluationLogic&gt;or&lt;/ruleEvaluationLogic&gt; section. In that
case it will only be necessary that one of the rules be true for the result of the evaluation to be true.</p>
<p>Each ruleList can contain in turn one or more &lt;compareText&gt;, &lt;fileTest&gt;, 
&lt;compareValues&gt;, &lt;compareTextLength&gt;, &lt;fileContentTest&gt; etc. sections.</p> 

<p>&lt;compareText&gt; Text comparison rules can contain three fields: </p>
<ul>
<li><b>text</b>: The text to apply the logic comparison to, usually the value of an installer or environment variable.</li>
<li><b>logic</b>: One of <code>equals</code>, <code>contains</code>, <code>does_not_contain</code> or <code>does_not_equal</code>.</li>
<li><b>value</b>: The value that the text will be compared with.</li>
</ul>
<p>Example:</p>
<table border="0" bgcolor="fffaf0"><tr border="0"><td border="0"><pre>
    &lt;compareText&gt;
        &lt;text&gt;${server}&lt;/text&gt;
        &lt;logic&gt;equals&lt;/logic&gt;
        &lt;value&gt;Apache&lt;/value&gt;
    &lt;/compareText&gt;
</pre></td></tr></table>

<p>&lt;compareValues&gt; Value comparison rules contain three fields: </p>
<ul>
<li><b>value1</b>: Left side value of the logic expresion, usually the value of an installer or environment variable.</li>
<li><b>logic</b>: One of <code>equals</code>, <code>greater_or_equal</code>, <code>greater</code>, <code>less</code>, <code>less_or_equal</code> or <code>does_not_equal</code>.</li>
<li><b>value2</b>: Right side value of the logic expresion.</li>
</ul>
<p>Example:</p>
<table border="0" bgcolor="fffaf0"><tr border="0"><td border="0"><pre>
    &lt;compareValues&gt;
        &lt;value1&gt;${diskspace}&lt;/value1&gt;
        &lt;logic&gt;less&lt;/logic&gt;
        &lt;value2&gt;100000&lt;/value2&gt;
    &lt;/compareValues&gt;
</pre></td></tr></table>

<p>&lt;compareTextLength&gt; Text length comparison rules contain three fields: </p>
<ul>
<li><b>text</b>: Text to compare, usually the value of an installer or environment variable.</li>
<li><b>logic</b>: One of <code>equals</code>, <code>greater_or_equal</code>, <code>greater</code>, <code>less</code>, <code>less_or_equal</code> or <code>does_not_equal</code>.</li>
<li><b>length</b>: Length to compare to</li>
</ul>
<p>Example:</p>
<table border="0" bgcolor="fffaf0"><tr border="0"><td border="0"><pre>
    &lt;compareTextLength&gt;
        &lt;text&gt;${password}&lt;/text&gt;
        &lt;logic&gt;greater&lt;/logic&gt;
        &lt;length&gt;8&lt;/length&gt;
    &lt;/compareTextLength&gt;
</pre></td></tr></table>

<p>&lt;fileTest&gt; File testing rules contain two fields: </p>
<ul>
<li><b>path</b>: The path to the file to test.</li>
<li><b>condition</b>: One of <code>exists</code>, <code>not_exists</code>,
<code>writable</code>, <code>not_writable</code>, <code>readable</code>,
<code>not_readable</code>, <code>executable</code>, <code>not_executable</code>,
<code>is_directory</code>, <code>is_not_directory</code>, <code>is_file</code>,
<code>is_not_file</code>, <code>is_empty</code>, <code>is_not_empty</code>.</li>
</ul>
<p>Example:</p>
<table border="0" bgcolor="fffaf0"><tr border="0"><td border="0"><pre>
    &lt;fileTest&gt;
        &lt;path&gt;/usr/bin/perl&lt;/path&gt;
        &lt;condition&gt;executable&lt;/condition&gt;
    &lt;/fileTest&gt;
</pre></td></tr></table>

<p>&lt;fileContentTest&gt; File content testing rules contain three fields: </p>
<ul>
<li><b>path</b>: The path to the file to test.</li>
<li><b>logic</b>: One of <code>contains</code>, <code>does_not_contain</code></li>
<li><b>text</b>: The text to apply the logic comparison to, usually the value of an installer or environment variable.</li>
</ul>
<p>Example:</p>
<table border="0" bgcolor="fffaf0"><tr border="0"><td border="0"><pre>
    &lt;fileContentTest&gt;
        &lt;path&gt;/etc/group&lt;/path&gt;
        &lt;logic&gt;contains&lt;/logic&gt;
        &lt;text&gt;apache&lt;/text&gt;
    &lt;/fileContentTest&gt;
</pre></td></tr></table>


<p>The following example shows how a particular script will be executed only if the installation type
is 'server', it is running on Linux and a certain file is not already present in the system. The value for the installation type was set during the
installation process using a user-defined parameter, as explained earlier in this document.</p>


<table border="0" bgcolor="fffaf0"><tr border="0"><td border="0"><pre>
    &lt;runProgram&gt;
        &lt;ruleEvaluationLogic&gt;and&lt;/ruleEvaluationLogic&gt;
            &lt;ruleList&gt;
                &lt;compareText&gt;
                    &lt;text&gt;${installtype}&lt;/text&gt;
                    &lt;logic&gt;equals&lt;/logic&gt;
                    &lt;value&gt;server&lt;/value&gt;
                &lt;/compareText&gt;
                &lt;compareText&gt;
                    &lt;text&gt;${platform_name}&lt;/text&gt;
                    &lt;logic&gt;equals&lt;/logic&gt;
                    &lt;value&gt;linux&lt;/value&gt;
                &lt;/compareText&gt;
                &lt;fileTest&gt;
                    &lt;path&gt;/etc/init.d/myservice&lt;/path&gt;
                    &lt;condition&gt;not_exists&lt;/condition&gt;
                &lt;/fileTest&gt;
            &lt;/ruleList&gt;
         &lt;program&gt;${installdir}/bin/install_service.sh&lt;/program&gt;
    &lt;/runProgram&gt;
</pre></td></tr></table>
</div>
  </td></tr>
</table>
</td></tr>
</table>
</center>
</div>
</body>
    