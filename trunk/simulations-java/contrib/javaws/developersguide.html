<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <title>Java(TM) Web Start Developer's Guide</title>
</head>
<body bgcolor="#FFFFFF">
&nbsp;
<table BORDER=0 WIDTH="100%" >
<tr>
<td WIDTH="40"><img SRC="javalogo52x88.gif" ALT="Java" BORDER=0 height=88 width=52></td>

<td ALIGN=CENTER>
<h1>
Developer's Guide</h1>

<h2>
Java<sup><font size=-2>TM</font></sup> Web Start</h2>
<h3>
Version 1.2</h3>
</td>

<td ALIGN=RIGHT VALIGN=TOP WIDTH="40">
&nbsp;
</td>

</tr>
</table>

<blockquote>
This developer's guide provides documentation on how to deploy applications
using Java<sup><font size=-2> TM</font></sup> Web Start and the JNLP technology.
<p>
Please send comments and feedback to <a href="mailto:javawebstart-feedback@sun.com">javawebstart-feedback@sun.com</a>.
</blockquote>

<h2>
Table of Contents</h2>

<blockquote><b><a href="#tech">Java Web Start Technology</a></b>
<br><b><a href="#where">Where to find Java Web Start</a></b>
<br><b><a href="#req">Requirements (desktop and server)</a></b>
<br><b><a href="#website">Setting up the Web site</a></b>
<br><b><a href="#autoinstall">Using the Auto-Install Feature</a></b>
<br><b><a href="#dev">Application Development Considerations</a></b>
<br><b><a href="#servlet">Packaging an application for easy deployment</a></b>
<br><b><a href="#conv">Converting JNLP files to work with this release</a></b>
<br><b><a href="#jnlp">JNLP File Syntax</a></b>
<br><b><a href="#api">JNLP API Examples</a></b>
<br><b><a href="javadoc/index.html">JNLP API (JavaDoc)</a></b></blockquote>
<a NAME="tech"></a>
<h2>
Java Web Start Technology</h2>

<blockquote>Java Web Start is a helper application that gets associated
with a Web browser. When a user clicks on a link that points to a special
launch file (JNLP file), it causes the browser to launch Java Web Start,
which then automatically downloads, caches, and runs the given Java Technology-based
application. The entire process is typically completed without requiring
any user interaction, except for the initial single click.
<p>From a technology standpoint, Java Web Start has a number of key benefits
that make it an attractive platform to use for deploying applications:
<ul>
<li>
Java Web Start is built exclusively to launch applications written to the
Java 2 SE platform. Thus, a single application can be made available on
a Web server and then deployed on a wide-variety of platforms, including
Windows 98/NT/2000/ME/XP, Linux, and the Solaris<sup><font size="-2">TM</font>
</sup> Operating Environment. The Java platform has proven to be
a very robust, productive, and expressive development platform, leading
to a significant cost savings due to minimized development and testing
costs.</li>

<br>&nbsp;
<li>
Java Web Start supports multiple revisions of the Java 2 platform, Standard
Edition. Thus, an application can request a particular version of the platform
it requires, such as J2SE<sup><font size="-2">TM</font></sup> 1.4.0. 
Several applications can run at the
same time on different platform revisions without causing conflicts, and
Java Web Start can automatically download and install a revision of the
platform if an application requests a version that is not installed on
the client system.</li>

<br>&nbsp;
<li>
Java Web Start allows applications to be launched independently of a Web
browser. This can be used for off-line operation of an application, where
launching through the browser is often inconvenient or impossible. The
application can also be launched through desktop shortcuts, making launching
the Web-deployed application similar to launching a native application.</li>

<br>&nbsp;
<li>
Java Web Start takes advantage of the inherent security of the Java Platform.
Applications are by default run in a protective environment (sandbox) with
restricted access to local disk and network resources. It allows the user
to safely run applications from sources that are not trusted.</li>

<br>&nbsp;
<li>
Applications launched with Java Web Start are cached locally. Thus, an
already-downloaded application is launched on par with a traditionally
installed application.</li>
</ul>
The technology underlying Java Web Start is the Java<sup><font size=-2>
TM</font></sup> Network Launching Protocol &amp; API (JNLP). This technology
is currently under development via the Java Community Process (JCP). Java
Web Start is the reference implementation (RI) for the JNLP specification.
The JNLP technology defines, among other things, a standard file format
that describes how to launch an application called a JNLP file.</blockquote>
<a NAME="where"></a>
<h2>
Where to find Java Web Start</h2>

<blockquote>See the Java Web Start web site, <a href="http://java.sun.com/products/javawebstart/">http://java.sun.com/products/javawebstart/</a>, for 
availability of Java Web Start downloads. 
The JNLP specification can be found at <a href="http://java.sun.com/aboutJava/communityprocess/jsr/jsr_056_jnlp.html">http://java.sun.com/aboutJava/communityprocess/jsr/jsr_056_jnlp.html</a>.</blockquote>
<a NAME="req" </a></a>
<h2>
Requirements</h2>

<blockquote>
<h3>
Desktop/Client requirements</h3>
The client machine requires support for the Java Runtime Environment (JRE),
version 1.2.2 or later. Java Web Start is available for
Windows 98/NT/2000/ME/XP, the Solaris Operating Environment, and Linux.
<p>See the <a href="readme.html">README</a>
document for details.<o>
<h3>
Server requirements</h3>
Applications can be deployed from any standard Web server. In order to
use Java Web Start, the Web server must be configured with support for
a new <a href="#mime">MIME type</a> as explained below.</blockquote>
<a NAME="website" </a></a>
<h2>
Setting up the Web site</h2>

<blockquote>Java Web Start leverages existing Internet technology, such
as the HTTP protocol and Web servers, so existing infrastructure for deploying
HTML-based contents can be reused to deploy Java Technology-based applications
using Java Web Start.
<p>In order to deploy your application to client machines, you must make
sure that all files containing your application are accessible through
a Web server. This typically amounts to copying one or more JAR files,
along with a JNLP file, into the Web server's directories. The set-up required
for enabling the Web site to support Java Web Start is very similar to
deploying HTML-based contents. The only caveat is that a new MIME type
needs to be configured for the Web server.
<p><a NAME="mime"></a><b>1. Configure the Web server to use the Java Web Start
MIME type</b>
<p>Configure the Web server so that all files with the <tt>.jnlp</tt> file
extension are set to the <tt>application/x-java-jnlp-file</tt> MIME type.
<p>Most Web browsers uses the MIME type returned with the contents from
the Web server to determine how to handle the particular content. The server
must return <tt>application/x-java-jnlp-file</tt> MIME type for JNLP files
in order for Java Web Start to be invoked.
<p>Each Web server has a specific way in which to add MIME types. For example,
for the Apache Web server you must add the following line to the <tt>.mime.types</tt>
configuration file:
<p><tt>application/x-java-jnlp-file JNLP</tt>
<p>Check the documentation for the specifics of your Web server.
<p><b>2. Create a JNLP file for the application</b>
<p>The easiest way to create this file is to modify an existing JNLP file
to your requirements.
<p>The syntax and format for the JNLP file is described in a later <a href="#jnlp">section</a>.
<p><b>3. Make the application accessible on the Web server</b>
<p>Ensure your application's JAR files and the JNLP file are accessible
at the URLs listed in the JNLP file.
<p><b>4. Create a link from the Web page to the JNLP file</b>
<p>The link to the JNLP file is a standard HTML link. For example:
<p><tt>&nbsp;&nbsp; &lt;a href="MyApp.jnlp">Launch My Application&lt;/a></tt>
<p>Given the setup in step 1, the Web server will automatically return
the <tt>application/x-java-jnlp-file</tt> MIME type with any file with
the <tt>.jnlp</tt> extension. This is critical for making sure that a Web
browser will launch Java Web Start when downloading the file.
<p>A link to the Java Web Start installer should also be provided on the
Web page, so users who do not already have Java Web Start installed can
download and install the software.
<p><b>Detecting if Java Web Start is installed</b>
<p>It is possible to detect if Java Web Start is installed by using a little
bit of JavaScript/VBScript in the HTML page. Using this sample script below,
a link to an application can be inserted as:
<p><tt>&nbsp;&nbsp;&nbsp; &lt;<b>SCRIPT</b> <b>LANGUAGE</b>="Javascript"></tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;!--</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; insertLink("http://www.mycompany.com/my-app.jnlp",</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"My Application");</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // --></tt>
<br><tt>&nbsp;&nbsp;&nbsp; &lt;/<b>SCRIPT</b>></tt>
<p>Please note that this sample JavaScript cannot detect whether 
Java Web Start is installed on Gecko-based browsers (for example, Netscape 
6.x).

<p>The <tt>insertLink</tt> method detects if Java Web Start is installed
or not. If it is installed, the HTML will be similar to:
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <tt>&lt;a href="http://www.mycompany.com/my-app.jnlp">My
Application&lt;/a></tt>
<p>If Java Web Start is not installed, the following HTML will be emitted:
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <tt>Need to install Java
Web Start</tt>
<p>In a real life situation, this should probably be a link to a download
page.
<p>The sample JavaScript/VBScript is listed below:
<p>
<pre>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;!---- This initializes the navigator.family object ----&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;<b>SCRIPT LANGUAGE</b>="JavaScript"
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SRC="xbDetectBrowser.js"&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/SCRIPT&gt;
</pre>
<p>
<p>&nbsp;<tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;<b>SCRIPT</b> <b>LANGUAGE</b>="JavaScript"></tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <b>var</b>
javawsInstalled = 0;</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; isIE = "false";</tt>
<p><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <b>if</b>
(navigator.mimeTypes &amp;&amp; navigator.mimeTypes.length) {</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x = navigator.mimeTypes['application/x-java-jnlp-file'];</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>if</b> (x) javawsInstalled = 1;</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } <b>else</b>
{</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;isIE = "true";</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</tt>
<p><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <b>function</b>
insertLink(url, name) {</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;!-- Developers should be aware that for Gecko-based browsers (NS 6.x) --&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;!-- Java Web Start might not be installed ------------------------------&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>if</b>
(javawsInstalled ||  navigator.family == 'gecko') {</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
document.write("&lt;a href=" + url + ">"&nbsp; + name + "&lt;/a>");</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
} <b>else</b> {</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
document.write("Need to install Java Web Start");</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
}</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/<b>SCRIPT</b>></tt>
<p><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;<b>SCRIPT</b> <b>LANGUAGE</b>="VBScript"></tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; on error
resume next</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <b>If</b>
isIE = "true" <b>Then</b></tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

<b>If</b> Not(IsObject(CreateObject("JavaWebStart.IsInstalled"))) <b>Then</b></tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
javawsInstalled = 0</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

<b>Else</b></tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
javawsInstalled = 1</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>End If</b></tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>End If</b></tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/<b>SCRIPT</b>></tt>
<p>
The above sample script invokes the browser detection script 
<tt>xbDetectBrowser.js</tt>. 
The content of <tt>xbDetectBrowser.js</tt> is included in this 
documentation as the file 
<a href="xbDetectBrowser.html"><tt>xbDetectBrowser.html</tt></a>. 
It has been reformatted as an HTML file for easy viewing in a 
browser.  To use this script, you would need to strip off the HTML tags 
and rename the file from <tt>xbDetectBrowser.html</tt> to 
<tt>xbDetectBrowser.js</tt>.
</blockquote>


<a name="autoinstall">
<h2>Using the Auto-Install Feature</h2></a>
<blockquote>
Version 1.2 of the Java Web Start product enables a "one-click" 
auto-download and installation mechanism that can improve the user 
experience of those end users who need to obtain Java Web Start.
<p>
<blockquote>
<hr>
<em>Note</em> -- This feature is available only for Microsoft Windows 
platforms. 
<hr>
</blockquote>
<p>
To take advantage of this new functionality, developers must implement 
some scripts on the web pages that host their applications. 
The scripts determine whether the end-user's browser is Netscape 
Navigator or Internet Explorer and whether they already have Java Web 
Start installed on their system.  Depending on these determinations, 
additional script on the application's web page can take action to 
initiate an automatic download and installation of Java Web Start 
followed by download and installation of the application.
<p>
<h3>JavaScript for NetScape Navigator browsers</h3>
The first bit of JavaScript should look something like this:
<blockquote><pre>
&lt;SCRIPT LANGUAGE="JavaScript"&gt;
var javawsInstalled = 0;
var javaws12Installed = 0;

isIE = "false";

if (navigator.mimeTypes && navigator.mimeTypes.length) {
  x = navigator.mimeTypes['application/x-java-jnlp-file'];
  if (x) {
     javawsInstalled = 1;
     javaws12Installed=1;
  }
} else { 
  isIE = "true";
}
&lt;/SCRIPT&gt;
</blockquote></pre>
This script determines whether the end-user's browser is an Internet 
Explorer browser and sets variable <tt>isIE</tt> to <tt>"true"</tt> 
if so, or to <tt>"false"</tt> if it's a Netscape Navigator browser.  
If the browser is a Netscape Navigator browser, the script checks the 
MIME mapping to determine whether any version of Java Web Start is 
installed. If so, it sets the <tt>javawsInstalled</tt> and 
<tt>javaws12Installed</tt> variables to <tt>1</tt>.  Note that 
this script cannot distinguish between different versions of Java 
Web Start that may be installed.

<h3>VBScript for Internet Explorer browsers</h3>
The above JavaScript is followed by VBScript that sets variables on Internet 
Explorer browers:
<blockquote><pre>
&lt;SCRIPT LANGUAGE="VBScript"&gt;
on error resume next
If isIE = "true" Then
  If Not(IsObject(CreateObject("JavaWebStart.isInstalled"))) Then
     javawsInstalled = 0
  Else
     javawsInstalled = 1
  End If
  If Not(IsObject(CreateObject("JavaWebStart.isInstalled.2"))) Then
     javaws12Installed = 0
  Else
     javaws12Installed = 1
  End If
End If
&lt;/SCRIPT&gt;
</pre></blockquote>
This VBScript is executed if the variable <tt>isIE</tt> from 
the preceeding JavaScript is <tt>"true"</tt>, that is, if the 
end-user's browser is Internet Explorer.  This script instantiates 
the "isInstalled" COM object in <tt>JavaWebStart.dll</tt>, and this 
object determines two things:
<ul>
<li>Whether the client machine has the latest version (1.2) of 
     Java Web Start installed.
<li>Whether the client machine has any version of Java Web Start 
     installed, regardless of version number.
</ul>     
   If Java Web Start 1.2 is installed, the script sets both the 
<tt>javawsInstalled</tt> and <tt>javaws12Installed</tt> variables 
to <tt>1</tt>.  If only a pre-1.2 Java Web Start product is installed, 
the script sets <tt>javawsInstalled</tt> to 1 and 
<tt>javaws12Installed</tt> to <tt>0</tt>.  If no version of Java Web Start 
software is installed, both variables are set to <tt>0</tt>.
<p>

<h3>Initiating the auto download</h3>
After the above two scripts have been executed, the variables 
<tt>javawsInstalled</tt> and <tt>javaws12Installed</tt> will be 
set to either 1 or 0, as follows:
<table border=1>
<tr><td>&nbsp;<th><tt>javawsInstalled</tt><th><tt>javaws12Installed</tt>
<tr><th>Internet Explorer<td>1 if any version of Java Web Start is installed;
 0 otherwise <td>1 if Java Web Start 1.2 is installed; 0 otherwise
<tr><th>Netscape Navigator<td>1 if any version of Java Web Start is installed; 0 otherwise<td>1 if any version of Java Web Start is installed; 0 otherwise
</table>
<p>
Subsequent JavaScript can use this information to decide whether 
to initiate an auto-download of the Java Web Start software or simply 
provide a link to the application's jnlp file. 
For example (the following sample script assumes that the developer's application is 
staged on a server with a web address of <tt>www.yyy.zzz</tt>): 
<blockquote><pre>
&lt;!---- This initializes the navigator.family object ----&gt;
&lt;SCRIPT LANGUAGE="JavaScript"
SRC="xbDetectBrowser.js"&gt;
&lt;/SCRIPT&gt;

&lt;SCRIPT LANGUAGE="JavaScript"&gt;
&lt;!-- Developers should be aware that for Gecko-based browsers (NS 6.x) --&gt;
&lt;!-- Java Web Start might not be installed ------------------------------&gt;
if (javawsInstalled ||  navigator.family == 'gecko') {
    document.write("&lt;a href=http://www.yyy.zzz/app.jnlp&gt;Launch 
        the application&lt;/a&gt;");
} else {
    document.write("Click ");
    document.write("&lt;a href=http://dlres.java.sun.com/PluginBrowserCheck?
        pass=http://www.yyy.zzz/download.html&
        fail=http://java.sun.com/cgi-bin/javawebstart-platform.sh&gt;here&lt;/a&gt; ");
    document.write("to download and install the Java Web Start product and 
        the application.");
}
&lt;/SCRIPT&gt;
</pre></blockquote>
(The line breaks following the '?' and '&' are for readability of this code 
snippet; in actual script there would be no breaks in the href string.)
<p>
The above sample script invokes the browser detection script 
<tt>xbDetectBrowser.js</tt>. 
The content of <tt>xbDetectBrowser.js</tt> is included in this 
documentation as the file 
<a href="xbDetectBrowser.html"><tt>xbDetectBrowser.html</tt></a>. 
It has been reformatted as an HTML file for easy viewing in a 
browser.  To use this script, you would need to strip off the HTML tags 
and rename the file from <tt>xbDetectBrowser.html</tt> to 
<tt>xbDetectBrowser.js</tt>.
<p>
If the <tt>javawsInstall</tt> is 1, indicating the Java Web Start is already 
available on the client, then the script provides a link to the application's 
jnlp file.  If Java Web Start is not installed on the client, the script 
instead provides a link to the PluginBrowserCheck program on the java.sun.com 
web site. PluginBrowserCheck checks whether 
the client uses Internet Explorer on a Microsoft Windows platform.  
If so, PluginBrowserCheck sends the user to <tt>http://www.yyy.zzz/download.html</tt>.
<p>
The <tt>download.html</tt> file is staged by the developer on the server side.  
It contains special <tt>OBJECT</tt> and <tt>PARAM</tt> tags that will download 
an auto-installer for Java Web Start to the client machine.  Along with 
Java Web Start, an Active X control will be downloaded to the client. 
The Active X control will launch the application using the newly 
installed Java Web Start.  Here is a sample <tt>download.html</tt> file:
<blockquote><pre>
&lt;HTML&gt;
&lt;BODY&gt;
&lt;OBJECT CODEBASE="http://java.sun.com/products/javawebstart/autodl/jinstall_javaws-1_2-windows-i586.cab" 
CLASSID="clsid:5852F5ED-8BF4-11D4-A245-0080C6F74
284" HEIGHT=0 WIDTH=0&gt;
&lt;PARAM NAME="app" VALUE="http://www.yyy.zzz/app.jnlp"&gt;
&lt;PARAM NAME="back" VALUE="true"&gt;
&lt;!-- Alternate HTML for browsers which cannot instantiate the object --&gt;
&lt;A HREF="http://java.sun.com/cgi-bin/javawebstart-platform.sh?"&gt;
Download Java Web Start&lt;/A&gt;
&lt;/OBJECT&gt;
&lt;/BODY&gt;
&lt;/HTML&gt;
</pre></blockquote>
<p>
This <tt>OBJECT</tt> tag fetches a cab file that contains an auto-installer 
for Java Web Start 1.2.  The cab file does not contain a Java Runtime 
Environment, so you will need to have a Java Runtime Environment 
installed before using this auto-download feature. The <tt>PARAM</tt> tags 
specify the location of the application's jnlp file so that it may be 
automatically launched after Java Web Start is installed on the client.
<p>
Referring back to the JavaScript sample:  If the PluginBrowserCheck determines 
that the end-user is not using Internet Explorer on Microsoft Windows, the 
end-user will be redirected to a shell script on java.sun.com that will call 
up an appropriate manual download page for Java Web Start.

</blockquote>






<a NAME="dev"></a>
<h2>
Application Development Considerations</h2>

<blockquote>Developing applications that can be deployed with Java Web
Start are generally the same as developing a stand-alone application for
the Java 2 platform. Hence, the entry point for the application is the
standard <tt>public static void main(String[] argv)</tt>.
<p>However, in order to support Web deployment -- automatic download and
launching of the application -- and to ensure that an application can run
in a secure sandbox, there are a few added considerations:
<ul>
<li>
An application must be delivered as a set of JAR files.</li>

<br>&nbsp;
<li>
All application resources, such as files and images must be stored in JAR
files; and they must be referred to using the <tt>getResource</tt> mechanism
in the Java 2 platform (see below).</li>

<br>&nbsp;
<li>
If an application is written to run in a secure sandbox, it must follow
these restrictions:</li>

<ul>
<li>
No access to local disk.</li>

<li>
All JAR files must be downloaded from the same host.</li>

<li>
Network connections are enabled only to the host from which the JAR files
are downloaded.</li>

<li>
No security manager can be installed.</li>

<li>
No native libraries.</li>

<li>Limited access to system properties. The application has read/write access to all system properties defined in the JNLP File, as well as read-only access to the same set of properties than an Applet has access to.
</ul>
<p>
An application is allowed to use the <tt>System.exit</tt> call.
<br>&nbsp;
<li>
An application that needs unrestricted access to the system will need to be delivered
in a set of signed JAR files. All entries in each JAR file must be signed.</li>
</ul>

<h3>
Retrieving Resources from JAR files</h3>
Java Web Start only transfers JAR files from the Web server to the
client machine. It determines where to store the JAR files on the
local machine. Thus, an application cannot use disk-relative references
to resources such as images and configuration files.
<p>All application resources must be retrieved from the JAR files specified
in the <tt>resources</tt> section of the JNLP file, or retrieved explicitly
using an HTTP request to the Web server. We recommend storing resources
in JAR files, since they will be cached on the local machine by Java Web
Start.
<p>The following code example shows how to retrieve images from a JAR file:
<p><b><tt><font color="#FF0000">&nbsp;&nbsp; // Get current classloader</font></tt></b>
<br><tt>&nbsp;&nbsp; ClassLoader cl = <b>this</b>.getClass().getClassLoader();</tt>
<br><b><tt><font color="#FF0000">&nbsp;&nbsp; // Create icons</font></tt></b>
<br><tt>&nbsp;&nbsp; Icon saveIcon&nbsp; = <b>new </b>ImageIcon(cl.getResource("images/save.gif"));</tt>
<br><tt>&nbsp;&nbsp; Icon cutIcon&nbsp;&nbsp; = <b>new </b>ImageIcon(cl.getResource("images/cut.gif"));</tt>
<br><tt>&nbsp;&nbsp; ...</tt>
<p>The example assumes that the following entries exist in one of the JAR
files for the application:
<p><tt>images/save.gif</tt>
<br><tt>images/cut.gif</tt>
<h3>
Security and Code Signing</h3>
Java Web Start addresses the security issues of:
<ul>
<li>
Protecting users against malicious code (intentional &amp; unintentional)
that may affect local files</li>

<br>&nbsp;
<li>
Protecting enterprises against code that may attempt to access or destroy
data on networks</li>
</ul>
Applications launched with Java Web Start are -- by default -- run in a
restricted environment where they have limited access to local computing
resources, such as storage devices and the local network. In this sandbox
environment, Java Web Start can guarantee that a downloaded and potentially
untrusted application cannot compromise the security of the local files
or the network.
<p>An additional security feature supported by Java Web Start is digital
code signing. If an application being invoked is delivered in one or more
signed JAR files, Java Web Start will verify that the contents of the JAR
file have not been modified since they were signed. If verification of
a digital signature fails, Java Web Start will not run the application,
since it may have been compromised by a third-party.
<p>The support for code signing is important for both users and for application
service providers. This service makes it possible for users to verify that
an application comes from a trusted source. Because the application service
provider signs the code, both can be ensured that no other party can impersonate
the application on the Web. A signed application that is trusted by the
user can also request additional system privileges, such as access to a
local disk.
<p>Java Web Start presents a dialog displaying the application's origin,
based on the signer's certificate, before the application is launched. Thereby
allowing the user to make an informed decision whether to grant additional 
privileges to the downloaded code, or not.
<p>An application can request full access to a client system when all its
JAR files are signed by including the following settings in the JNLP file:
<p><tt>&lt;<b>security</b>></tt>
<br><tt>&nbsp;&nbsp; &lt;<b>all-permissions</b>/></tt>
<br><tt>&lt;/<b>security</b>></tt>
<p>The implementation of code signing in Java Web Start is based on the
security API in the core Java 2 Platform. The Java 2 SE JRE 1.2.x supports
code signing with the SHAwithSDA algorithm. Java 2 SE JRE 1.3 also supports
MD2withRSA and MD5withRSA. The MD5withRSA is currently the most often used
algorithm.
<p>Developers sign code for use with Java Web Start in the same
manner as for Java Applets by using the standard <tt>jarsigner</tt> tool from the
Java 2 SE SDK. The <a href="http://java.sun.com/j2se/1.3/docs/tooldocs/win32/jarsigner.html">documentation</a> for the <tt>jarsigner</tt> tool provides examples on
how to sign code, create test certificates, and other signing related issues.
<p>Java Web Start also support use of the Netscape <tt>signtool</tt> when used with
the Java 2 SE JRE 1.3.0. See the Netscape Web site for details: <a href="http://developer.netscape.com/software/signedobj/">http://developer.netscape.com/software/signedobj/</a>

<h3>
Signing JAR Files with a Test Certificate</h3>

<p>
Here are the steps needed to sign a JAR file with a test certificate:
<ol>
<li>
    Make sure that you have a JDK 1.2 or JDK 1.3 keytool and jarsigner in your path 
    (located in the J2SE SDK bin directory).
<p>
</li>
<li>
    Create a new key in a new keystore as follows:
    <blockquote>
        <tt>keytool -genkey -keystore myKeystore -alias myself</tt>
    </blockquote>
    You will get prompted for a information about the new key, such as password,
    name, etc.  This will create the myKeystore file on disk.
<p>
</li>
<li>
    Then, create a self-signed test certificate as follows:
    <blockquote>
        <tt>keytool -selfcert -alias myself -keystore myKeystore</tt>
    </blockquote>
    This will prompt for the password. Generating the certificate takes a few minutes.
<p>
</li>
<li>
    Check to make sure that everything is ok. To list the contents of the keystore, use 
    the command:
    <blockquote>
        <tt>keytool -list -keystore myKeystore</tt>
    </blockquote>
    It should list something like:
    <blockquote>
    <tt>
        Keystore type: jks<br>
        Keystore provider: SUN<br>
        <br>
        Your keystore contains 1 entry:<br>
        <br>
         myself, Tue Jan 23 19:29:32 PST 2001, keyEntry,<br>
        Certificate fingerprint (MD5):<br>
        C2:E9:BF:F9:D3:DF:4C:8F:3C:5F:22:9E:AF:0B:42:9D<br>
    </tt>
    </blockquote>
</li>
<li>
Finally, sign the JAR file with the test certificate as follows:

    <blockquote>
        <tt>jarsigner -keystore myKeystore test.jar myself</tt>
    </blockquote>
    Repeat this step on all of your JAR files.
   <p>
</li>
</ol>
<p>
Please note that a self-signed test certificate should only be 
used for internal testing, since it does not provide any guarantees 
about the identity of the user and therefore cannot be trusted. A 
trust-worthy certificate can be obtained from a certificate authority, 
such as VeriSign, and should be used when the application is put into 
production. 

<h3>
How to Encode JNLP Files in UTF-8</h3>

<p>
Beginning with Java Web Start version 1.2, JNLP files may be encoded in 
any character encoding supported by the J2SE platform. (See the 
<a href="http://java.sun.com/j2se/1.4/docs/guide/intl/encoding.doc.html">J2SE 
documentation</a> for a list of supported encodings.) 
<p>
Specify an encoding in the XML prolog of the JNLP file.  
For example, the following line indicates that the JNLP file will be 
encoded in UTF-16.
<blockquote><pre>
&lt;?xml version="1.0" encoding="utf-16"?&gt;
</pre></blockquote>
The XML prolog itself must be UTF-8 encoded. 

</blockquote>



<a NAME="servlet"></a>
<h2>
Packaging an application for easy deployment</h2>
<blockquote>
   The Developer's Pack contains a servlet that can be used to bundle a JNLP-deployed
   application in a Web Archive (WAR) file. See <a href="downloadservletguide.html">
   Packaging JNLP Applications in a Web Archive</a>
</blockquote>

<a NAME="conv"></a>
<h2>
Converting JNLP files to work with this release</h2>

<blockquote>The JNLP file format has not changed between the 1.0 and this release.

<p>If your JNLP file
is compatible with a version of Java Web Start that is lower than 1.0, please note that the JNLP file format 
has changed significantly.&nbsp; Below is a list of the most common modifications that 
needs to be applied to a 0.4 JNLP file to make it compatible with Java Web Start 1.0 or 
higher:
<ul>
<li>
Set <tt>spec</tt> attribute to 1.0.</li>

<li>
Rename the <tt>unrestricted</tt> element to <tt>all-permissions</tt>.</li>

<li>
Rename the <tt>jre</tt> element to <tt>j2se</tt> and move this element
inside the <tt>resources</tt> element (i.e., make <tt>j2se</tt> a subelement
of <tt>resources</tt>).</li>
</ul>
<p>
Converting JNLP files used with the 1.0-beta or 1.0-rc release only requires
updating the <tt>spec</tt> attribute to "1.0".
</blockquote>
<h2>
<a NAME="jnlp"></a></h2>

<h2>
JNLP File Syntax</h2>

<blockquote>The format used in this release correspond to the format
specified in the Java Network Launching Protocol and API (JNLP) Specification, v1.0.
This document describes the most commonly used elements of the JNLP
file. Refer to the <a href="http://java.sun.com/aboutJava/communityprocess/jsr/jsr_056_jnlp.html">specification</a> for a complete description of the format.
<p>The JNLP file is an XML document. The following shows a complete example
of a JNLP file:
<p><tt><b>&lt;?xml version</b>="1.0" <b>encoding</b>="utf-8"?></tt>
<br><b><tt><font color="#FF0000">&lt;!-- JNLP File for SwingSet2 Demo Application
--></font></tt></b>
<br><tt>&lt;<b>jnlp</b></tt>
<br><tt>&nbsp; <b>spec=</b>"1.0+"</tt>
<br><tt>&nbsp; <b>codebase=</b>"http://javaweb.eng.com/jaws/apps"</tt>
<br><tt>&nbsp; <b>href=</b>"swingset2.jnlp"></tt>
<br><tt>&nbsp; &lt;<b>information</b>></tt>
<br><tt>&nbsp;&nbsp;&nbsp; &lt;<b>title</b>>SwingSet2 Demo Application&lt;/<b>title</b>></tt>
<br><tt>&nbsp;&nbsp;&nbsp; &lt;<b>vendor</b>>Sun Microsystems, Inc.&lt;/<b>vendor</b>></tt>
<br><tt>&nbsp;&nbsp;&nbsp; &lt;<b>homepage href</b>="docs/help.html"/></tt>
<br><tt>&nbsp;&nbsp;&nbsp; &lt;<b>description</b>>SwingSet2 Demo Application<b>&lt;/description></b></tt>
<br><tt>&nbsp;&nbsp;&nbsp; &lt;<b>description kind</b>="short">A demo of
the capabilities of the Swing Graphical User Interface.&lt;/<b>description</b>></tt>
<br><tt>&nbsp;&nbsp;&nbsp; &lt;<b>icon href</b>="images/swingset2.jpg"/></tt>
<br><tt>&nbsp;&nbsp;&nbsp; &lt;<b>icon kind</b>="splash" <b>href</b>="images/splash.gif"/></tt>
<br><tt>&nbsp;&nbsp;&nbsp; &lt;<b>offline-allowed</b>/></tt>
<br><tt>&nbsp; &lt;/<b>information</b>></tt>
<br><tt>&nbsp; &lt;<b>security</b>></tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;<b>all-permissions</b>/></tt>
<br><tt>&nbsp; &lt;/<b>security</b>></tt>
<br><tt>&nbsp; &lt;<b>resources</b>></tt>
<br><tt>&nbsp;&nbsp;&nbsp; &lt;<b>j2se version</b>="1.3"/></tt>
<br><tt>&nbsp;&nbsp;&nbsp; &lt;<b>jar href</b>="lib/SwingSet2.jar"/></tt>
<br><tt>&nbsp; &lt;/<b>resources</b>></tt>
<br><tt>&nbsp; &lt;<b>application-desc main-class</b>="SwingSet2"/></tt>
<br><tt>&lt;/<b>jnlp</b>></tt>
<p>The example shows the basic outline of the document. The root element
is <tt>jnlp</tt>, which has four subelements: <tt>information</tt>, <tt>security</tt>,
<tt>resources</tt>,
and <tt>application-desc</tt>. In addition, Java Web Start also supports
launching Applets by using the <tt>applet-desc</tt> element. The elements
are described in more detail below.
<h3>
The JNLP Element</h3>
<p><b>spec attribute</b>: This attribute must be 1.0 or higher to work with this
release. The default value is "1.0+". Thus, it can typically be omited.
<p><b>codebase attribute</b>: All relative URLs specified in <tt>href</tt>
attributes in the JNLP file is using this URL as a base.
<p><b>href attribute:</b> This is a URL pointing to the location of the
JNLP file itself. Java Web Start requires this attribute to be
set in order for the application to be included in the Application Manager.
<h3>
The Information Element</h3>
<b>title element:</b> The name of the application.
<p><b>vendor element:</b> The name of the vendor of the application.
<p><b>homepage element:</b> Contains a single attribute, <tt>href</tt>,
which is a URL locating the home page for the Application. It is used by
the Application Manager to point the user to a Web page where they can
find more information about the application.
<p><b>description element:</b> A short statement about the application.
Description elements are optional. The <tt>kind</tt> attribute defines
how the description should be used, it can have one of the following values:
<ul>
<li>
<i>one-line</i>: If a reference to the application is going to appear on
one row in a list or a table, this description will be used.</li>

<li>
<i>short</i>: If a reference to the application is going to be displayed
in a situation where there is room for a paragraph, this description is
used.</li>

<li>
<i>tooltip</i>: A description of the application intended to be used as
a tooltip.</li>
</ul>
Only one description element of each kind can be specified. A description
element without a kind is used as a default value. Thus, if Java Web Start
needs a description of kind short, and it is not specified in the JNLP
file, then the text from the description without an attribute is used
<p>All descriptions contain plain text. No formatting, such as HTML tags
is supported.
<p><b>icon element:</b> Contains an HTTP URL to an image file in either
GIF or JPEG format. The icons are used to represents the application when
Java Web Start presents the application to the user during launch, in the
Application Manager, and in desktop shortcuts. A 64x64 icon is shown during download 
and a 32x32 for desktop icons and in the application manager. Java Web Start
automatically resizes an icon to the appropriate size.
<p>Optional <tt>width</tt> and <tt>height</tt> attributes can be used to
indicate the size of the images.
<p>The optional <tt>kind="splash"</tt> attribute may be used in an 
icon element to indicate that the image is to be used as a "splash" screen 
during the launch of an application.  If the JNLP file does not contain an 
<tt>icon</tt> element with a <tt>kind="splash"</tt> 
attribute, but does contain another <tt>icon</tt> tag, Java Web Start will 
display a splash screen consisting of the image specified by the <tt>icon</tt> 
element on the left and the application's title and vendor on the right.
<p>
If the JNLP file does not contain any <tt>icon</tt> images, the splash image  
will consist of the application's title and vendor, as taken from the JNLP file.
<p>
Splash images will be surrounded by a border defined by Java Web Start.
<p>
The first time an application is launched following the addition or modification
of the <tt>icon</tt> element in the JNLP file, the old splash image will 
still be displayed.  The new splash image will appear on the second and 
subsequent launches of the application.
<p><b>offline-allowed element:</b> The optional <tt>offline-allowed</tt>
element indicates if the application can be launched offline.
<p>Applications that are not marked offline in the JNLP file will not be
able to be launched through the Application Manager, if the offline checkbox
is checked. The default is that an application only works if the client
system is online.
    <p>
    The <tt>offline-allowed</tt> element also controls how Java Web Start checks for an update
    to an application. If the element is not specified, i.e., the application is required
    to be online to run, Java Web Start will always do a check for an updated version before
    the application is launched. And if an update is found, the new application will be
    downloaded and launched. Thus, the user is guaranteed to always be running the latest
    version of the application. However, the application will not be able to run offline.
    <p>
    If <tt>offline-allowed</tt> is specified, Java Web Start will also try to see if an update
    is available. However, if the application is already downloaded, then this check will 
    timeout after a few seconds, and in that case the cached application will be launched 
    instead. Thus, in this situation, given a reasonable fast server connection, the user
    will in most cases run the lastest version of the application, but it is not guaranteed.
    However, offline launching is supported.
<h3>
The Security Element</h3>
Each application is, by default, run in a restricted execution environment,
similar to the Applet sandbox.&nbsp; The security element can be used to
request unrestricted access.
<p>If the <tt>all-permissions</tt> element is specified, the application
will have full access to the client machine and local network. If an application
requested full access, then <i>all</i> JAR files must be signed. The user
will be prompted to accept the certificate the first time the application
is launched.
<br>&nbsp;
<h3>
The Resources Element</h3>
The <tt>resources</tt> element is used to specify all the resources, such
as Java class files, native libraries, and system properties, that are
part of the application.&nbsp; A resource definition can be restricted
to a specific operating system, architecture, or locale using the <tt>os</tt>,
<tt>arch</tt>,
and <tt>locale</tt> attributes.
<p>The resources element has 6 different possible subelements: <tt>jar</tt>,
<tt>nativelib</tt>,
<tt>j2se</tt>,
<tt>property</tt>,
<tt>package</tt>,
and <tt>extension</tt>. The <tt>package</tt> and <tt>extension</tt> elements
are not discussed in this developer's guide. See <a href="http://java.sun.com/aboutJava/communityprocess/jsr/jsr_056_jnlp.html">specification</a>&nbsp; for details.
<p>A <tt>jar</tt> element specifies a JAR file that is part of the application's
classpath.&nbsp; For example:
<p><tt>&nbsp; &lt;<b>jar href</b>="myjar.jar"/></tt>
<p>The <tt>jar</tt> file will be loaded into the JVM using a <tt>ClassLoader</tt>
object.&nbsp; The <tt>jar</tt> file will typically contain Java classes
that contain the code for the particular application, but can also contain
other resources, such as icons and configuration files, that are available
through the <tt>getResource</tt> mechanism.
<p>A <tt>nativelib</tt> element specifies a JAR file that contains native
libraries.&nbsp; For example:
<p>&nbsp;&nbsp;&nbsp; <tt>&lt;<b>nativelib href</b>="lib/windows/corelib.jar"/></tt>
<p>The JNLP Client must ensure that each file entry in the root directory
of the JAR file (i.e., /) can be loaded into the running process using
the <tt>System.loadLibrary</tt> method.&nbsp; Each entry must contain a platform-dependent
shared library with the correct naming convention, e.g., *.dll on Windows,
or lib*.so on Solaris/Linux.&nbsp; The application is responsible for doing
the actual call to <tt>System.loadLibrary</tt>.
<p>Native libraries would typically be included in a <tt>resources</tt>
element that is guarded against a particular operating system and architecture.&nbsp;
For example:
<p><tt>&nbsp;&nbsp;&nbsp; &lt;<b>resources os</b>="SunOS" <b>arch=</b>"sparc"></tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;<b>nativelib href</b>="lib/solaris/corelibs.jar"/></tt>
<br><tt>&nbsp;&nbsp;&nbsp; &lt;/<b>resource</b>></tt>
<p>By default, <tt>jar</tt> and <tt>nativelib</tt> resources will be downloaded
eagerly, i.e., they are downloaded and available locally to the JVM running
the application before the application is launched.&nbsp; The <tt>jar</tt>
and <tt>nativelib</tt> elements also allow a resource to be specified as
<tt>lazy</tt>.&nbsp;
This means that the resource does not necessarily need to be downloaded
onto the client system before the application is launched.
<p>The <tt>download</tt> attribute is used to control whether a resource
is downloaded eagerly or lazily.&nbsp; For example:
<p><tt>&nbsp;&nbsp;&nbsp; &lt;<b>jar</b> <b>href</b>="sound.jar"
<b>download</b>="lazy"/></tt>
<br><tt>&nbsp;&nbsp;&nbsp; &lt;<b>nativelib</b> <b>href</b>="native-sound.jar"
<b>download</b>="eager"/></tt>
<p>The <tt>j2se</tt> element specifies what Java 2 SE Runtime Environment
(JRE) versions an application is supported on, as well as standard parameters
to the Java Virtual Machine.&nbsp; Several JREs can be specified, which
indicates a prioritized list of the supported JREs, with the most preferred
version first.&nbsp; For example:
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <tt>&lt;<b>j2se version</b>="1.3"
<b>initial-heap-size</b>="64m"/></tt>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <tt>&lt;<b>j2se version</b>="1.2"/></tt>

<p>The <tt>version</tt> attribute refers to, by default, a particular revision
of the Java 2 platform. Current defined revisions are "1.2" and "1.3".
The JNLP specification also allows specifying exact product versions, such
as the Java 2 JRE 1.2.2-001 by Sun Microsystems, Inc.

<p>Java Web Start does not consider a non-FCS JRE to match a
 request for a particular <i>platform</i> version.  For
 example, a request of the form <tt>&lt;j2se version="1.4+"&gt;</tt> does not
 consider an installed "1.4.0-beta" JRE as a match for the request. A JRE from
 Sun Microsystems, Inc. is by convention (starting from 1.3.0) a non-FCS if
 there is a dash (-) in the product version string. An application  wishing to
 run under any beta J2RE must explicitly specify a <i>product</i> version, i.e., also
 using the <tt>href</tt> attribute in the <tt>j2se</tt> element.
 For example, a proper request for a beta JRE:<br><br>
 &lt;<tt><b>j2se version</b>="1.4-beta"
 <b>href</b>="http://java.sun.com/products/autodl/j2se"/></tt>

<p>The <tt>property</tt> element defines a system property that will be
available through the <tt>System.getProperty</tt> and <tt>System.getProperties
</tt>methods.
It has two required attributes:&nbsp; <tt>name</tt> and <tt>value</tt>.&nbsp;
For example:
<p><tt>&lt;<b>property name</b>="key" <b>value</b>="overwritten"/></tt>
<h3>
The Application-Desc Element</h3>
The <tt>application</tt> element indicates that the JNLP file is launching
an application (as opposed to an Applet). The application element has an
optional attribute, <tt>main-class</tt>, which can be used to specify the
name of the application's main class, i.e., the class that contains the
<tt>public
static void main(String argv[])</tt> method where execution must begin.
<p>The main-class attribute can be omitted, if the first JAR file specified
in the JNLP File contains a manifest file containing the main class.
<p>Arguments can be specified to the application be including one or more
nested <tt>argument</tt> elements. For example:
<p><tt>&nbsp; &lt;<b>application-desc main-class</b>="Main"></tt>
<br><tt>&nbsp;&nbsp;&nbsp; &lt;<b>argument</b>>arg1&lt;/<b>argument</b>></tt>
<br><tt>&nbsp;&nbsp;&nbsp; &lt;<b>argument</b>>arg2&lt;/<b>argument</b>></tt>
<br><tt>&nbsp; &lt;/<b>application-desc</b>></tt>
<h3>
The Applet-Desc Element</h3>
Java Web Start has support for launching Java Applets. This support provides
easy migration of existing code to Java Web Start.
<p>An Applet is launched using the <tt>applet-desc</tt> element instead
of the
<tt>application-desc</tt> element. For example:
<p><tt>&nbsp; &lt;<b>applet-desc</b></tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <b>documentBase</b>="http://..."</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <b>name</b>="TimePilot"</tt>
<br><tt><b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; main-class</b>="TimePilot.TimePilotApp"</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <b>width</b>="527"</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <b>height</b>="428"></tt>
<br><tt>&nbsp;&nbsp;&nbsp; &lt;<b>param name=</b>"key1" <b>value=</b>"value1"/></tt>
<br><tt>&nbsp;&nbsp;&nbsp; &lt;<b>param name=</b>"key2" <b>value=</b>"value2"/></tt>
<br><tt>&nbsp; &lt;<b>/applet-desc</b>></tt>
<p>The JAR files that make up the Applet are described using the <tt>resources</tt>
element as for applications. The <tt>documentBase</tt> must be provided
explicitly since a JNLP file is not embedded in an HTML page. The rest
of the attributes correspond to the respective HTML applet tag elements.
<p>The <tt>main-class</tt> attribute is used instead of the <tt>code</tt>
attribute.&nbsp; The <tt>main-class</tt> attribute is assigned the name
of the <tt>Applet</tt> class (without the <tt>.class</tt> extension).&nbsp;
This attribute can be omitted if the <tt>Applet</tt> class can be found
from the <tt>Main-Class</tt> manifest entry in the main JAR file.
<p>Note: Applets must be packaged in JAR files in order to work with Java
Web Start.</blockquote>

<h2>
<a NAME="api"></a></h2>

<h2>
JNLP API Examples</h2>

<blockquote>The JNLP API is designed to provide additional information
to the application that would otherwise not be available using the standard
Java 2 SE API. The following code examples show how the following
services can be used: <tt>BasicService</tt>, <tt>ClipboardService</tt>,
<tt>DownloadService</tt>,
<tt>FileOpenService</tt>,
<tt>FileSaveService</tt>,
<tt>PrintService</tt>,
and <tt>PersistenceService</tt>.
<p>The public classes and interfaces in the JNLP API are included in the
<tt>jnlp.jar</tt>
file. This JAR file must be included in the classpath when compiling source
files that use the JNLP API. For example (on Windows):
<p><tt>javac -classpath .;jnlp.jar *.java</tt>
<p>The <tt>jnlp.jar</tt> file is included in the JNLP Developers Pack.
<br>&nbsp;
<h3>
Using a BasicService Service</h3>
The <a href="javadoc/index.html">javax.jnlp.BasicService</a> service provides
a set of methods for querying and interacting with the environment similar
to what the <tt>AppletContext</tt> provides for a Java Applet.
<p>The <tt>showURL</tt> method uses the JNLP API to direct the default
browser on the platform to show the given URL. The method returns true
if the request successes, otherwise false.
<p><tt><b>import </b>javax.jnlp.*;</tt>
<br><tt>&nbsp;&nbsp; ...</tt>
<p><b><tt><font color="#FF0000">&nbsp;&nbsp; // Method to show a URL</font></tt></b>
<br><tt>&nbsp;&nbsp; boolean showURL(URL url) {</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <b>try</b> {</tt>
<br><b><tt><font color="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
// Lookup the javax.jnlp.BasicService object</font></tt></b>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; BasicService
bs = (BasicService)ServiceManager.lookup("javax.jnlp.BasicService");</tt>
<br><b><tt><font color="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
// Invoke the showDocument method</font></tt></b>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <b>return
</b>bs.showDocument(url);</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } <b>catch</b>(UnavailableServiceException
ue) {</tt>
<br><b><tt><font color="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
// Service is not supported</font></tt></b>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <b>return
</b>false;</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</tt>
<br><tt>&nbsp;&nbsp;&nbsp; }</tt>
<h3>
Using a ClipboardService Service</h3>
The <tt><a href="javadoc/index.html">javax.jnlp.ClipboardService</a></tt>
service provides methods for accessing the shared system-wide clipboard,
even for applications that are running in the restricted execution environment.
<p>Java Web Start will warn the user of the potential security risk of
letting an untrusted application access potentially confidential information
stored in the clipboard, or overwriting contents stored in the clipboard.
<p><tt><b>import</b> javax.jnlp;</tt>
<br><tt>&nbsp;&nbsp;&nbsp; ...</tt>
<p><tt>&nbsp;&nbsp;&nbsp; <b>private</b> ClipboardService cs;</tt>
<p><tt>&nbsp;&nbsp;&nbsp; <b>try</b> {</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cs = (ClipboardService)ServiceManager.lookup</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
("javax.jnlp.ClipboardService");</tt>
<br><tt>&nbsp;&nbsp;&nbsp; } <b>catch</b> (UnavailableServiceException
e) {</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cs = null;</tt>
<br><tt>&nbsp;&nbsp;&nbsp; }</tt>
<p><tt>&nbsp;&nbsp;&nbsp; <b>if</b> (cs != null) {</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <b><font color="#FF0000">//
set the system clipboard contents to a string selection</font></b></tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; StringSelection ss =
new StringSelection("Java Web Start!");</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cs.setContents(ss);</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <b><font color="#FF0000">//
get the contents of the system clipboard and print them</font></b></tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Transferable tr = cs.getContents();</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <b>if</b> (tr.isDataFlavorSupported(DataFlavor.stringFlavor))
{</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <b>try</b>
{</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
String s = (String)tr.getTransferData(DataFlavor.stringFlavor);</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
System.out.println("Clipboard contents: " + s);</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
} <b>catch</b> (Exception e) {</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
e.printStackTrace();</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
}</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</tt>
<br><tt>&nbsp;&nbsp;&nbsp; }</tt>
<h3>
Using a DownloadService Service</h3>
The <a href="javadoc/index.html">javax.jnlp.DownloadService</a> service
allows an application to control how its own resources are cached.
<p>The service allows an application to determine which of its resources
are cached, to force resources to be cached, and to remove resources from
the cache.
<pre>
<tt>
<b>import</b> javax.jnlp.*; 
    ... 

    DownloadService ds; 

    <b>try</b> { 
        ds = (DownloadService)ServiceManager.lookup("javax.jnlp.DownloadService"); 
    } <b>catch</b> (UnavailableServiceException e) { 
        ds = null; 
    } 

    <b>if</b> (ds != null) { 

        <b>try</b> { 
            <font color="#FF0000"><b>// determine if a particular resource is cached</b></font>
            URL url = 
                    new URL("http://java.sun.com/products/javawebstart/lib/draw.jar"); 
            boolean cached = ds.isResourceCached(url, "1.0"); 
            <font color="#FF0000"><b>// remove the resource from the cache </b></font>
            <b>if</b> (cached) { 
                ds.removeResource(url, "1.0"); 
            } 
            <font color="#FF0000"><b>// reload the resource into the cache </b></font>
            DownloadServiceListener dsl = ds.getDefaultProgressWindow(); 
            ds.loadResource(url, "1.0", dsl); 
        } <b>catch</b> (Exception e) { 
            e.printStackTrace(); 
        } 
    } 
</tt>
</pre>
<h3>
<a NAME="fos"></a>Using a FileOpenService Service</h3>
The <a href="javadoc/index.html">javax.jnlp.FileOpenService</a> service
provides methods for importing files from the local disk, even for applications
that are running in the restricted execution environment.
<p>This interface is designed to provide the same kind of of disk access
to potentially untrusted Web-deployed applications that a Web developer
has when using HTML.&nbsp; HTML forms support the inclusion of files by
displaying a file open dialog.
<pre>
<tt>
<b>import</b> javax.jnlp.*; 
    ... 

    FileOpenService fos; 

    <b>try</b> { 
        fos = (FileOpenService)ServiceManager.lookup("javax.jnlp.FileOpenService"); 
    } <b>catch</b> (UnavailableServiceException e) { 
        fos = null; 
    } 

    <b>if</b> (fos != null) { 
        <b>try</b> { 
            <font color="#FF0000"><b>// ask user to select a file through this service </b></font>
            FileContents fc = fos.openFileDialog(null, null); 
            <font color="#FF0000"><b>// as user to select multiple files through this service </b></font>
            FileContents [] fcs = fos.openMultiFileDialog(null, null); 
        } <b>catch</b> (Exception e) { 
            e.printStackTrace(); 
        } 
    } 
</tt>
</pre>
<h3>
Using a FileSaveService Service</h3>
The <a href="javadoc/index.html">javax.jnlp.FileSaveService</a> service
provides methods for exporting files to the local disk, even for applications
that are running in the restricted execution environment.
<p>This interface is designed to provide the same level of disk access
to potentially untrusted Web-deployed applications that a Web browser provides
for contents that it is displaying.&nbsp; Most browsers provide a Save
As... dialog as part of their user interface.
<pre>
<tt>
<b>import</b> javax.jnlp.*; 
    ... 

    FileSaveService fss; 
    FileOpenService fos; 

    <b>try</b> { 
        fos = (FileOpenService)ServiceManager.lookup("javax.jnlp.FileOpenService"); 
        fss = (FileSaveService)ServiceManager.lookup 
                                   ("javax.jnlp.FileSaveService"); 
    } <b>catch</b> (UnavailableServiceException e) { 
        fss = null; 
        fos = null; 
    } 

    <b>if</b> (fss != null && fos != null) { 
        <b>try</b> { 
            <font color="#FF0000"><b>// get a file with FileOpenService </b></font>
            FileContents fc = fos.openFileDialog(null, null); 
            <font color="#FF0000"><b>// one way to save a file </b></font>
            FileContents newfc = fss.saveFileDialog(null, null, 
            fc.getInputStream(), "newFileName.txt"); 
            <font color="#FF0000"><b>// another way to save a file </b></font>
            FileContents newfc2 = fss.saveAsFileDialog(null, null, fc); 

        } <b>catch</b> (Exception e) { 
            e.printStackTrace(); 
        } 
    } 
</tt>
</pre>
<p>Also see <a href="#filecontents">Using FileContents</a>.
<h3>
Using a PrintService Service</h3>
The <a href="javadoc/index.html">javax.jnlp.PrintService</a> service provides
methods for accessing to printing even for applications that are running
in the restricted execution environment.
<p>Using this service, an application can submit a print job. Java Web
Start will then show this request to the user, and if accepted queue the
request to the printer.</p>
<pre>
<tt>
<b>import</b> javax.jnlp.*; 
    ... 

    PrintService ps; 

    <b>try</b> { 
        ps = (PrintService)ServiceManager.lookup("javax.jnlp.PrintService"); 
    } <b>catch</b> (UnavailableServiceException e) { 
        ps = null; 
    } 

    <b>if</b> (ps != null) { 
        <b>try</b> { 
             
            <font color="#FF0000"><b>// get the default PageFormat</b></font>
            PageFormat pf = ps.getDefaultPage(); 

            <font color="#FF0000"><b>// ask the user to customize the PageFormat</b></font>
            PageFormat newPf = ps.showPageFormatDialog(pf); 

            <font color="#FF0000"><b>// print the document with the PageFormat above</b></font>
            ps.print(new DocToPrint()); 
           
        } <b>catch</b> (Exception e) { 
            e.printStackTrace(); 
        } 
    } 

    <font color="#FF0000"><b>// Code to construct the Printable Document</b></font>
    <b>class</b> DocToPrint <b>implements</b> Printable {
        <b>public</b> int print(Graphics g, PageFormat pageformat, int PageIndex){
            <font color="#FF0000"><b>// code to generate what you want to print</b></font>   
        }
    }
</tt>
</pre>
<h3>
Using a PersistenceService Service</h3>
The&nbsp; <a href="javadoc/index.html">javax.jnlp.PersistenceService</a>
service provides methods for storing data locally on the client system,
even for applications that are running in the restricted execution environment.
<p>The service is designed to be (somewhat) similar to that which the cookie
mechanism provides to HTML-based applications.&nbsp; Cookies allow a small
amount of data to be stored locally on the client system.&nbsp; That data
can be securely managed by the browser and can only be retrieved by HTML
pages which originate from the same URL as the page that stored the data.

<pre>
<tt>
<b>import</b> javax.jnlp.*; 
    ... 

    PersistenceService ps; 
    BasicService bs; 

    <b>try</b> { 
        ps = (PersistenceService)ServiceManager.lookup("javax.jnlp.PersistenceService"); 
        bs = (BasicService)ServiceManager.lookup("javax.jnlp.BasicService"); 
    } <b>catch</b> (UnavailableServiceException e) { 
        ps = null; 
        bs = null; 
    } 

    <b>if</b> (ps != null && bs != null) { 

        <b>try</b> { 
            <font color="#FF0000"><b>// find all the muffins for our URL</b></font>
            URL codebase = bs.getCodeBase(); 
            String [] muffins = ps.getNames(url); 

            <font color="#FF0000"><b>// get the attributes (tags) for each of these muffins. 
            // update the server's copy of the data if any muffins 
            // are dirty </b></font>
            int [] tags = new int[muffins.length]; 
            URL [] muffinURLs = new URL[muffins.length]; 
            <b>for</b> (int i = 0; i < muffins.length; i++) { 
                muffinURLs[i] = new URL(codebase.toString() + muffins[i]); 
                tags[i] = ps.getTag(muffinURLs[i]); 
                <font color="#FF0000"><b>// update the server if anything is tagged DIRTY </b></font>
                <b>if</b> (tags[i] == PersistenceService.DIRTY) { 
                    doUpdateServer(muffinURLs[i]); 
                } 
            } 

            <font color="#FF0000"><b>// read in the contents of a muffin and then delete it </b></font>
            FileContents fc = ps.get(muffinURLs[0]); 
            long maxsize = fc.getMaxLength(); 
            byte [] buf = new byte[fc.getLength()]; 
            InputStream is = fc.getInputStream(); 
            long pos = 0; 
            <b>while</b>((pos = is.read(buf, pos, buf.length - pos)) > 0) { 
                <font color="#FF0000"><b>// just loop </b></font>
            } 
            is.close(); 

            ps.delete(muffinURLs[0]); 

            <font color="#FF0000"><b>// re-create the muffin and repopulate its data </b></font>
            ps.create(muffinURLs[0], maxsize); 
            fc = ps.get(muffinURLs[0]); 
            <font color="#FF0000"><b>// don't append </b></font>
            OutputStream os = fc.getOutputStream(false); 
            os.write(buf); 
            os.close(); 

        } <b>catch</b> (Exception e) { 
            e.printStackTrace(); 
        } 
    } 

   <b>void</b> doUpdateServer(URL url) { 
        <font color="#FF0000"><b>// update the server's copy of the persistent data 
        // represented by the given URL </b></font>
        ... 
        ps.setTag(url, PersistenceService.CACHED); 
   } 
</tt>
</pre>

<h3>
<a NAME="filecontents"></a>Using FileContents</h3>
<tt>FileContents</tt> objects encapsulate the name and contents of a file.&nbsp;
An object of this class is used by the <tt>FileOpenService,</tt> <tt>FileSaveService
</tt>and<tt>
PersistenceService</tt>. Here is an example of how an instance of a <tt>FileContents</tt>
can be used to read from and write to a file:
<pre>
<tt>
<b>import</b> javax.jnlp.*; 
    ... 

    FileOpenService fos; 

    <font color="#FF0000"><b>//Initialize fos (see Using a FileOpenService Service example) </b></font>
    ... 

    <b>if</b> (fos != null) { 

        <b>try</b> { 

            <font color="#FF0000"><b>// get a FileContents object to work with from the 
            // FileOpenService </b></font>
            FileContents fc = fos.openFileDialog(null, null); 

            <font color="#FF0000"><b>// get the InputStream from the file and read a few bytes </b></font>
            byte [] buf = new byte[fc.getLength()]; 
            InputStream is = fc.getInputStream(); 
            int pos = 0; 
            <b>while</b> ((pos = is.read(buf, pos, buf.length - pos)) > 0) { 
                <font color="#FF0000"><b>// just loop </b></font>
            } 
            is.close(); 

            <font color="#FF0000"><b>// get the OutputStream and write the file back out </b></font>
            <b>if</b> (fc.canWrite()) { 
               <font color="#FF0000"><b>// don't append </b></font>
               OutputStream os = fc.getOutputStream(false); 
               os.write(buf); 
            } 

        } <b>catch</b> (Exception e) { 
            e.printStackTrace(); 
        } 
    } 
</tt>
</pre>
<h3>
Using a JNLPRandomAccessFile</h3>
Instances of <tt>JNLPRandomAccessFile</tt> support both reading and writing
to a random access file.&nbsp; A random access file behaves like a large
array of bytes stored in the file system.&nbsp; Here is an example of how
an instance of a JNLPRandomAccessFile can be used to write to a random
access file:

<pre>
<tt>
<b>import</b> javax.jnlp.*; 
    ... 

    FileOpenService fos; 

    <font color="#FF0000"><b>//Initialize fos (see Using a FileOpenService Service example) </b></font>
    ... 

    <b>if</b> (fos != null) { 
        <b>try</b> { 
           <font color="#FF0000"><b>// ask the user to choose a file to open </b></font>
           FileContents fc = fos.openFileDialog(null, null); 

           <font color="#FF0000"><b>// attempt to increase the maximum file length </b></font>
           long grantedLength = fc.getLength(); 
           <b>if</b> (grantedLength + 1024 > fc.getMaxLength()) { 
               <font color="#FF0000"><b>// attempt to increase the maximum file size defined by 
               // the client </b></font>
               grantedLength = fc.setMaxLength(grantedLength + 1024); 
           } 

           <font color="#FF0000"><b>// if we were able to increase the maximum allowable file size, 
           // get a JNLPRandomAccessFile representation of the file, and 
           // write to it </b></font>
           <b>if</b> (fc.getMaxSize() > fc.getLength() && fc.canWrite()) { 
               JNLPRandomAccessFile raf = fc.getRandomAccessFile("rw"); 
               raf.seek(raf.length() - 1); 
               raf.writeUTF("Java Web Start!"); 
               raf.close(); 
           } 
        } <b>catch</b> (Exception e) { 
            e.printStackTrace(); 
        } 
    } 
</tt>
</pre>
</blockquote>

<!--Copyright Info-->

<HR>
<table width="100%">
<tr valign=top>
<td><small>Please send comments and feedback to 
<a href="mailto:javawebstart-feedback@sun.com">javawebstart-feedback@sun.com</a>.</small></td>
<td align="right">
<small>
Copyright &copy; 2002, <a href="http://www.sun.com">Sun Microsystems, Inc.</a>
<br>
All rights reserved.</small></td>
</table>

<pre>












































</pre>
</body>
</html>
