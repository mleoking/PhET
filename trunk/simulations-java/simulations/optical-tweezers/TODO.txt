===============================================================================
"To Do" list for "Optical Tweezers" simulation
===============================================================================

IN PROGRESS:
- uncomment jfreechart 1.0.5 method calls in PositionHistogramPlot

HIGH PRIORITY:

MEDIUM PRIORITY:
- migrate PhetHistogramDataset to jfreechart-phet
- look at jfree.HistogramDataset 1.0.5 for fixes that apply to PhetHistogramDataset
- implement potential energy model
- better algorithm for trap force y component Fy
- improve collision detection in Bead.move
- add checkbox to Fluid Controls to turn off viscosity, off means turn miscroscope slide black to indicate vacuum (?)
- connect potential energy chart to model
- vertical laser toggle button: http://www.bigstockphoto.com/thumbs/6/3/3/medium/336571.jpg
- clock speed: fast=[realtime* 10^-2, realtime], slow=[realtime*140*10^-16, realtime*7*10^-16], dead in between
- get spec for "Simulation speed" control
- get spec for "Show change in momentum model" feature
- get spec for "Show charge on bead" feature
- adjust clock time display and units as dt is changed

LOW PRIORITY:
- improve positioning of value in Vector2DNode
- try to make entire laser control panel draggable
- use TrigCache to improve performance?
- replace OTRuler alignment hack with permanent solution
- add close button to ruler?
- get requirements for "Fun With DNA" and "Molecular Motors" panels
- save/load
- javadoc
- package level javadoc
- make laser danger sign look better
- combine Play & Pause clock buttons ?
- Spanish translations

CLEANUP:
- setPickable(false) on non-interactive nodes
- rescale image files to minimize file size
- disable all debug output

DEFER UNTIL AFTER INTERVIEWS:

MODEL INFO NEEDED:
- E-field
- charge on the bead
- stuff related to “Show change in momentum model” (shape of 2 rays of light, vectors, etc.)

 
DONE:
********* version 0.00.06 (?)
5/9/07 - integrate PhetHistogramDataset into PositionHistogramPlot
5/9/07 - write PhetHistogramDataset, mutable version of JFreeChart's HistogramDataset
5/8/07 - remove ChangeListener interface on charts, add PropertyListener that watches visibility
5/8/07 - remove dummy data from PositionHistogramPlot
5/8/07 - change implementation of PositionHistogramPlot to use HistogramDataset
5/8/07 - delete PositionHistogramChart and PotentialEnergyChart, collapse into associated nodes
5/2/07 - migrate CloseButton to phetcommon, CloseButtonNode to piccolo-phet, remove duplicate image file
5/2/07 - generalize new velocity computation in Bead.move to work with any fluid velocity direction
5/2/07 - generalize Fluid.getDragForce to work with any fluid velocity direction
5/2/07 - add Fluid.getVelocity and setVelocity
********* version 0.00.05 (14935)
5/1/07 - increase nubmer of subdivisions range to 1-1000 for bead motion algorithm
4/30/07 - change viscosity range to 1E-4 to 1E-2
4/30/07 - set reasonal defaults and ranges for bead motion dt subdivision parameters
4/30/07 - fix precision roundoff errors at min/max for LinearValueControl and LogarithmicValueControl
4/30/07 - subdivide clock timestep in bead motion algorithm
4/30/07 - convert bead motion model to use nm distance units
4/30/07 - add developer controls for bead motion: N (number of dt subdividions) and dt threshold, not connected to model
4/30/07 - add developer control for bead's Brownian motion scale factor
4/30/07 - set up framework for opening developer-only dialog from control panel
4/30/07 - implement display of fluid drag force
4/30/07 - generalize node for displaying forces
4/30/07 - close FluidControlsDialog when switching modules
4/30/07 - reduce complexity of PhysicsModule
4/30/07 - move all node creation into PhysicsCanvas
4/30/07 - move all nodes into package view.nodes
********* version 0.00.04 (14904)
4/27/07 - change model for bead motion, Mike Dubson's 4/26/07 model
4/27/07 - add water viscosity constant and normalization method to Fluid
4/27/07 - adjust clock dt so that fastest speed is 1E-3 realtime
4/27/07 - add display of x & y components to TrapForceNode
4/27/07 - change model for Fz trap force
4/27/07 - set laser run state in resetAll
4/24/07 - move control.valuecontrol to phetcommon.view.controls.valuecontrol
4/24/07 - add AbstractValueControl.setMinorTickLabelsVisible
4/24/07 - use predefined cursors that indicate drag constraints (left/right vs up/down)
4/24/07 - add AbstractValueControl.setHorizontalAlignment
4/24/07 - left-align all fluid controls
4/24/07 - simplifications to min/max tick mark code in AbstractValueControl
4/24/07 - move testers to controls.valuecontrols
4/24/07 - rename AbstractSliderStrategy etal to AbstractMappingStrategy
4/24/07 - move ValueControl stuff to controls.valuecontrol
4/23/07 - remove PhysicsDefaults references from FluidControlPanel, should be independent of module
4/23/07 - set clock range to vary from realtime to 140E-16 * realtime
4/23/07 - replace ClockSpeedSlider with a LogarithmicValueControl
4/23/07 - display & control fluid speed in microns/sec, model is in nm/sec
4/23/07 - debug LogarithmicSliderStrategy.sliderToModel and modelToSlider when abs(modelMinValue) < 1
4/23/07 - use Double.parseValue to accept multiple formats for entry of viscosity value (1E-10, 1e-10, 0.0001) 
4/23/07 - use new controls in FluidControlPanel, logarithmic viscosity control
4/23/07 - replace SliderControl with LinearValueControl and LogarithmicValueControl
4/23/07 - slider and control hierarchy built on slider strategies
4/19/07 - implement strategies (linear and log) for mapping between slider and model coordinates
4/18/07 - simplify SliderControl constructor
4/18/07 - increase brownian motion scale factor
4/18/07 - set clock dt range to correspond to seconds units
4/18/07 - change clock units to seconds
4/18/07 - cleanup bead motion, disable trap and fluid forces, and put on hold until physicists revise the model
4/17/07 - disable trap force and Brownian motion components in bead motion model
4/17/07 - change bead motion algorithm to use new units
4/17/07 - javadoc model classes, indicate units
4/17/07 - document units and conversions in doc/units.txt
4/12/07 - implement fluid flow and trap force components for bead motion model, behaving badly
4/12/07 - fix TrapForceNode to hide vectors when laser is off
4/12/07 - make Laser.getIntensity and getTrapForce return 0 when laser is off
4/12/07 - simplify Laser.getIntensity and getTrapForce
4/12/07 - change fluid speed model units to nm/sec (was microns/sec), range becomes [0,1000000]
4/12/07 - merge test-src into src
********* version 0.00.03 (14322)
4/11/07 - add Brownian motion to bead, including collision detection with top & bottom edges of microscope slide
4/11/07 - change clock dt range to [0.01,1]
4/11/07 - encapsulate model creation for "Physics of Tweezers" panel in PhysicsModel
4/10/07 - explicitly call handlers in all control panel setters
4/10/07 - hook up TrapForceNode to control panel
4/10/07 - rewrite TrapForceNode to use Vector2DNode
4/10/07 - Vector2DNode for displaying a Vector2D as an arrow, with optional value
4/10/07 - add trap force units to localization file
4/10/07 - add units to trap force vector display
4/10/07 - change Fy calculation for trap force, old physics was wrong
4/9/07 - add TrapForceNode for visualizing trap forces on bead
4/9/07 - implement trap force model, correct problems with physics
4/9/07 - scale laser alpha using sqrt to compensate for human eye perception
4/9/07 - add gradient for portion of laser beam going into objective
4/9/07 - combine BeamInNode and BeamOutNode into LaserBeamNode to handle all laser beam drawing
4/7/07 - encapsulate all resource loading in OTResources
4/7/07 - use PhetCommonProjectConfig to get common images and strings
4/5/07 - set locale in Spanish JNLP file via javaws.locale property
4/5/07 - convert from SimStrings to PhetProjectConfig
4/5/07 - consolidate all strings in OTStrings
4/5/07 - consolidate all images in OTConstants
********* version 0.00.02 (14202)
4/4/07 - optimize gradient view of laser power intensity using a BufferedImageOp that adjusts alpha channel
4/4/07 - reduce size of gradient image by only drawing one quadrant, then scaling it to the view
4/4/07 - make BeamInNode and BeamOutNode handle their own visibility based on Laser state
4/4/07 - show left and right edges of BeamOutNode as a faint dashed line
4/4/07 - speed up creation of laser gradient view by 4x
4/3/07 - implemented gradient field view of Laser power intensity, very slow!
4/3/07 - add power intensity model to Laser
4/3/07 - draw outline of beam shape in BeamOutNode
4/3/07 - make BeamInNode and BeamOutNode observers of Laser
4/3/07 - test program to display laser power gradient
4/3/07 - model laser power gradient
4/2/07 - fix beam shape model, calc of scaling factor was wrong
3/26/07 - restore OTObservable, functionality was important
3/26/07 - remove OTObservable, additional functionality not used
3/26/07 - document model coordinate system in package javadoc
3/26/07 - add Laser.contains, determines if a point is inside the laser beam
3/26/07 - temporary hack in OTRuler for ruler alignment problem
3/26/07 - converting bead to image crops right & bottom pixels, remove stroke
3/26/07 - add debug crosshair at laser's origin
3/26/07 - make laser's local origin be at the center of its waist
3/26/07 - remove canvas argument from all nodes in the scenegraph
3/26/07 - add beam shape model to Laser
3/26/07 - add size and layout dependencies to PhysicsDefaults
3/26/07 - add zr scaling factor to model of laser beam shape
3/23/07 - implement laser profile model, create test program to show scale problems
3/23/07 - change default fluid speed to 0
3/23/07 - convert to new PSwing interface that doesn't require canvas in constructor
3/22/07 - make fluid dialog appear at left-center of the main frame
3/22/07 - move fluid control to a separate dialog
3/22/07 - add a faint cross-hair at center of bead
3/22/07 - add close button to upper-right corner of charts
3/22/07 - optical trap force control should be enabled in fast speed
3/22/07 - make fluid vectors disappear when speed=0
3/22/07 - change min fluid velocity to 0
3/22/07 - use double precision for laser wavelength
3/22/07 - use laser wavelength of 1064 nm (IR) in model, but use 632 (visible red) in view
3/22/07 - set fluid temperature range to 50-350 Kelvin
3/22/07 - add density to the bead model, calculate mass based on diameter and density
3/22/07 - increase font size for controls on the play area (14->16)
3/22/07 - show whichever chart was selected last, close the other one
3/22/07 - add 9 minor-ticks between each major tick on ruler
********* version 0.00.01 (13958)
3/21/07 - if laser is outside the canvas bounds, move it to the center
3/21/07 - flash the "Return Bead" button when it's visible
3/21/07 - center "Return Bead" button on the canvas
3/21/07 - properly set visibility of "Return Bead" button
3/21/07 - hook up "Return Bead" button so that it returns the bead to the button's position
3/21/07 - hook up BeadNode so that dragging updates the model
3/21/07 - use red foreground color for all unimplemented controls
3/21/07 - add controls and stuff above position histogram
3/21/07 - restructure scenegraph for charts
3/21/07 - make visibility of potential chart take prescendence over position histogram
3/21/07 - add position histogram, wire to control panel, no buttons, no data or connection to model
3/21/07 - add potential energy chart, wire to control panel, no data or connection to model
3/20/07 - add power range to laser model
3/20/07 - javadoc what I've done so far
3/20/07 - remove ModelViewManager framework, not necessary, too complicated
3/20/07 - set ruler off by default
3/20/07 - set viscosity range to [1E-12,1E-2] Pa*s, default=1E-3
3/20/07 - use scientific notation to format numbers in viscosity control
3/20/07 - add feature to set number formats for SliderControl
3/20/07 - add units label for fluid viscosity
3/20/07 - add velocity vectors to FluidNode
3/20/07 - change model property Fluid.width to Fluid.height
3/20/07 - rename GlassSlideNode to FluidNode
3/20/07 - move DoubleRange, IntegerRange to phetcommon
3/19/07 - debug phet.piccolo.BoundedDragHandler with Sam Reid
3/19/07 - test application to isolate drag problem with ruler and laser apparatus
3/19/07 - clean up specialized ruler
3/19/07 - add units to ruler
3/19/07 - piccolo-phet: add feature to set units on RulerNode for a specific major lick label
3/19/07 - set fluid speed range to [1,1000] microns/sec
3/19/07 - add units labels for fluid speed and temperature
3/14/07 - rename SimStrings files to have basename opticaltweezers_strings
3/14/07 - move images to data/opticaltweezers/images to avoid namespace collisions
3/14/07 - get version and credits from properties file
3/13/07 - clean up stub modules
3/13/07 - move VIEW_SIZE and MODEL_TO_VIEW_SCALE into defaults classes
3/13/07 - revert to ModelViewTransform terminology
3/13/07 - update ruler drag bounds when laser moves
3/13/07 - add setWorldSize to GlassSliderNode and OTRulerNode
3/13/07 - add debug code to show drag bounds for draggable things
3/13/07 - fix major bug in ModelWorldTransform
3/13/07 - rename ModelViewTransform -> ModelWorldTransform
3/13/07 - wire up ruler to checkbox
3/13/07 - change ModelViewTransform to use a separate xform for view->model
3/13/07 - wire up ClockSpeedSlider to clock
3/13/07 - encapsulate clock speed model-view mappings in ClockSpeedSlider
3/13/07 - change clock stuff in *Defaults classes
3/13/07 - delete SpeedControl class (complicated clock control)
3/13/07 - change clock speed control to 1 slider
3/13/07 - change laser "width" to "diameter"
3/12/07 - move RoundGradientPaint to phetcommon
3/12/07 - move getWorldSize funtionality to PhetPCanvas
3/12/07 - laser power should be double precision
3/12/07 - no error dialog for power textfield input; if value is bad, beep and clamp to min/max
3/12/07 - fix vertical lines in laser control, attach to ends of objective, not the control panel
3/12/07 - move getWorldSize into AbstractModule
3/12/07 - remove CVS keywords from headers, javadoc, and persistence
3/12/07 - add validation in Fluid model setters
3/12/07 - bug fix in MovingObject.setSpeed
3/12/07 - make FluidControlPanel observer of Fluid
3/12/07 - move property ranges into Fluid model
3/12/07 - use font in FluidControlPanel
3/12/07 - add SliderControl.setFont
3/12/07 - enable textfield editing for fluid controls
3/12/07 - get lastest SliderControl from rutherford-scattering
3/12/07 - vertically align left edges of fluid controls
2/23/07 - add ruler, lots of problems, no vertical drag
2/23/07 - add draggable handles to sides of laser control panel
2/23/07 - create HandleNode in piccolo-phet
2/23/07 - add vertical lines to connect objective to laser control panel
2/22/07 - work on piccolo-phet RulerNode
2/21/07 - remove drag handler from laser control panel, multiple PSwing-related problems
2/21/07 - change to BoundedDragHandler for bead and laser dragging
2/21/07 - create PhetPSwing so that wrapped JComponents aren't active when invisible
2/21/07 - contrain bead dragging with ConstrainedDragHandler for now
2/21/07 - make bead diameter mutable
2/21/07 - setPickable(false) on non-interactive nodes
2/21/07 - hook up laser power control to alpha channel of laser beam view
2/20/07 - add laser beam coming out of objective, no waist
2/20/07 - laser power text field entry and validation with error dialog
2/20/07 - make laser power slider range be 0-1000 mW
2/20/07 - make LaserControlPanel observer of Laser
2/20/07 - layout LaserControlPanel using Piccolo instead of JPanel
2/20/07 - set layout of laser objective, incoming beam, control panel
2/20/07 - fix initial positioning of Laser and Bead views
2/20/07 - make view nodes observers of their model elements
2/20/07 - remove glass slide from model, fluid model is sufficient
2/20/07 - change "flow velocity" to "flow speed" through, there is no direction control
2/14/07 - dynamically resize width of glass slide view to match play area width
2/14/07 - continue work on Laser view objective, incoming beam, etc)
2/14/07 - use model to size/position view nodes
2/14/07 - create model-view transform for mapping between coordinate systems
2/14/07 - flesh out bits of model related to controls, positioning, sizing, etc.
2/6/07 - add warning sign to laser control panel
2/6/07 - toggle laser start/stop button
2/6/07 - settable font for LaserControlPanel
2/6/07 - define separate fonts in OTConstants for controls in control panel and play area
2/6/07 - first pass at Laser control panel
2/6/07 - fluid control panel
2/6/07 - add ad hoc view of bead (no connection to model, no drag constraints)
2/6/07 - add ad hoc view of glass slide (no connection to model)
2/5/07 - implement "reset all" for first module
2/5/07 - wire up first control panel to show/hide controls properly
2/5/07 - create a separate "default values" class for each module
2/5/07 - add all Swing components to first control panel, no wiring
2/5/07 - add entries in CVS modules and loginfo
2/5/07 - sim requires charts, add dependencies on jfreechart and jfreechart-phet
2/5/07 - remove speed slider from clock control panel
1/29/07 - set up ProGuard
1/29/07 - set up dev directory
1/29/07 - create JNLP files
1/29/07 - set up basic application framework (modules, control panels, clock controls, persistence, etc)
1/29/07 - set up project in CVS

REJECTED:
4/24/07 - add AbstractValueControl.setInverted (makes things unnecessarily complex)
3/26/07 - change diameter to radius for bead and laser properties (using diameter makes layout clearer)
3/12/07 - generalize LaserPowerControl (probably not generally useful)

===============================================================================
end of file