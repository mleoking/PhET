Capacitor Lab model

// constants
sigma_0 = vacuum permittivity, F/m = 8.854E-12
sigma_a = dielectric constant of air, dimensionless = 1.00058986

// settings
V = battery voltage, volts (-10 to +10)
d = plate separation, meters (.005 to .010)
L = plate side length, meters (.010 to .020)
offset = how far dielectric is pulled out, meters (0 to .020)
sigma_r = dielectric constant, dimensionless (1 to 10)

// derived
A = plate area, meters^2 = L * L
A_dielectric = area dielectric between plates, meters^2 = ( L - offset ) * L
C = capacitance, Farads = ( ( A_dielectric * sigma_r / A ) + ( ( A - A_dielectric ) * sigma_a / A ) ) * ( sigma_0 * A / d )
Q = plate charge, Coulombs = C * V
sigma = Q / A
E_effective = effective field, V/m = sigma / ( epsilon_r * epsilon_0)
E_plates = field due to plates, V/m = sigma / epsilon_0
E_dielectric =field due to dielectric, V/m = E_plates - E_effective
U = stored energy, Joules = 0.5 * C * V * V