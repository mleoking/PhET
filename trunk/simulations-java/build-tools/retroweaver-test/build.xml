<?xml version="1.0"?>

<project name="Test Retroweaver" default="weave" basedir=".">
    <property name="src" value="src"/>
    <property name="classes" value="ant_output/classes"/>
    <property name="classes_rw" value="ant_output/classes_rw"/>
    <property name="retroweaver.home" value="../retroweaver-2.0"/>

    <taskdef name="retroweaver" classname="net.sourceforge.retroweaver.ant.RetroWeaverTask">
        <classpath>
            <fileset dir="${retroweaver.home}/lib" includes="**/*"/>
            <pathelement location="${retroweaver.home}/release/retroweaver-2.0.jar"/>
        </classpath>
    </taskdef>

    <target name="compile">
        <mkdir dir="${classes}"/>
        <javac srcdir="${src}"
               destdir="${classes}"
               source="1.5"/>
    </target>

    <!--Convert a set of classes in a single directory to JDK 1.4 compatible format.-->
    <target name="weave" depends="compile">
        <mkdir dir="${classes_rw}"/>
        <retroweaver srcdir="${classes}"
                     destdir="${classes_rw}"
                     classpath="C:\j2sdk1.4.2_13\jre\lib\rt.jar"
                     failonerror="true"/>
    </target>

</project>