<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>20. Rollback</title><link rel="stylesheet" type="text/css" href="docbook-xsl.css" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="BitRock InstallBuilder User Guide 15" /><link rel="up" href="index.html" title="BitRock InstallBuilder User Guide 15" /><link rel="prev" href="ar01s19.html" title="19. Regular expressions" /><link rel="next" href="ar01s21.html" title="21. Troubleshooting" /></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">20. Rollback</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ar01s19.html"><img src="images/icons/prev.png" alt="Prev" /></a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="ar01s21.html"><img src="images/icons/next.png" alt="Next" /></a></td></tr></table><hr /></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="_rollback"></a>20. Rollback</h2></div></div></div><p>InstallBuilder installers include a rollback feature that automatically backs up any files overwritten during the installation and restores them if an error occurs during the installation process.
The rollback functionality only handles files overwritten by the installer during the file installation step (i.e., all files specified under any <a class="link" href="ape.html#folder"><code class="literal">&lt;folder&gt;</code></a> section), and it does not
support rolling back files overwritten as a result of the execution of actions or scripts.</p><p>The rollback feature is enabled by default but it can be disabled by setting the project property <a class="link" href="apd.html#enableRollback"><code class="literal">&lt;enableRollback&gt;</code></a> to false:</p><p><a id="snip1196650"></a></p><pre class="programlisting">&lt;project&gt;
   ...
   &lt;enableRollback&gt;0&lt;/enableRollback&gt;
   ...
&lt;/project&gt;</pre><p>You can configure the directory where the overwritten files will be stored by setting the project property <a class="link" href="apd.html#rollbackBackupDirectory"><code class="literal">&lt;rollbackBackupDirectory&gt;</code></a> (which defaults to an autoincremental <code class="literal">${installdir}/rollbackBackupDirectory</code>) to the desired path:</p><p><a id="snip2098692"></a></p><pre class="programlisting">&lt;project&gt;
   ...
   &lt;rollbackBackupDirectory&gt;${system_temp_directory}/backup&lt;/rollbackBackupDirectory&gt;
   ...
&lt;/project&gt;</pre><p>The files will be automatically restored in the event that the installation aborts. The rollbackBackupDirectory folder will not be removed after a successful installation, so it can also be manually accessed and restored. It will, however, be automatically cleaned up after a successful restoration following a failed installation attempt (only those files that could not be restored will remain in the rollback backup directory). If no files were backed up as a result of the rollback process, the empty rollbackBackupDirectory folder will be automatically deleted after installation.</p><p>If you specifically do not want the rollbackBackupDirectory folder to remain on the disk after a successful installation, you can delete it during the &lt;postInstallationActionList&gt; using a &lt;deleteFile&gt; action:</p><p><a id="snip2733191"></a></p><pre class="programlisting">&lt;project&gt;
   ...
   &lt;rollbackBackupDirectory&gt;${system_temp_directory}/backup&lt;/rollbackBackupDirectory&gt;
   ...
   &lt;postInstallationActionList&gt;
      &lt;deleteFile path="${project.rollbackBackupDirectory}"/&gt;
   &lt;/postInstallationActionList&gt;
   ...
&lt;/project&gt;</pre></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ar01s19.html"><img src="images/icons/prev.png" alt="Prev" /></a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="ar01s21.html"><img src="images/icons/next.png" alt="Next" /></a></td></tr><tr><td width="40%" align="left" valign="top">19. Regular expressions </td><td width="20%" align="center"><a accesskey="h" href="index.html"><img src="images/icons/home.png" alt="Home" /></a></td><td width="40%" align="right" valign="top"> 21. Troubleshooting</td></tr></table></div></body></html>