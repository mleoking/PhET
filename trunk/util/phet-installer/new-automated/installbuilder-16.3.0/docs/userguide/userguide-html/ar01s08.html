<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>8. Actions</title><link rel="stylesheet" type="text/css" href="docbook-xsl.css" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="BitRock InstallBuilder User Guide 15" /><link rel="up" href="index.html" title="BitRock InstallBuilder User Guide 15" /><link rel="prev" href="ar01s07.html" title="7. User Input" /><link rel="next" href="ar01s09.html" title="9. Rules" /></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">8. Actions</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ar01s07.html"><img src="images/icons/prev.png" alt="Prev" /></a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="ar01s09.html"><img src="images/icons/next.png" alt="Next" /></a></td></tr></table><hr /></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="_actions"></a>8. Actions</h2></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_what_are_actions"></a>8.1. What are Actions?</h3></div></div></div><p>There are a number of installation tasks that are common to many installers, such as changing file permissions, substituting a value in a file, and so on. BitRock InstallBuilder includes a large number of useful built-in actions for these purposes.</p><p>You can add new actions by manually editing the XML project file directly or in the <span class="emphasis"><em>Advanced</em></span> section of the GUI building tool. Actions are either attached to a particular folder tag in the project file (<a class="link" href="ape.html#actionList"><code class="literal">&lt;actionList&gt;</code></a>) that will be executed after the contents of the folder have been installed, or can be part of specific action lists that are executed at specific points during installation.</p><p>Actions usually take one or more arguments. If one of those arguments is a file matching expression (<code class="literal">&lt;files&gt;</code>) and the action was included in a <a class="link" href="ape.html#folder"><code class="literal">&lt;folder&gt;</code></a> action list, the matching will also occur against the contents of the folder:</p><p><a id="snip6744331"></a></p><pre class="programlisting">&lt;folder&gt;
  &lt;name&gt;binaries&lt;/name&gt;
  ...
  &lt;destination&gt;${installdir}&lt;/destination&gt;
   &lt;distributionFileList&gt;
       &lt;distributionDirectory&gt;
          &lt;origin&gt;/some/path/to/bin&lt;/origin&gt;
       &lt;/distributionDirectory&gt;
   &lt;/distributionFileList&gt;
  &lt;actionList&gt;
     &lt;changePermissions permissions="0755" files="*"/&gt;
  &lt;/actionList&gt;
&lt;/folder&gt;</pre><p>In the example above, although the <a class="link" href="apa.html#changePermissions"><code class="literal">&lt;changePermissions&gt;</code></a> action is not recursive, as it was executed inside a <a class="link" href="ape.html#folder"><code class="literal">&lt;folder&gt;</code></a> action list, the pattern will be recursively matched against all of the files contained in the <code class="literal">bin</code> directory. Alternatively, you could use the <a class="link" href="apd.html#postInstallationActionList"><code class="literal">&lt;postInstallationActionList&gt;</code></a> to change the permissions, but at that point the <a class="link" href="apa.html#changePermissions"><code class="literal">&lt;changePermissions&gt;</code></a> action won’t execute recursively and you will need to provide a more complex pattern:</p><p><a id="snip1972428"></a></p><pre class="programlisting">&lt;folder&gt;
  &lt;name&gt;binaries&lt;/name&gt;
  ...
  &lt;destination&gt;${installdir}&lt;/destination&gt;
   &lt;distributionFileList&gt;
       &lt;distributionDirectory&gt;
          &lt;origin&gt;/some/path/to/bin&lt;/origin&gt;
       &lt;/distributionDirectory&gt;
   &lt;/distributionFileList&gt;
&lt;/folder&gt;
...
&lt;postInstallationActionList&gt;
   &lt;!-- Multi-level pattern so child files from sublevel 0 to 4 are considered --&gt;
   &lt;changePermissions permissions="0755" files="${installdir}/bin/{*,*/*,*/*/*,*/*/*/*}"/&gt;
&lt;/postInstallationActionList&gt;</pre><p>In addition, if the arguments contain references to installer variables, such as the installation directory, they will be properly expanded before the action is executed.</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_showing_the_progress_text_in_builder_gui"></a>Showing the Progress Text in Builder GUI</h4></div></div></div><p>Complex InstallBuilder projects often consist of multiple <a class="link" href="apa.html#actionGroup"><code class="literal">&lt;actionGroup&gt;</code></a> items that contain actions, which may be difficult to manage.</p><p>The GUI building tool allows showing the <a class="link" href="apa.html#actionGroup"><code class="literal">&lt;actionGroup&gt;</code></a>'s <a class="link" href="apa.html#action.progressText"><code class="literal">&lt;progressText&gt;</code></a> in the GUI instead of the action type.</p><p>To do this, simply open the Preferences dialog and enable the <code class="literal">Show Progress Text in GUI</code> option, such as:</p><div class="figure"><a id="idm140427932908336"></a><p class="title"><strong>Figure 46. InstallBuilder Preferences Window</strong></p><div class="figure-contents"><div class="mediaobject" align="center"><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="30%"><tr><td align="center"><img src="images/builder-preferences.png" align="middle" width="100%" alt="InstallBuilder Preferences Window" /></td></tr></table></div></div></div><br class="figure-break" /><p>After enabling it, all <a class="link" href="apa.html#actionGroup"><code class="literal">&lt;actionGroup&gt;</code></a> elements that have their <a class="link" href="apa.html#action.progressText"><code class="literal">&lt;progressText&gt;</code></a> set will show it in the action list tree:</p><div class="figure"><a id="idm140427932901792"></a><p class="title"><strong>Figure 47. Action Lists Showing Progress Text</strong></p><div class="figure-contents"><div class="mediaobject" align="center"><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="30%"><tr><td align="center"><img src="images/builder-progress-text-example.png" align="middle" width="100%" alt="Action Lists Showing Progress Text" /></td></tr></table></div></div></div><br class="figure-break" /></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="actionlist"></a>8.2. Action Lists</h3></div></div></div><p>InstallBuilder actions are organized in what are called action lists, which are executed at specific points of the installation process. It is important to understand how and when each action must be performed, what differences exist between action lists inside components and within the primary installer, how the installer will behave when you run it in different installation modes (GUI, text, or unattended) and what happens when you generate rpm or deb packages.</p><p>You can place your action lists in the main installer project or in one of its components. Figure 43 shows all the available action lists in the GUI:</p><div class="figure"><a id="idm140427932895488"></a><p class="title"><strong>Figure 48. BitRock InstallBuilder Action Lists (in order of execution)</strong></p><div class="figure-contents"><div class="mediaobject" align="center"><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="30%"><tr><td align="center"><img src="images/installbuilder-action-lists.png" align="middle" width="100%" alt="BitRock InstallBuilder Action Lists (in order of execution)" /></td></tr></table></div></div></div><br class="figure-break" /><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_building_the_installer"></a>Building the Installer</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<span class="strong"><strong>Pre-build Actions - &lt;preBuildActionList&gt;</strong></span>: Executes before generating the installer file. These actions usually include setting environment variables or performing some type of processing on the files that will go into the installer before they are packed into it. For multi-platform CDROM installers, the preBuildActionList is executed once at the beginning of the CDROM build, and then again for every one of the specific platform installers.
</li><li class="listitem">
<span class="strong"><strong>Post-build Actions - &lt;postBuildActionList&gt;</strong></span>: Executes after generating the installer file. These actions are usually useful to reverse any changes made to the files during the preBuildActionList or to perform additional actions on the generated installer, such as signing it by invoking an external tool. For multi-platform CDROM installers, the postBuildActionList is executed once for every one of the specific platform installers and one final time for the whole CDROM build.
</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_help_menu"></a>Help Menu</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<span class="strong"><strong>Pre Show Help Actions - &lt;preShowHelpActionList&gt;</strong></span>: Executes before help information is displayed. The help is displayed when the <code class="literal">--help</code> command line option is passed to an installer. It can be useful for example for modifying the description of parameters based on the system the installer is running on.
</li></ul></div><p><strong>Help menu. </strong>
</p><pre class="screen">Sample Project 1.0
Usage:

 --help                                      Display the list of valid options

 --version                                   Display product information

 --unattendedmodeui &lt;unattendedmodeui&gt;       Unattended Mode UI
                                             Default: none
                                             Allowed: none minimal minimalWithDialogs

 --optionfile &lt;optionfile&gt;                   Installation option file
                                             Default:

 --debuglevel &lt;debuglevel&gt;                   Debug information level of verbosity
                                             Default: 2
                                             Allowed: 0 1 2 3 4

 --mode &lt;mode&gt;                               Installation mode
                                             Default: gtk
                                             Allowed: gtk xwindow text unattended

 --debugtrace &lt;debugtrace&gt;                   Debug filename
                                             Default:

 --enable-components &lt;enable-components&gt;     Comma-separated list of components
                                             Default: default
                                             Allowed: default

 --disable-components &lt;disable-components&gt;   Comma-separated list of components
                                             Default:
                                             Allowed: default

 --installer-language &lt;installer-language&gt;   Language selection
                                             Default: en
                                             Allowed: sq ar es_AR az eu pt_BR bg ca hr cs da nl en et fi fr de el he hu id it ja kk ko lv lt no fa pl pt ro ru sr zh_CN sk sl es sv th zh_TW tr tk va vi cy

 --prefix &lt;prefix&gt;                           Installation Directory
                                             Default: /home/bitrock/sample-1.0</pre><p>
</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_installation_process"></a>Installation Process</h4></div></div></div><div class="itemizedlist"><a id="splash"></a><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<span class="strong"><strong>Splash Screen</strong></span>: After the installer internal initialization, the <a class="link" href="">Splash Screen</a> is displayed. The duration of this event is configured through the <a class="link" href="apd.html#splashScreenDelay"><code class="literal">&lt;splashScreenDelay&gt;</code></a> property or can be skipped if it was disabled setting <code class="literal">&lt;disableSplashScreen&gt;1&lt;/disableSplashScreen&gt;</code>
</li></ul></div><div class="figure"><a id="idm140427932871056"></a><p class="title"><strong>Figure 49. Splash Screen</strong></p><div class="figure-contents"><div class="mediaobject" align="center"><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="40%"><tr><td align="center"><img src="images/splash-screen.png" align="middle" width="100%" alt="Splash Screen" /></td></tr></table></div></div></div><br class="figure-break" /><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<span class="strong"><strong>Initialization Actions - &lt;initializationActionList&gt;</strong></span>: Executes when the installer has started, just before the parsing of the command line options.
</li><li class="listitem">
<span class="strong"><strong>Language Selection</strong></span>: If <a class="link" href="apd.html#allowLanguageSelection"><code class="literal">&lt;allowLanguageSelection&gt;</code></a> is set to <code class="literal">1</code> and no language was provided through the command line, the language selection dialog will be displayed, allowing your users to select one of the allowed languages defined in the <a class="link" href="apd.html#allowedLanguages"><code class="literal">&lt;allowedLanguages&gt;</code></a> tag.
</li></ul></div><div class="figure"><a id="idm140427932860288"></a><p class="title"><strong>Figure 50. Language Selection dialog</strong></p><div class="figure-contents"><div class="mediaobject" align="center"><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="35%"><tr><td align="center"><img src="images/language-selection-dialog.png" align="middle" width="100%" alt="Language Selection dialog" /></td></tr></table></div></div></div><br class="figure-break" /><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<span class="strong"><strong>Pre-installation Actions</strong></span> - <span class="strong"><strong>&lt;preInstallationActionList&gt;</strong></span>: Executes before the first page of the installer is displayed, right after the parsing of the command line options takes place. It is commonly used for detecting a Java (tm) Runtime Environment or for setting user-defined installer variables that will be used later on:
</li></ul></div><p><strong>Redefine <code class="literal">${installdir}</code> based on the platform. </strong><a id="snip601897"></a></p><pre class="programlisting">&lt;preInstallationActionList&gt;
   &lt;setInstallerVariable&gt;
     &lt;name&gt;installdir&lt;/name&gt;
     &lt;value&gt;${env(SYSTEMDRIVE)}/${project.shortName}&lt;/value&gt;
     &lt;ruleList&gt;
        &lt;platformTest type="windows"/&gt;
     &lt;/ruleList&gt;
   &lt;/setInstallerVariable&gt;
   &lt;setInstallerVariable&gt;
     &lt;name&gt;installdir&lt;/name&gt;
     &lt;value&gt;/usr/local/${project.shortName}&lt;/value&gt;
     &lt;ruleList&gt;
        &lt;platformTest type="linux"/&gt;
     &lt;/ruleList&gt;
   &lt;/setInstallerVariable&gt;
&lt;/preInstallationActionList&gt;</pre><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<span class="strong"><strong>Component Selection</strong></span>
</li></ul></div><div class="figure"><a id="idm140427932847584"></a><p class="title"><strong>Figure 51. Component Selection Page</strong></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/component-selection.png" align="middle" alt="Component Selection Page" /></div></div></div><br class="figure-break" /><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<span class="strong"><strong>Component Selection Validation Actions</strong></span> - <span class="strong"><strong>&lt;componentSelectionValidationActionList&gt;</strong></span>: Executes after the component page is displayed to check that the selected components are a valid combination.
</li><li class="listitem">
<span class="strong"><strong>Parameter Pages</strong></span>
</li></ul></div><p>Each parameter has three 3 different action lists: validationActionList, preShowPageActionList and postShowPageActionList. Note that those actions are not executed if the installer is executed in unattended mode.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<span class="strong"><strong>Validation Actions - &lt;validationActionList&gt;</strong></span>: Executes once the user has specified a value in the user interface page associated with the parameter and has pressed the Next button (or Enter in a text-based interface). The actions can be used to check that the value is valid (for example, that it specifies a path to a valid Perl interpreter). If any of the actions result in an error, an error message will be displayed to the user and the user will be prompted to enter a valid value.
</li><li class="listitem">
<span class="strong"><strong>Pre Show Page Actions - &lt;preShowPageActionList&gt;</strong></span>: Executes before the corresponding parameter page is displayed. This can be useful for changing the value of the parameter before it is displayed.
</li><li class="listitem">
<span class="strong"><strong>Post Show Page Actions - &lt;postShowPageActionList&gt;</strong></span>: Executes after the corresponding parameter page has been displayed. This can be useful for performing actions or setting environment variables based on the value of the parameter.
</li><li class="listitem">
<span class="strong"><strong>Ready to Install Actions - &lt;readyToInstallActionList&gt;</strong></span>: Executes right before the file copying step starts. It is commonly used to execute actions that depend on user input.
</li><li class="listitem">
<span class="strong"><strong>Unpacking process</strong></span>
</li><li class="listitem">
<span class="strong"><strong>Folder Actions - &lt;actionList&gt;</strong></span>: Executes just after files defined in the particular folder are installed, the next folder files are copied and its actionList executed, etc.
</li><li class="listitem">
<span class="strong"><strong>Shortcuts Creation</strong></span>
</li><li class="listitem">
<span class="strong"><strong>Post-installation Actions - &lt;postInstallationActionList&gt;</strong></span>: Executes after the installation process has taken place but before the uninstaller is created and the final page is displayed.
</li><li class="listitem">
<span class="strong"><strong>Post-Uninstaller Creation Actions - &lt;postUninstallerCreationActionList&gt;</strong></span>: Executes after the uninstaller has been created but before the final page has been displayed.
</li><li class="listitem">
<span class="strong"><strong>Final Page Actions - &lt;finalPageActionList&gt;</strong></span>: Executes after the installation has completed and the final page has been displayed to the user. These actions usually include launching the program that has just been installed. For each one of the actions contained in this list, a checkbox will be displayed (or a question in text mode). If the checkbox is selected, then the action will be executed when the <span class="emphasis"><em>Finish</em></span> button is pressed.
</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_uninstallation"></a>Uninstallation</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<span class="strong"><strong>Pre-uninstallation Actions - &lt;preUninstallationActionList&gt;</strong></span>: Executes before the uninstallation process takes place, such as unsetting user-defined installer variables or deleting files created after installation occurred.
</li><li class="listitem">
<span class="strong"><strong>Post-uninstallation Actions - &lt;postUninstallationActionList&gt;</strong></span>: Executes after the uninstallation process takes place.
</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_special_action_lists"></a>Special action lists</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<span class="strong"><strong>Installation Aborted Actions - &lt;installationAbortedActionList&gt;</strong></span>: Executes when the installation process is aborted.
</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="unattended_mode_action_lists"></a>Unattended mode, RPM and DEB packages</h4></div></div></div><p>These are special cases. There is no interaction with the end-user and the following action lists are not executed:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="ape.html#componentSelectionValidationActionList"><code class="literal">&lt;componentSelectionValidationActionList&gt;</code></a>
</li><li class="listitem">
<a class="link" href="apd.html#finalPageActionList"><code class="literal">&lt;finalPageActionList&gt;</code></a>
</li><li class="listitem">
<a class="link" href="apc.html#parameter.validationActionList"><code class="literal">&lt;validationActionList&gt;</code></a>
</li><li class="listitem">
<a class="link" href="apc.html#parameter.preShowPageActionList"><code class="literal">&lt;preShowPageActionList&gt;</code></a>
</li><li class="listitem">
<a class="link" href="apc.html#parameter.postShowPageActionList"><code class="literal">&lt;postShowPageActionList&gt;</code></a>
</li></ul></div><p>As the file installation step is executed by the RPM / DEB package manager and not by InstallBuilder itself, there is no way to execute any action from the installer until the files have been installed on the system. To be precise, the <a class="link" href="apd.html#preInstallationActionList"><code class="literal">&lt;preInstallationActionList&gt;</code></a> will not be executed, and the <a class="link" href="apd.html#initializationActionList"><code class="literal">&lt;initializationActionList&gt;</code></a>, <a class="link" href="apd.html#readyToInstallActionList"><code class="literal">&lt;readyToInstallActionList&gt;</code></a> and any folder’s actionList will be executed <span class="strong"><strong>after</strong></span> the files have been installed on the system.</p><p>As a final note, the <a class="link" href="apd.html#installationAbortedActionList"><code class="literal">&lt;installationAbortedActionList&gt;</code></a> will only be executed if the error was generated by any of the actions performed directly by the installer. I.e., if the error is generated during the file installation step, which is performed by the RPM / DEB package manager, the BitRock installer application will not be notified and therefore the <a class="link" href="apd.html#installationAbortedActionList"><code class="literal">&lt;installationAbortedActionList&gt;</code></a> will not be executed.</p><p>To summarize, the following list provides all of the differences regarding action lists when installing an RPM / DEB package:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apd.html#preBuildActionList"><code class="literal">&lt;preBuildActionList&gt;</code></a>: executed as usual
</li><li class="listitem">
<a class="link" href="apd.html#postBuildActionList"><code class="literal">&lt;postBuildActionList&gt;</code></a>: executed as usual
</li><li class="listitem">
<a class="link" href="apd.html#initializationActionList"><code class="literal">&lt;initializationActionList&gt;</code></a>: executed after file installation
</li><li class="listitem">
<a class="link" href="apd.html#preInstallationActionList"><code class="literal">&lt;preInstallationActionList&gt;</code></a>: not executed
</li><li class="listitem">
<a class="link" href="ape.html#componentSelectionValidationActionList"><code class="literal">&lt;componentSelectionValidationActionList&gt;</code></a>: not executed
</li><li class="listitem">
parameter <a class="link" href="apc.html#parameter.validationActionList"><code class="literal">&lt;validationActionList&gt;</code></a>: not executed
</li><li class="listitem">
parameter <a class="link" href="apc.html#parameter.preShowPageActionList"><code class="literal">&lt;preShowPageActionList&gt;</code></a>: not executed
</li><li class="listitem">
parameter <a class="link" href="apc.html#parameter.postShowPageActionList"><code class="literal">&lt;postShowPageActionList&gt;</code></a>: not executed
</li><li class="listitem">
<a class="link" href="apd.html#readyToInstallActionList"><code class="literal">&lt;readyToInstallActionList&gt;</code></a>: executed after file installation
</li><li class="listitem">
folder <a class="link" href="ape.html#actionList"><code class="literal">&lt;actionList&gt;</code></a>: executed after file installation
</li><li class="listitem">
<a class="link" href="apd.html#postInstallationActionList"><code class="literal">&lt;postInstallationActionList&gt;</code></a>: executed as usual
</li><li class="listitem">
<a class="link" href="apd.html#finalPageActionList"><code class="literal">&lt;finalPageActionList&gt;</code></a>: not executed
</li><li class="listitem">
<a class="link" href="apd.html#preUninstallationActionList"><code class="literal">&lt;preUninstallationActionList&gt;</code></a>: executed as usual
</li><li class="listitem">
<a class="link" href="apd.html#postUninstallationActionList"><code class="literal">&lt;postUninstallationActionList&gt;</code></a>: executed as usual
</li><li class="listitem">
<a class="link" href="apd.html#installationAbortedActionList"><code class="literal">&lt;installationAbortedActionList&gt;</code></a>: executed only if error comes from any of the tasks performed directly by the BitRock installer.
</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_main_project_and_components_execution_order"></a>Main Project and Components Execution Order</h4></div></div></div><p>Each action list may be included in the main project or inside the components. Let’s take an <a class="link" href="apd.html#initializationActionList"><code class="literal">&lt;initializationActionList&gt;</code></a> as an example. You have one main <a class="link" href="apd.html#initializationActionList"><code class="literal">&lt;initializationActionList&gt;</code></a> and 4 others in the components A, B, C and D. The components are declared following the order A, B, C, D (A is the first entry and D is the last one). In this case, the main <a class="link" href="apd.html#initializationActionList"><code class="literal">&lt;initializationActionList&gt;</code></a> is executed first and then each component’s action lists are executed (A, B, C, D - the order of component declaration is important).</p><p>You can divide all action lists into two groups based on what is executed first: main project or component action lists:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p class="simpara">
Main project action lists first and then components:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
<a class="link" href="apd.html#preBuildActionList"><code class="literal">&lt;preBuildActionList&gt;</code></a>
</li><li class="listitem">
<a class="link" href="apd.html#initializationActionList"><code class="literal">&lt;initializationActionList&gt;</code></a>
</li><li class="listitem">
<a class="link" href="apd.html#preInstallationActionList"><code class="literal">&lt;preInstallationActionList&gt;</code></a>
</li><li class="listitem">
<a class="link" href="apd.html#readyToInstallActionList"><code class="literal">&lt;readyToInstallActionList&gt;</code></a>
</li><li class="listitem">
<a class="link" href="apd.html#preUninstallationActionList"><code class="literal">&lt;preUninstallationActionList&gt;</code></a>
</li></ul></div></li><li class="listitem"><p class="simpara">
Component action lists first and then the main project:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
<a class="link" href="apd.html#postBuildActionList"><code class="literal">&lt;postBuildActionList&gt;</code></a>
</li><li class="listitem">
<a class="link" href="apd.html#postInstallationActionList"><code class="literal">&lt;postInstallationActionList&gt;</code></a>
</li><li class="listitem">
<a class="link" href="apd.html#postUninstallationActionList"><code class="literal">&lt;postUninstallationActionList&gt;</code></a>
</li></ul></div></li></ul></div><p>The installer executes action lists by group, which means that first, all <a class="link" href="apd.html#initializationActionList"><code class="literal">&lt;initializationActionList&gt;</code></a> actions take place and then all <a class="link" href="apd.html#preInstallationActionList"><code class="literal">&lt;preInstallationActionList&gt;</code></a> actions are executed:</p><div class="itemizedlist"><p class="title"><strong>Initialization Action List</strong></p><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
Project Initialization Action List
</li><li class="listitem">
Component A Initialization Action List
</li><li class="listitem">
Component B Initialization Action List
</li><li class="listitem">
…
</li></ul></div><div class="itemizedlist"><p class="title"><strong>Preinstallation Action List</strong></p><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
Project Preinstallation Action List
</li><li class="listitem">
Component A Preinstallation Action List
</li><li class="listitem">
Component B Preinstallation Action List
…
</li></ul></div><p>For example, for a project with two components:</p><p><a id="snip6083938"></a></p><pre class="programlisting">&lt;project&gt;
    ...
    &lt;initializationActionList&gt;
        &lt;showInfo&gt;
            &lt;text&gt;I'm the project in the initialization&lt;/text&gt;
        &lt;/showInfo&gt;
    &lt;/initializationActionList&gt;
    &lt;preInstallationActionList&gt;
        &lt;showInfo&gt;
            &lt;text&gt;I'm the project in the preInstallation&lt;/text&gt;
        &lt;/showInfo&gt;
    &lt;/preInstallationActionList&gt;
    &lt;componentList&gt;
        &lt;component&gt;
            &lt;name&gt;componentA&lt;/name&gt;
            &lt;description&gt;Component A&lt;/description&gt;
            ...
            &lt;initializationActionList&gt;
                &lt;showInfo&gt;
                    &lt;text&gt;I'm Component A in the initialization&lt;/text&gt;
                &lt;/showInfo&gt;
            &lt;/initializationActionList&gt;
            &lt;preInstallationActionList&gt;
                &lt;showInfo&gt;
                    &lt;text&gt;I'm Component A in the preInstallation&lt;/text&gt;
                &lt;/showInfo&gt;
            &lt;/preInstallationActionList&gt;
        &lt;/component&gt;
        &lt;component&gt;
            &lt;name&gt;componentB&lt;/name&gt;
            &lt;description&gt;Component B&lt;/description&gt;
            &lt;canBeEdited&gt;1&lt;/canBeEdited&gt;
            ...
            &lt;initializationActionList&gt;
                &lt;showInfo&gt;
                    &lt;text&gt;I'm Component B in the initialization&lt;/text&gt;
                &lt;/showInfo&gt;
            &lt;/initializationActionList&gt;
            &lt;preInstallationActionList&gt;
                &lt;showInfo&gt;
                    &lt;text&gt;I'm Component B in the preInstallation&lt;/text&gt;
                &lt;/showInfo&gt;
            &lt;/preInstallationActionList&gt;
        &lt;/component&gt;
    &lt;/componentList&gt;
&lt;/project&gt;</pre><p>If you build and execute the installer in, for example, unattended mode, you will see the following in the console:</p><pre class="screen"> I'm the project  in the initialization
 I'm Component A in the initialization
 I'm Component B in the initialization
 I'm the project  in the preinstallation
 I'm Component A in the preInstallation
 I'm Component B in the preInstallation</pre><p>The <a class="link" href="apd.html#installationAbortedActionList"><code class="literal">&lt;installationAbortedActionList&gt;</code></a> will only be executed if the error was generated by any of the actions performed directly by the installer. If the error is generated during the file installation step, which is performed by the RPM / DEB package manager, the BitRock installer application will not be notified and therefore the <a class="link" href="apd.html#installationAbortedActionList"><code class="literal">&lt;installationAbortedActionList&gt;</code></a> will not be executed.</p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_running_external_programs"></a>8.3. Running External Programs</h3></div></div></div><p>In addition to built-in actions, InstallBuilder allows external programs to be executed through the <a class="link" href="apa.html#runProgram"><code class="literal">&lt;runProgram&gt;</code></a> action:</p><p><a id="snip2747262"></a></p><pre class="programlisting">&lt;runProgram&gt;
  &lt;program&gt;kill&lt;/program&gt;
  &lt;programArguments&gt;-f myBin&lt;/programArguments&gt;
&lt;/runProgram&gt;</pre><p>After the external program ends, its standard streams are registered in the built-in variables <code class="literal">${program_stdout}</code>, <code class="literal">${program_stderr}</code> and <code class="literal">${program_exit_code}</code>:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<code class="literal">${program_stdout}</code>: Program Standard Output
</li><li class="listitem">
<code class="literal">${program_stderr}</code>: Program Standard Error
</li><li class="listitem">
<code class="literal">${program_exit_code}</code>: Program Exit Code
</li></ul></div><p>For example, to get the path of the <code class="literal">gksudo</code> command on Linux you could use the snippet below:</p><p><a id="snip3238233"></a></p><pre class="programlisting">   &lt;runProgram&gt;
      &lt;program&gt;which&lt;/program&gt;
      &lt;programArguments&gt;gksudo&lt;/programArguments&gt;
      &lt;!-- The gksudo program may not be
      installed so it is necessary to mask errors --&gt;
      &lt;abortOnError&gt;0&lt;/abortOnError&gt;
      &lt;showMessageOnError&gt;0&lt;/showMessageOnError&gt;
   &lt;/runProgram&gt;</pre><p>And get the path from the <code class="literal">${program_stdout}</code> variable. If the execution fails, the variable will be defined as empty.</p><p>You can also execute more complex commands such as pipes or include redirections. For example, the code below can be used to count the number of files in a directory:</p><p><a id="snip4984514"></a></p><pre class="programlisting">   &lt;runProgram&gt;
      &lt;program&gt;ls&lt;/program&gt;
      &lt;programArguments&gt;-l ${installdir}/logs/*.log | wc -l&lt;/programArguments&gt;
   &lt;/runProgram&gt;</pre><p>Although you can always check the created built-in variables, if you are explicitly calling the external program to use its output like in the <code class="literal">gksudo</code> example (as opposed to other cases, such us creating a MySQL database in which the important result is the database being created) it may be a better solution to use a <a class="link" href="apa.html#setInstallerVariableFromScriptOutput"><code class="literal">&lt;setInstallerVariableFromScriptOutput&gt;</code></a> action:</p><p><a id="snip4735146"></a></p><pre class="programlisting">   &lt;setInstallerVariableFromScriptOutput&gt;
      &lt;exec&gt;which&lt;/exec&gt;
      &lt;execArgs&gt;gksudo&lt;/execArgs&gt;
      &lt;name&gt;gksudoPath&lt;/name&gt;
      &lt;!-- The gksudo program may not be
      installed so it is necessary to mask errors --&gt;
      &lt;abortOnError&gt;0&lt;/abortOnError&gt;
      &lt;showMessageOnError&gt;0&lt;/showMessageOnError&gt;
   &lt;/setInstallerVariableFromScriptOutput&gt;</pre><p>The code above will create a new variable <code class="literal">gksudoPath</code> containing the <code class="literal">${program_stdout}</code> of the executed program.</p><p>On Windows, the <a class="link" href="apa.html#runProgram"><code class="literal">&lt;runProgram&gt;</code></a> action will by default launch programs by their 8.3 names (the same path type obtained through the <a class="link" href="ar01s04.html#modifier_suffixes" title="4.2. Modifier Suffixes">.dos</a> suffix) to avoid potential errors dealing with spaces and invalid characters in the path. However, as the 8.3 path may change depending on other files in the folder, sometimes this is not convenient. For example, when you need to check if the executable is running through the <a class="link" href="apb.html#processTest"><code class="literal">&lt;processTest&gt;</code></a> rule. In these cases, you can prevent the automatic 8.3 conversion using the <a class="link" href="apa.html#runProgram.useMSDOSPath"><code class="literal">&lt;useMSDOSPath&gt;</code></a> tag:</p><p><a id="snip3612900"></a></p><pre class="programlisting">&lt;project&gt;
   ...
   &lt;finalPageActionList&gt;
     ...
     &lt;runProgram&gt;
       &lt;progressText&gt;Launch Application&lt;/progressText&gt;
       &lt;program&gt;${installdir}/My Application with long filename.exe"&lt;/program&gt;
       &lt;programArguments&gt;&amp;amp;&lt;/programArguments&gt;
       &lt;!-- Use long filename --&gt;
       &lt;useMSDOSPath&gt;0&lt;/useMSDOSPath&gt;
     &lt;/runProgram&gt;
     ...
   &lt;/finalPageActionList&gt;
   ...
   &lt;preUninstallationActionList&gt;
     &lt;while&gt;
       &lt;actionList&gt;
         &lt;showWarning&gt;
            &lt;text&gt;The application "My Application with long filename.exe" is still running, please close it and click ok&lt;/text&gt;
         &lt;/showWarning&gt;
       &lt;/actionList&gt;
       &lt;conditionRuleList&gt;
         &lt;processTest&gt;
            &lt;logic&gt;is_running&lt;/logic&gt;
            &lt;name&gt;My Application with long filename.exe&lt;/name&gt;
         &lt;/processTest&gt;
       &lt;/conditionRuleList&gt;
     &lt;/while&gt;
     ...
   &lt;/preUninstallationActionList&gt;
   ...
&lt;/project&gt;</pre><p>The <a class="link" href="apa.html#runProgram"><code class="literal">&lt;runProgram&gt;</code></a> action can also be used to call external interpreters, for example, to execute Visual Basic or AppleScripts. The example below explains how to take advantage of this to restart the computer after the installation on OS X, in which the <code class="literal">&lt;rebootRequired&gt;</code> tag is not allowed:</p><p><a id="snip2017122"></a></p><pre class="programlisting">&lt;finalPageActionList&gt;
  &lt;actionGroup progressText="Reboot Computer"&gt;
    &lt;actionList&gt;
      &lt;runProgram&gt;
        &lt;abortOnError&gt;0&lt;/abortOnError&gt;
        &lt;program&gt;osascript&lt;/program&gt;
        &lt;programArguments&gt;-e "tell application \"Finder\" to restart"&lt;/programArguments&gt;
        &lt;showMessageOnError&gt;0&lt;/showMessageOnError&gt;
      &lt;/runProgram&gt;
      &lt;!-- If using osascript failed, try using reboot --&gt;
      &lt;runProgram&gt;
        &lt;program&gt;reboot&lt;/program&gt;
        &lt;programArguments&gt;&lt;/programArguments&gt;
        &lt;ruleList&gt;
          &lt;compareText&gt;
            &lt;logic&gt;does_not_equal&lt;/logic&gt;
            &lt;text&gt;${program_stderr}&lt;/text&gt;
            &lt;value&gt;&lt;/value&gt;
          &lt;/compareText&gt;
        &lt;/ruleList&gt;
      &lt;/runProgram&gt;
    &lt;/actionList&gt;
  &lt;/actionGroup&gt;
&lt;/finalPageActionList&gt;</pre><div class="caution" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Caution: When running shell scripts with subscripts in background"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Caution]" src="images/icons/caution.png" /></td><th align="left">When running shell scripts with subscripts in background</th></tr><tr><td align="left" valign="top"><p>On Unix, when calling shell scripts that also call subscripts in the background, even if the execution of the main shell script terminates, the installer keeps waiting for the launched child processes in background to close their standard streams. An example of this situation would be when manually starting a Unix service <code class="literal">backup-daemon</code>:</p><p><strong><code class="literal">backup-daemon</code> script. </strong>
</p><pre class="programlisting"># chkconfig:        235 30 90
# ...
start()
{
    #...
    /opt/backups/bin/start-backup-daemon.sh &amp;
    #...
}

# ...
exit 0</pre><p>
</p><p>When calling this script from the installer, for example using the code below:</p><p><a id="snip1780653"></a></p><pre class="programlisting"> &lt;runProgram&gt;
   &lt;program&gt;/etc/init.d/backup-daemon&lt;/program&gt;
   &lt;programArguments&gt;start&lt;/programArguments&gt;
   &lt;workingDirectory&gt;/etc/init.d&lt;/workingDirectory&gt;
 &lt;/runProgram&gt;</pre><p>The child script <code class="literal">/opt/backups/bin/start-backup-daemon.sh</code> is executed in background and the main service script quickly reaches to the end and executes <code class="literal">exit 0</code>. However, as the child process is still running, the installer hangs until it finishes or its standard streams are closed. The solution for this issue would be to redirect the output of the child script to <code class="literal">/dev/null</code>:</p><p><strong><code class="literal">backup-daemon</code> script reworked. </strong>
</p><pre class="programlisting"># chkconfig:        235 30 90
# ...
start()
{
    #...
    /opt/backups/bin/start-backup-daemon.sh &gt; /dev/null 2&gt; /dev/null &amp;
    #...
}

# ...
exit 0</pre><p>
</p><p>This way the installer won’t hang waiting for output from <code class="literal">/opt/backups/bin/start-backup-daemon.sh</code> and the installation will continue after the script reaches the <code class="literal">exit 0</code>.</p><p>Another solution that does not require modifying the service script would be to redirect the output when calling it from the installer:</p><p><a id="snip7443435"></a></p><pre class="programlisting"> &lt;runProgram&gt;
   &lt;program&gt;/etc/init.d/backup-daemon&lt;/program&gt;
   &lt;programArguments&gt;start &amp;gt; /dev/null 2&amp;gt; /dev/null&lt;/programArguments&gt;
   &lt;workingDirectory&gt;/etc/init.d&lt;/workingDirectory&gt;
 &lt;/runProgram&gt;</pre><p>Or, if you are interested in the output, redirect it to files. The snippets below create a custom action to wrap the <a class="link" href="apa.html#runProgram"><code class="literal">&lt;runProgram&gt;</code></a> and make it return the redirected streams:</p><p><strong>Custom action wrapping the <code class="literal">&lt;runProgram&gt;</code> to redirect its streams to files and return the result. </strong><a id="snip1818149"></a></p><pre class="programlisting">&lt;functionDefinitionList&gt;
  &lt;actionDefinition&gt;
    &lt;name&gt;runProgramRedirected&lt;/name&gt;
    &lt;actionList&gt;
      &lt;!-- Create a timestamp to use unique filenames --&gt;
      &lt;createTimeStamp&gt;
        &lt;format&gt;%Y%m%d%H%M%S&lt;/format&gt;
        &lt;variable&gt;timestamp&lt;/variable&gt;
      &lt;/createTimeStamp&gt;
      &lt;!-- Call the problematic script redirecting its output to files --&gt;
      &lt;runProgram&gt;
        &lt;program&gt;${program}&lt;/program&gt;
        &lt;programArguments&gt;${programArguments} &amp;gt; ${system_temp_directory}/stdout_${timestamp}.txt 2&amp;gt; ${system_temp_directory}/stderr_${timestamp}.txt&lt;/programArguments&gt;
        &lt;workingDirectory&gt;${workingDirectory}&lt;/workingDirectory&gt;
      &lt;/runProgram&gt;

      &lt;!-- Read the result into variables --&gt;
      &lt;readFile&gt;
        &lt;name&gt;${stdout}&lt;/name&gt;
        &lt;path&gt;${system_temp_directory}/stdout_${timestamp}.txt&lt;/path&gt;
      &lt;/readFile&gt;
      &lt;readFile&gt;
        &lt;name&gt;${stderr}&lt;/name&gt;
        &lt;path&gt;${system_temp_directory}/stderr_${timestamp}.txt&lt;/path&gt;
      &lt;/readFile&gt;
      &lt;!-- Remove the files --&gt;
      &lt;deleteFile path="${system_temp_directory}/stdout_${timestamp}.txt"/&gt;
      &lt;deleteFile path="${system_temp_directory}/stderr_${timestamp}.txt"/&gt;

      &lt;globalVariables names="${stderr} ${stdout}"/&gt;
    &lt;/actionList&gt;
    &lt;parameterList&gt;
       &lt;stringParameter name="program" value="" default=""/&gt;
       &lt;stringParameter name="programArguments" value="" default=""/&gt;
       &lt;stringParameter name="workingDirectory" value="" default=""/&gt;
       &lt;stringParameter name="stderr" value="" default="program_stderr"/&gt;
       &lt;stringParameter name="stdout" value="" default="program_stdout"/&gt;
    &lt;/parameterList&gt;
  &lt;/actionDefinition&gt;
&lt;/functionDefinitionList&gt;</pre><p>And call it when needed:</p><pre class="programlisting"> &lt;runProgramRedirected&gt;
   &lt;program&gt;/etc/init.d/backup-daemon&lt;/program&gt;
   &lt;programArguments&gt;start&lt;/programArguments&gt;
   &lt;workingDirectory&gt;/etc/init.d&lt;/workingDirectory&gt;
 &lt;/runProgramRedirected&gt;</pre></td></tr></table></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_launching_in_the_background"></a>Launching in the Background</h4></div></div></div><p>The standard behavior of the <a class="link" href="apa.html#runProgram"><code class="literal">&lt;runProgram&gt;</code></a> action is to wait for the spawned process to end but it is also possible to launch the process in the
background by appending an ampersand to the arguments. For example, to execute our application at the end of the installation without preventing
the installer from finishing you could use the following snippet:</p><p><a id="snip7638810"></a></p><pre class="programlisting"> &lt;finalPageActionList&gt;
   &lt;runProgram&gt;
      &lt;program&gt;${installdir}/bin/myApplication.exe&lt;/program&gt;
      &lt;programArguments&gt;--arg1 value1 --arg2 value 2 &amp;amp;&lt;/programArguments&gt;
   &lt;/runProgram&gt;
 &lt;/finalPageActionList&gt;</pre></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_opening_programs_in_os_x"></a>Opening Programs in OS X</h4></div></div></div><p>Application bundles are the most common way of distributing software packages on OS X. They are presented as a single file which is actually a
directory containing all of the necessary resources (images, libraries…).</p><p>These bundles can be executed by double-clicking on them, as if they were regular files, so it is a common mistake to try to execute them using
the command line as:</p><pre class="programlisting">$&gt; /Applications/BitRock\ InstallBuilder\ Professional\ 16.3.0/bin/Builder.app</pre><p>Or alternatively, using InstallBuilder actions:</p><p><a id="snip5487280"></a></p><pre class="programlisting">   &lt;runProgram&gt;
      &lt;program&gt;/Applications/BitRock InstallBuilder Professional 16.3.0/bin/Builder.app&lt;/program&gt;
   &lt;/runProgram&gt;</pre><p>Which results in an error similar to: "<code class="literal">-bash: /Applications/BitRock InstallBuilder Professional 16.3.0/bin/Builder.app/: is a directory</code>" or a more detailed error suggesting using <code class="literal">open</code> (see below) in recent InstallBuilder versions.</p><p>There are two ways of executing an application bundle:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
Using the <code class="literal">open</code> command: This command is the equivalent of a double-click over the bundle. It can be also used to open regular files, which will launch the associated application:
</li></ul></div><p><a id="snip4728918"></a></p><pre class="programlisting">   &lt;runProgram&gt;
      &lt;program&gt;open&lt;/program&gt;
      &lt;programArguments&gt;"${installdir}/YourApplication.app"&lt;/programArguments&gt;
   &lt;/runProgram&gt;</pre><p>The default behavior of the <code class="literal">open</code> command is to launch the process in background, so you don’t need to add an <code class="literal">"&amp;"</code> at the end of the arguments.</p><p>However, if you want to make InstallBuilder wait for the process to finish (launch the bundle in the foreground) you can use the <code class="literal">-W</code> command line flag:</p><p><a id="snip8929028"></a></p><pre class="programlisting">   &lt;runProgram&gt;
      &lt;program&gt;open&lt;/program&gt;
      &lt;programArguments&gt;-W "${installdir}/YourApplication.app"&lt;/programArguments&gt;
   &lt;/runProgram&gt;</pre><p>A limitation of using <code class="literal">open</code> to launch the bundle is that it does not support passing arguments to the launched application in its early versions (it started supporting it from OS X 10.6.2). If you just support versions newer than OS X 10.6.2, you can use the <code class="literal">--args</code> command line flag:</p><p><a id="snip185855"></a></p><pre class="programlisting">   &lt;runProgram&gt;
      &lt;program&gt;open&lt;/program&gt;
      &lt;programArguments&gt;-W "${installdir}/YourApplication.app" --args --data-dir ${installdir}/data --check-for-updates&lt;/programArguments&gt;
   &lt;/runProgram&gt;</pre><p>All the arguments after <code class="literal">--args</code> are directly passed to the application, so you don’t have to surround them by quotes.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
Calling the <code class="literal">CFBundleExecutable</code> specified in the <code class="literal">Info.plist</code> file: The application bundle contains an XML document describing multiple aspects of the bundle behavior (the binary to execute when double clicked, the icon to use in the dock…). One of the keys specified is <code class="literal">CFBundleExecutable</code>, which determines which of the contained files will be executed when opening the bundle. There are multiple ways of retrieving this key but the easiest way is by executing:
</li></ul></div><pre class="programlisting">$&gt; defaults read /Applications/BitRock\ InstallBuilder/bin/Builder.app/Contents/Info CFBundleExecutable</pre><p>Which will return the file that will be executed relative to the directory <code class="literal">Builder.app/Contents/MacOS</code>. In the case of InstallBuilder application bundles, it will return <code class="literal">installbuilder.sh</code> (<code class="literal">Builder.app/Contents/MacOS/installbuilder.sh</code>).</p><p>Another possibility would be to just open it with a text editor and look for the <code class="literal">CFBundleExecutable</code> key and its <code class="literal">&lt;string&gt;</code>:</p><pre class="programlisting">$&gt; emacs Builder.app/Contents/Info.plist</pre><p>Or from Finder, in the "right-click" menu, clicking "Show Package Contents" and opening <code class="literal">Contents/Info.plist</code>.</p><p>Using this information, you can execute it using the <a class="link" href="apa.html#runProgram"><code class="literal">&lt;runProgram&gt;</code></a> action:</p><p><a id="snip3668090"></a></p><pre class="programlisting">   &lt;runProgram&gt;
      &lt;program&gt;/Applications/BitRock InstallBuilder/bin/Builder.app/Contents/MacOS/installbuilder.sh&lt;/program&gt;
      &lt;programArguments&gt;build ~/project.xml linux&lt;/programArguments&gt;
   &lt;/runProgram&gt;</pre></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_displaying_progress_while_executing_long_running_actions"></a>8.4. Displaying Progress While Executing Long Running Actions</h3></div></div></div><p>When the actions executed require a long time to complete, such as waiting for a service to start or when uncompressing a zip file, it is advisable to provide some feedback to the end user. The first way of providing feedback is defining a <code class="literal">progressText</code> in your action. If the actions are executed during the <a class="link" href="apd.html#postInstallationActionList"><code class="literal">&lt;postInstallationActionList&gt;</code></a>, <a class="link" href="apd.html#postUninstallerCreationActionList"><code class="literal">&lt;postUninstallerCreationActionList&gt;</code></a> or in a <code class="literal">&lt;folder&gt;'s</code> action list, the main progress bar used to display the unpacking process will display the defined message:</p><p><a id="snip9595355"></a></p><pre class="programlisting">  &lt;component&gt;
     &lt;name&gt;myComponent&lt;/name&gt;
     ...
     &lt;folderList&gt;
       &lt;folder&gt;
          &lt;name&gt;documents&lt;/name&gt;
          ...
          &lt;actionList&gt;
             &lt;runProgram progressText="Starting Apache Server..."&gt;
               &lt;program&gt;${installdir}/apache/apachectl&lt;/program&gt;
               &lt;programArguments&gt;start &amp;amp;&lt;/programArguments&gt;
             &lt;/runProgram&gt;
             &lt;wait ms="3000" progressText="Waiting apache server to start..."/&gt;
          &lt;/actionList&gt;
       &lt;/folder&gt;
     &lt;/folderList&gt;
  &lt;/component&gt;</pre><p>However, if the action is going to take a lot of time, it would be an even better idea to wrap the actions in a <a class="link" href="apa.html#showProgressDialog"><code class="literal">&lt;showProgressDialog&gt;</code></a>. This dialog displays an indeterminate progress bar in a pop-up while executing the wrapped child actions. It will also take control of the execution so the user will not be able to interact with the main window until the actions complete. Canceling the pop-up will cancel the installation:</p><p><a id="snip9131644"></a></p><pre class="programlisting"> &lt;showProgressDialog&gt;
    &lt;title&gt;Extracting files&lt;/title&gt;
    &lt;width&gt;400&lt;/width&gt;
    &lt;height&gt;100&lt;/height&gt;
    &lt;actionList&gt;
      &lt;!-- The unzip action will provide a built-in progress text with
      the file being unpacked so you don't need to provide one --&gt;
      &lt;unzip&gt;
        &lt;destinationDirectory&gt;${installdir}/content&lt;/destinationDirectory&gt;
        &lt;zipFile&gt;${installdir}/content.zip&lt;/zipFile&gt;
      &lt;/unzip&gt;
      &lt;deleteFile&gt;
        &lt;progressText&gt;Removing original zip file&lt;/progressText&gt;
        &lt;path&gt;${installdir}/content.zip&lt;/path&gt;
      &lt;/deleteFile&gt;
    &lt;/actionList&gt;
 &lt;/showProgressDialog&gt;</pre><div class="figure"><a id="idm140427932566976"></a><p class="title"><strong>Figure 52. Show Progress Dialog</strong></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/progressDialog.png" align="middle" alt="Show Progress Dialog" /></div></div></div><br class="figure-break" /><p>The <a class="link" href="apa.html#showProgressDialog"><code class="literal">&lt;showProgressDialog&gt;</code></a> will behave differently when its only child is an <a class="link" href="apa.html#httpGet"><code class="literal">&lt;httpGet&gt;</code></a> action. In this case, instead of displaying an indeterminate progress pop-up, a continuous bar with the speed and the progress of the download will be displayed:</p><p><a id="snip5543915"></a></p><pre class="programlisting">&lt;showProgressDialog&gt;
    &lt;title&gt;Downloading files&lt;/title&gt;
    &lt;actionList&gt;
        &lt;httpGet&gt;
            &lt;filename&gt;/tmp/ib.run&lt;/filename&gt;
            &lt;url&gt;http://installbuilder.bitrock.com/installbuilder-enterprise-16.3.0-linux-installer.run&lt;/url&gt;
        &lt;/httpGet&gt;
    &lt;/actionList&gt;
&lt;/showProgressDialog&gt;</pre><div class="figure"><a id="idm140427932557968"></a><p class="title"><strong>Figure 53. Continuous Progress Dialog</strong></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/continuousProgressDialog.png" align="middle" alt="Continuous Progress Dialog" /></div></div></div><br class="figure-break" /></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_creating_custom_actions"></a>8.5. Creating Custom Actions</h3></div></div></div><p>In addition to the built-in actions, InstallBuilder allows you to create new custom actions using a mix of base actions and rules. New actions are defined using the <a class="link" href="apd.html#functionDefinitionList"><code class="literal">&lt;functionDefinitionList&gt;</code></a>.</p><p>For example, let’s suppose you have a lot of long running <a class="link" href="apa.html#runProgram"><code class="literal">&lt;runProgram&gt;</code></a> actions (for example installing sub installers in unattended mode) and you are enclosing all of them in a <a class="link" href="apa.html#showProgressDialog"><code class="literal">&lt;showProgressDialog&gt;</code></a>:</p><p><a id="snip6580165"></a></p><pre class="programlisting">  &lt;showProgressDialog&gt;
     &lt;title&gt;Please wait ...&lt;/title&gt;
     &lt;actionList&gt;
        &lt;runProgram&gt;
           &lt;program&gt;${yourProgram}&lt;/program&gt;
           &lt;programArguments&gt;--mode unattended --prefix "${installdir}"&lt;/programArguments&gt;
        &lt;/runProgram&gt;
     &lt;/actionList&gt;
  &lt;/showProgressDialog&gt;</pre><p>You could then create a new action called <code class="literal">&lt;unattendedRunProgamWithProgress&gt;</code> that will just accept the program to execute and some additional arguments:</p><p><a id="snip2837678"></a></p><pre class="programlisting">&lt;project&gt;
    ...
    &lt;functionDefinitionList&gt;
        &lt;!-- Define the action --&gt;
        &lt;actionDefinition&gt;
            &lt;name&gt;unattendedRunProgamWithProgress&lt;/name&gt;
            &lt;actionList&gt;
                &lt;showProgressDialog&gt;
                    &lt;title&gt;Please wait ...&lt;/title&gt;
                    &lt;actionList&gt;
                        &lt;runProgram progressText="Installing ${program}"&gt;
                            &lt;program&gt;${program}&lt;/program&gt;
                            &lt;programArguments&gt;--mode unattended ${programArguments}&lt;/programArguments&gt;
                        &lt;/runProgram&gt;
                    &lt;/actionList&gt;
                &lt;/showProgressDialog&gt;
            &lt;/actionList&gt;
            &lt;parameterList&gt;
                &lt;stringParameter name="program" value="" default=""/&gt;
                &lt;stringParameter name="programArguments" value="" default=""/&gt;
            &lt;/parameterList&gt;
        &lt;/actionDefinition&gt;
    &lt;/functionDefinitionList&gt;
    &lt;initializationActionList&gt;
        &lt;!-- Use the new action --&gt;
        &lt;unattendedRunProgamWithProgress&gt;
            &lt;program&gt;${yourProgram}&lt;/program&gt;
            &lt;programArguments&gt;--prefix "${installdir}"&lt;/programArguments&gt;
        &lt;/unattendedRunProgamWithProgress&gt;
    &lt;/initializationActionList&gt;
    ...
&lt;/project&gt;</pre><p>This new action will take care of displaying the progress dialog and launching the program in unattended mode. The basics of how to define a new custom action are as follow:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<span class="strong"><strong><a class="link" href="apg.html#actionDefinition.name"><code class="literal">&lt;name&gt;</code></a></strong></span>: The new custom action will be available in other parts of the XML by its name. No other custom action can be defined with the same <code class="literal">&lt;name&gt;</code>.
</li><li class="listitem">
<span class="strong"><strong><a class="link" href="apg.html#actionDefinition.actionList"><code class="literal">&lt;actionList&gt;</code></a></strong></span>: This <code class="literal">&lt;actionList&gt;</code> defines the set of actions to wrap. In addition to built-in actions, it also accepts other custom actions (if they were previously defined).
</li><li class="listitem">
<span class="strong"><strong><a class="link" href="apg.html#actionDefinition.parameterList"><code class="literal">&lt;parameterList&gt;</code></a></strong></span>: This <code class="literal">&lt;parameterList&gt;</code> defines the parameters of the new action. They are used to interface with the inner actions in the <a class="link" href="apg.html#actionDefinition.actionList"><code class="literal">&lt;actionList&gt;</code></a>. In addition to the settings defined in the <a class="link" href="apg.html#actionDefinition.parameterList"><code class="literal">&lt;parameterList&gt;</code></a>, the new custom action will also support all the common action properties such as <a class="link" href="apa.html#action.progressText"><code class="literal">&lt;progressText&gt;</code></a>, <a class="link" href="apa.html#action.show"><code class="literal">&lt;show&gt;</code></a>, <a class="link" href="apa.html#action.abortOnError"><code class="literal">&lt;abortOnError&gt;</code></a>, <a class="link" href="apa.html#action.showMessageOnError"><code class="literal">&lt;action.showMessageOnError&gt;</code></a>…
</li></ul></div><p>For example, if you want to wrap the built-in <a class="link" href="apa.html#unpackDirectory"><code class="literal">&lt;unpackDirectory&gt;</code></a> action to make it safer and previously backup the destination, you could use:</p><p><a id="snip2856803"></a></p><pre class="programlisting">&lt;functionDefinitionList&gt;
  &lt;actionDefinition&gt;
   &lt;name&gt;unpackDirectoryWithBackup&lt;/name&gt;
     &lt;actionList&gt;
        &lt;actionGroup&gt;
           &lt;actionList&gt;
              &lt;createTimeStamp&gt;
                 &lt;format&gt;%s&lt;/format&gt;
                 &lt;variable&gt;timestamp&lt;/variable&gt;
              &lt;/createTimeStamp&gt;
              &lt;logMessage&gt;
                 &lt;text&gt;File ${destination} already exists, renaming it to ${destination}.${timestamp}&lt;/text&gt;
              &lt;/logMessage&gt;
              &lt;renameFile&gt;
                 &lt;destination&gt;${destination}.${timestamp}&lt;/destination&gt;
                 &lt;origin&gt;${destination}&lt;/origin&gt;
              &lt;/renameFile&gt;
           &lt;/actionList&gt;
           &lt;ruleList&gt;
              &lt;fileExists path="${destination}"/&gt;
           &lt;/ruleList&gt;
        &lt;/actionGroup&gt;
        &lt;unpackDirectory&gt;
           &lt;component&gt;${component}&lt;/component&gt;
           &lt;destination&gt;${destination}&lt;/destination&gt;
           &lt;folder&gt;${folder}&lt;/folder&gt;
           &lt;origin&gt;${origin}&lt;/origin&gt;
        &lt;/unpackDirectory&gt;
     &lt;/actionList&gt;
     &lt;parameterList&gt;
        &lt;stringParameter name="component" value="" default=""/&gt;
        &lt;stringParameter name="folder" value="" default=""/&gt;
        &lt;stringParameter name="origin" value="" default=""/&gt;
        &lt;stringParameter name="destination" value="" default=""/&gt;
     &lt;/parameterList&gt;
  &lt;/actionDefinition&gt;
&lt;/functionDefinitionList&gt;</pre><p>The new action will then be available at any point in the installation:</p><pre class="programlisting">&lt;project&gt;
  ...
  &lt;initializationActionList&gt;
     &lt;unpackDirectoryWithBackup&gt;
       &lt;component&gt;binaries&lt;/component&gt;
       &lt;folder&gt;bin&lt;/folder&gt;
       &lt;origin&gt;checker/checker.bin&lt;/origin&gt;
       &lt;destination&gt;${installdir}/temp&lt;/destination&gt;
     &lt;/unpackDirectoryWithBackup&gt;
  &lt;/initializationActionList&gt;
  ...
&lt;/project&gt;</pre><p>In the example above, the <code class="literal">&lt;parameterList&gt;</code> was basically a map of the main properties accepted by the <a class="link" href="apa.html#unpackDirectory"><code class="literal">&lt;unpackDirectory&gt;</code></a> action and the <code class="literal">&lt;actionList&gt;</code> included a couple of actions to do the backup and log some information before calling <code class="literal">&lt;unpackDirectory&gt;</code>.</p><p>Another useful example could be to manage your bundled Apache server:</p><p><a id="snip4295258"></a></p><pre class="programlisting">&lt;project&gt;
 ...
 &lt;functionDefinitionList&gt;
  &lt;actionDefinition&gt;
    &lt;name&gt;apache&lt;/name&gt;
      &lt;actionList&gt;
         &lt;runProgram program="${apacheCtlPath}" programArguments="${action}"/&gt;
      &lt;/actionList&gt;
      &lt;parameterList&gt;
         &lt;stringParameter name="action" value="" default="start"/&gt;
         &lt;stringParameter name="apacheCtlPath" value="" default="${installdir}/apache2/bin/apachectl"/&gt;
      &lt;/parameterList&gt;
  &lt;/actionDefinition&gt;
 &lt;/functionDefinitionList&gt;
 ...
 &lt;initializationActionList&gt;
   &lt;apache action="start"/&gt;
 &lt;/initializationActionList&gt;
 ...
&lt;/project&gt;</pre><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="global_variables_section"></a>Returning values from a custom action</h4></div></div></div><p>I some cases, you may want to create custom actions that perform some operations and return the result in a variable. The obvious way of achieving this would be to implement something like the following:</p><p><a id="snip415022"></a></p><pre class="programlisting">&lt;project&gt;
 ...
 &lt;functionDefinitionList&gt;
  &lt;actionDefinition&gt;
    &lt;name&gt;getPreviousInstallDir&lt;/name&gt;
      &lt;actionList&gt;
         &lt;setInstallerVariable name="dir" value=""/&gt;
         &lt;setInstallerVariable name="dir" value="${env(OLD_DIR)}" &gt;
           &lt;ruleList&gt;
              &lt;platformTest type="unix"/&gt;
           &lt;/ruleList&gt;
         &lt;/setInstallerVariable&gt;
         &lt;registryGet&gt;
           &lt;key&gt;HKEY_LOCAL_MACHINE\Software\${project.windowsSoftwareRegistryPrefix}&lt;/key&gt;
           &lt;name&gt;Location&lt;/name&gt;
           &lt;variable&gt;installdir&lt;/variable&gt;
           &lt;ruleList&gt;
              &lt;platformTest type="windows"/&gt;
           &lt;/ruleList&gt;
         &lt;/registryGet&gt;
         &lt;!-- Set the return value. ${result} contains the name
         of the variable provided by the caller --&gt;
         &lt;setInstallerVariable name="${result}" value="${dir}"/&gt;
      &lt;/actionList&gt;
      &lt;parameterList&gt;
         &lt;stringParameter name="result" value="" default=""/&gt;
      &lt;/parameterList&gt;
  &lt;/actionDefinition&gt;
 &lt;/functionDefinitionList&gt;
 ...
 &lt;initializationActionList&gt;
   &lt;getPreviousInstallDir result="previous_dir"/&gt;
 &lt;/initializationActionList&gt;
 ...
&lt;/project&gt;</pre><p>However, if you try this, you will realize that the <code class="literal">previous_dir</code> variable will still be undefined after the execution of the custom action. The reason is that all the variables used in the custom action are just a local copy of the project level variables. The same way, variables created inside the custom action are not available in the global scope. This way, you can safely use any variable inside the function without affecting other project level variables.</p><p>To solve this issue, you just need to mark the desired variables as global using the <a class="link" href="apa.html#globalVariables"><code class="literal">&lt;globalVariables&gt;</code></a> action. This action accepts a space-separated list of variable names that will then be preserve their values outside the custom action. In our example:</p><p><a id="snip5280012"></a></p><pre class="programlisting">&lt;project&gt;
 ...
 &lt;functionDefinitionList&gt;
  &lt;actionDefinition&gt;
    &lt;name&gt;getPreviousInstallDir&lt;/name&gt;
      &lt;actionList&gt;
         &lt;!-- Define the variable configured as global --&gt;
         &lt;globalVariables names="${result}"/&gt;
         &lt;setInstallerVariable name="dir" value=""/&gt;
         &lt;setInstallerVariable name="dir" value="${env(OLD_DIR)}" &gt;
           &lt;ruleList&gt;
              &lt;platformTest type="unix"/&gt;
           &lt;/ruleList&gt;
         &lt;/setInstallerVariable&gt;
         &lt;registryGet&gt;
           &lt;key&gt;HKEY_LOCAL_MACHINE\Software\${project.windowsSoftwareRegistryPrefix}&lt;/key&gt;
           &lt;name&gt;Location&lt;/name&gt;
           &lt;variable&gt;installdir&lt;/variable&gt;
           &lt;ruleList&gt;
              &lt;platformTest type="windows"/&gt;
           &lt;/ruleList&gt;
         &lt;/registryGet&gt;
         &lt;!-- Set the return value. ${result} contains the name
         of the variable provided by the caller --&gt;
         &lt;setInstallerVariable name="${result}" value="${dir}"/&gt;
      &lt;/actionList&gt;
      &lt;parameterList&gt;
         &lt;stringParameter name="result" value="" default=""/&gt;
      &lt;/parameterList&gt;
  &lt;/actionDefinition&gt;
 &lt;/functionDefinitionList&gt;
 ...
 &lt;initializationActionList&gt;
   &lt;getPreviousInstallDir result="previous_dir"/&gt;
 &lt;/initializationActionList&gt;
 ...
&lt;/project&gt;</pre><p>Take into account that once a variable is defined as global, it will always be accessible from other custom actions, even if they did not declare it as global.</p><div class="note" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Note: Custom actions return values"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/icons/note.png" /></td><th align="left">Custom actions return values</th></tr><tr><td align="left" valign="top"><p>To return values from a custom action you must create a parameter in which the result will be returned and mark it as global using the <a class="link" href="apa.html#globalVariables"><code class="literal">&lt;globalVariables&gt;</code></a> action.</p></td></tr></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_current_limitations"></a>Current Limitations</h4></div></div></div><p>The Custom Actions are still under development and although the functionality is fully usable, they have some known limitations:</p><p><strong><span class="strong"><strong>Order matters</strong></span>. </strong>To make the builder recognize a custom action as a valid XML element, it must be defined in the XML project before it is used. For example, the below will fail with <code class="literal">"Unknown tag &lt;myShowInfo&gt;"</code> error:</p><pre class="programlisting">&lt;project&gt;
  ...
  &lt;initializationActionList&gt;
    &lt;myShowInfo/&gt;
  &lt;/initializationActionList&gt;
  ...
  &lt;functionDefinitionList&gt;
    &lt;actionDefinition&gt;
       &lt;name&gt;myShowInfo&lt;/name&gt;
       &lt;actionList&gt;
         &lt;showInfo text="This is a customized showInfo: ${text}"/&gt;
       &lt;/actionList&gt;
       &lt;parameterList&gt;
         &lt;stringParameter name="text"/&gt;
       &lt;/parameterList&gt;
    &lt;/actionDefinition&gt;
  &lt;/functionDefinitionList&gt;
  ...
&lt;/project&gt;</pre><p>However, changing the order will fix the issue:</p><p><a id="snip1164767"></a></p><pre class="programlisting">&lt;project&gt;
  ...
  &lt;functionDefinitionList&gt;
    &lt;actionDefinition&gt;
       &lt;name&gt;myShowInfo&lt;/name&gt;
       &lt;actionList&gt;
         &lt;showInfo text="This is a customized showInfo: ${text}"/&gt;
       &lt;/actionList&gt;
       &lt;parameterList&gt;
         &lt;stringParameter name="text"/&gt;
       &lt;/parameterList&gt;
    &lt;/actionDefinition&gt;
  &lt;/functionDefinitionList&gt;
  ...
  &lt;initializationActionList&gt;
    &lt;myShowInfo/&gt;
  &lt;/initializationActionList&gt;
  ...
&lt;/project&gt;</pre><p>Future versions will fix the issue by implementing a two-pass XML parser.</p><p><strong><span class="strong"><strong>Custom actions cannot be defined in the GUI tree</strong></span>. </strong>They cannot be defined in the tree, but actions defined using the integrated XML editor (or externally added) will be available as other regular actions in the action-selector dialog.</p><p><strong><span class="strong"><strong>Name conventions</strong></span>. </strong>The <a class="link" href="apg.html#actionDefinition.name"><code class="literal">&lt;name&gt;</code></a> must only contain ascii letters. The same applies to its parameters.</p><p><strong><span class="strong"><strong>Custom actions cannot overwrite built-in ones</strong></span>. </strong>If you define a new <code class="literal">&lt;showInfo&gt;</code>, and a built-in <a class="link" href="apa.html#showInfo"><code class="literal">&lt;showInfo&gt;</code></a> already exists, it will be ignored.</p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_error_handling"></a>8.6. Error Handling</h3></div></div></div><p>During the installation or uninstallation process, there are scenarios in which the installer encounters a non-recoverable error or simply is manually aborted. This section explains how these scenarios are handled by InstallBuilder and how to manually define actions in case of failure either to clean the installation or to try to recover.</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_handling_action_errors"></a>Handling Action Errors</h4></div></div></div><p>All <a class="link" href="apa.html" title="A. Actions">actions</a> include some error handling tags that make it very easy to specify the desired behavior when an error is found during its execution.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#action.abortOnError"><code class="literal">&lt;abortOnError&gt;</code></a> : This property configures whether or not to abort the execution of the current action list when one of its child actions fails. Its default value is <code class="literal">1</code>.
</li></ul></div><p>For example, in the next snippet, the second action will never be executed:</p><p><a id="snip6253642"></a></p><pre class="programlisting">&lt;initializationActionList&gt;
   &lt;throwError text="This will abort the installation!"/&gt;
   &lt;showInfo text="This will never be executed"/&gt;
&lt;/initializationActionList&gt;</pre><p>But if you set <code class="literal">abortOnError="0"</code>, even if a message is displayed, the execution will not be aborted:</p><p><a id="snip4976753"></a></p><pre class="programlisting">&lt;initializationActionList&gt;
   &lt;throwError text="This will not abort the installation!" abortOnError="0"/&gt;
   &lt;showInfo text="And this will be executed after the error pop-up"/&gt;
&lt;/initializationActionList&gt;</pre><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#action.showMessageOnError"><code class="literal">&lt;showMessageOnError&gt;</code></a>: This property configures whether or not to display a pop-up notifying the user of the error.
Its default value is <code class="literal">1</code>. If you set <code class="literal">showMessageOnError="0"</code> and an error occurs, if the action is not configured to ignore errors with <code class="literal">abortOnError="0"</code>, the rest of the actions in the action list will be skipped. However, although the actions will be skipped, no error will be propagated upward so the installation will not be aborted:
</li></ul></div><p><a id="snip4288667"></a></p><pre class="programlisting">&lt;initializationActionList&gt;
   &lt;throwError text="This will not abort the installation but no other action in the initializationActionList will be executed!" showMessageOnError="0"/&gt;
   &lt;showInfo text="This will never be executed"/&gt;
&lt;/initializationActionList&gt;</pre><p>To completely mask an error, you can use a combination of <code class="literal">showMessageOnError="0"</code> and <code class="literal">abortOnError="0"</code>. A real world example could be to determine if certain Linux command is available and getting its path:</p><p><a id="snip9636756"></a></p><pre class="programlisting">&lt;initializationActionList&gt;
   &lt;!-- The below will fail in some cases
   but we do not want to display any error or to abort --&gt;
   &lt;runProgram&gt;
      &lt;program&gt;which&lt;/program&gt;
      &lt;programArguments&gt;gksudo&lt;/programArguments&gt;
      &lt;showMessageOnError&gt;0&lt;/showMessageOnError&gt;
      &lt;abortOnError&gt;0&lt;/abortOnError&gt;
   &lt;/runProgram&gt;
   &lt;showInfo text="gksudo is not available" &gt;
      &lt;ruleList&gt;
         &lt;compareText text="${program_stdout}" logic="equals" value=""/&gt;
      &lt;/ruleList&gt;
   &lt;/showInfo&gt;
   &lt;showInfo text="gksudo is available and its path is ${program_stdout}" &gt;
      &lt;ruleList&gt;
         &lt;compareText text="${program_stdout}" logic="does_not_equal" value=""/&gt;
      &lt;/ruleList&gt;
   &lt;/showInfo&gt;
&lt;/initializationActionList&gt;</pre><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#action.customErrorMessage"><code class="literal">&lt;customErrorMessage&gt;</code></a> : When an action fails, InstallBuilder generates a built-in error to be displayed if <code class="literal">showMessageOnError="1"</code> This error message can be overwritten using the <code class="literal">customErrorMessage</code> property. For example, calling a nonexistent command <code class="literal">foo</code> would normally result in an error such as "foo not found" but you can customize it to: "foo must be installed, aborting…":
</li></ul></div><p><a id="snip4973117"></a></p><pre class="programlisting"> &lt;runProgram&gt;
   &lt;program&gt;foo&lt;/program&gt;
   &lt;customErrorMessage&gt;foo must be installed, aborting...&lt;/customErrorMessage&gt;
 &lt;/runProgram&gt;</pre><p>The errors are also stored in the <code class="literal">${installer_error_message}</code> (containing the error message reported to the user, masked by the <a class="link" href="apa.html#action.customErrorMessage"><code class="literal">&lt;customErrorMessage&gt;</code></a> if any) and <code class="literal">${installer_error_message_original}</code> (the original error message, unmasked by the <a class="link" href="apa.html#action.customErrorMessage"><code class="literal">&lt;customErrorMessage&gt;</code></a>) built-in variables. The variables are accessible at the time the <a class="link" href="apa.html#action.customErrorMessage"><code class="literal">&lt;customErrorMessage&gt;</code></a> is resolved so you could create a custom error message that also includes the original error as the details:</p><p><a id="snip3187811"></a></p><pre class="programlisting"> &lt;runProgram&gt;
   &lt;program&gt;foo&lt;/program&gt;
   &lt;customErrorMessage&gt;foo must be installed: ${installer_error_message_original}&lt;/customErrorMessage&gt;
 &lt;/runProgram&gt;</pre><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#action.onErrorActionList"><code class="literal">&lt;onErrorActionList&gt;</code></a>: When an action reports an error during its execution, regardless of the values of <code class="literal">showMessageOnError</code> and <code class="literal">abortOnError</code>, its <code class="literal">onErrorActionList</code> will be executed. For example, you can use it to clean the effects of the failed action before continuing aborting:
</li></ul></div><p><a id="snip7547833"></a></p><pre class="programlisting">  &lt;!-- Try to copy some images to the installation directory and then create a pdf
  file but if the process fail, do not want to preserve the images and the malformed
  pdf file. The action will take care of the cleaning itself --&gt;
  &lt;actionGroup&gt;
     &lt;actionList&gt;
        &lt;!-- ${installer_directory} is resolved to the
        directory of the installer --&gt;
        &lt;copyFile origin="${installer_directory}/images" destination="${installdir}"/&gt;
        &lt;runProgram&gt;
          &lt;program&gt;convert&lt;/program&gt;
          &lt;programArguments&gt;${installdir}/images/*.jpg ${installdir}/myImages.pdf&lt;/programArguments&gt;
        &lt;/runProgram&gt;
     &lt;/actionList&gt;
     &lt;onErrorActionList&gt;
        &lt;deleteFile path="${installdir}/images"/&gt;
        &lt;deleteFile path="${installdir}/myImages.pdf"/&gt;
     &lt;/onErrorActionList&gt;
  &lt;/actionGroup&gt;</pre><p>Using the <a class="link" href="apa.html#action.onErrorActionList"><code class="literal">&lt;onErrorActionList&gt;</code></a> and the <code class="literal">${installer_error_message_original}</code> variable you could also throw a friendly error to your users while still providing the specific details in the log for debugging purposes:</p><p><a id="snip6442474"></a></p><pre class="programlisting"> &lt;runProgram&gt;
    &lt;customErrorMessage&gt;Error generating pdf file&lt;/customErrorMessage&gt;
    &lt;program&gt;convert&lt;/program&gt;
    &lt;programArguments&gt;${installdir}/images/*.jpg ${installdir}/myImages.pdf&lt;/programArguments&gt;
    &lt;onErrorActionList&gt;
      &lt;logMessage&gt;
        &lt;text&gt;Error generating pdf file: ${installer_error_message_original}&lt;/text&gt;
      &lt;/logMessage&gt;
    &lt;/onErrorActionList&gt;
 &lt;/runProgram&gt;</pre></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_installation_aborted_action_list"></a>Installation Aborted Action List</h4></div></div></div><p>This action list gets executed when the project is aborted, either by the user or by an internal error. It provides a global way of dealing with the error in contra-position to the specific approach of the <a class="link" href="apa.html#action.onErrorActionList"><code class="literal">&lt;onErrorActionList&gt;</code></a>. For example, it could be used to make sure the installation directory is deleted after the installation is being canceled:</p><p><a id="snip8675378"></a></p><pre class="programlisting">&lt;project&gt;
  ...
  &lt;installationAbortedActionList&gt;
     &lt;deleteFile path="${installdir}"/&gt;
  &lt;/installationAbortedActionList&gt;
  ...
&lt;/project&gt;</pre><p>You can also differentiate between an installation aborted by the user or an error checking the built-in variable <code class="literal">${installation_aborted_by_user}</code>.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_when_does_an_error_not_abort_the_installation"></a>When Does an Error Not Abort the Installation?</h4></div></div></div><p>In most cases, when an error is thrown and it is not caught at any point using <code class="literal">abortOnError="0"</code> (the error is completely ignored) or <code class="literal">showMessageOnError="0"</code> (the error aborts the current action list but is not propagated upwards), it aborts the installation. However, there are some special cases in which the error is treated as a warning or is ignored:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
Parameter’s Validation Actions (<a class="link" href="apc.html#parameter.validationActionList"><code class="literal">&lt;validationActionList&gt;</code></a>): If an unmasked error occurs inside a parameter action list, the rest of actions in the <a class="link" href="apc.html#parameter.validationActionList"><code class="literal">&lt;validationActionList&gt;</code></a> are skipped and the error is reported to the user but instead of aborting the installation, the page is redrawn. For example, if you unconditionally throw an error in a <a class="link" href="apc.html#parameter.validationActionList"><code class="literal">&lt;validationActionList&gt;</code></a>, the installer will never continue after this page:
</li></ul></div><p><a id="snip7086995"></a></p><pre class="programlisting">&lt;directoryParameter&gt;
   &lt;name&gt;installdir&lt;/name&gt;
   &lt;validationActionList&gt;
      &lt;throwError text="This page will be displayed again and again !"/&gt;
   &lt;/validationActionList&gt;
&lt;/directoryParameter&gt;</pre><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
Component’s Validation Actions (<a class="link" href="ape.html#componentSelectionValidationActionList"><code class="literal">&lt;componentSelectionValidationActionList&gt;</code></a>): If an unmasked error occurs inside this action list, the same way it happens with the <a class="link" href="apc.html#parameter.validationActionList"><code class="literal">&lt;validationActionList&gt;</code></a>, the error is reported to the user but instead of aborting the installation, the component selection page is redrawn:
</li></ul></div><p><a id="snip1126852"></a></p><pre class="programlisting">&lt;component&gt;
    &lt;name&gt;C&lt;/name&gt;
    &lt;description&gt;Component C&lt;/description&gt;
    &lt;detailedDescription&gt;This component depends on 'A' and 'B'&lt;/detailedDescription&gt;
    ...
    &lt;componentSelectionValidationActionList&gt;
        &lt;throwError&gt;
            &lt;text&gt;Component 'C' cannot be installed if you have not selected both 'A' and 'B'.&lt;/text&gt;
            &lt;ruleList&gt;
                &lt;isFalse value="${component(A).selected}"/&gt;
                &lt;isFalse value="${component(B).selected}" /&gt;
            &lt;/ruleList&gt;
        &lt;/throwError&gt;
    &lt;/componentSelectionValidationActionList&gt;
    ...
&lt;/component&gt;</pre><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
Post Installation Actions and following (<a class="link" href="apd.html#postInstallationActionList"><code class="literal">&lt;postInstallationActionList&gt;</code></a>): At this point of the installation, all of the files have already
been copied. If an error happens, instead of aborting the installation, it just prevents the execution of the remaining actions in that list
and it is reported. This also applies to the <a class="link" href="apd.html#postUninstallerCreationActionList"><code class="literal">&lt;postUninstallerCreationActionList&gt;</code></a> and <a class="link" href="apd.html#finalPageActionList"><code class="literal">&lt;finalPageActionList&gt;</code></a> lists.
</li><li class="listitem">
Pre and Post Uninstallation Actions (<a class="link" href="apd.html#preUninstallationActionList"><code class="literal">&lt;preUninstallationActionList&gt;</code></a>,<a class="link" href="apd.html#postUninstallationActionList"><code class="literal">&lt;postUninstallationActionList&gt;</code></a>): If an error occurs in these action lists, it aborts the rest of the actions in the list but it is not reported, just logged in the uninstallation log.
</li><li class="listitem">
Pre Show Help Actions (<a class="link" href="apd.html#preShowHelpActionList"><code class="literal">&lt;preShowHelpActionList&gt;</code></a>): Any error in this action list will just skip the rest of actions in the list and will be silently ignored
</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_cleaning_and_rollback_directory_restoration"></a>Cleaning and Rollback Directory Restoration</h4></div></div></div><p>When an installation is aborted during the installation of files, all of the unpacked files will be automatically deleted, and if the rollback functionality was enabled using <code class="literal">&lt;enableRollback&gt;1&lt;/enableRollback&gt;</code>, the old files overwritten by the process will be restored.</p><p>Take into account that files manually deleted, copied or moved will not be automatically handled so the <a class="link" href="apd.html#installationAbortedActionList"><code class="literal">&lt;installationAbortedActionList&gt;</code></a> must be used for this purpose.</p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_list_of_available_actions"></a>8.7. List of Available Actions</h3></div></div></div><h4><a id="http_actions_group"></a>HTTP Actions</h4><h5><a id="_http_get_request"></a>HTTP GET Request</h5><p>Access a URL and save the result into a file.
The allowed properties in the <a class="link" href="apa.html#httpGet"><code class="literal">&lt;httpGet&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#httpGet.filename"><code class="literal">&lt;filename&gt;</code></a>: Filename to which to save the result to
</li><li class="listitem">
<a class="link" href="apa.html#httpGet.password"><code class="literal">&lt;password&gt;</code></a>: Password for URLs that require authentication
</li><li class="listitem">
<a class="link" href="apa.html#httpGet.url"><code class="literal">&lt;url&gt;</code></a>: URL to launch
</li><li class="listitem">
<a class="link" href="apa.html#httpGet.username"><code class="literal">&lt;username&gt;</code></a>: Username for URLs that require authentication
</li><li class="listitem">
<a class="link" href="apa.html#httpGet.httpHeadersList"><code class="literal">&lt;httpHeadersList&gt;</code></a>: List of headers for the request
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Download a readme file. </strong>
</p><pre class="programlisting">&lt;httpGet&gt;
    &lt;filename&gt;${installdir}/README.txt&lt;/filename&gt;
    &lt;url&gt;http://www.example.com/docs/readme.txt&lt;/url&gt;
    &lt;username&gt;foo&lt;/username&gt;
    &lt;password&gt;bar&lt;/password&gt;
&lt;/httpGet&gt;</pre><p>
</p><p><strong>Display a progress bar while downloading a big file. </strong>
</p><pre class="programlisting">&lt;showProgressDialog&gt;
    &lt;title&gt;Downloading files&lt;/title&gt;
    &lt;actionList&gt;
        &lt;httpGet&gt;
            &lt;filename&gt;${system_temp_directory}/ib.run&lt;/filename&gt;
            &lt;url&gt;http://installbuilder.bitrock.com/installbuilder-enterprise-16.3.0-linux-installer.run&lt;/url&gt;
        &lt;/httpGet&gt;
    &lt;/actionList&gt;
&lt;/showProgressDialog&gt;</pre><p>
</p><p><strong>Checking the HTTP status code of a httpGet request. </strong>
</p><pre class="programlisting">&lt;httpGet&gt;
    &lt;filename&gt;${installdir}/README.txt&lt;/filename&gt;
    &lt;url&gt;http://www.example.com/docs/readme.txt&lt;/url&gt;
&lt;/httpGet&gt;
&lt;throwError&gt;
    &lt;text&gt;Failed to retrieve remote file&lt;/text&gt;
    &lt;ruleList&gt;
        &lt;compareText text="${installer_http_code}" logic="does_not_equal" value="200"/&gt;
    &lt;/ruleList&gt;
&lt;/throwError&gt;</pre><p>
</p><p><strong>Adding custom headers to the HTTP request. </strong>
</p><pre class="programlisting">&lt;httpGet&gt;
    &lt;filename&gt;${installdir}/welcome.txt&lt;/filename&gt;
    &lt;url&gt;http://www.example.com/index.php&lt;/url&gt;
    &lt;httpHeadersList&gt;
        &lt;httpHeader&gt;
            &lt;name&gt;Accept-Language&lt;/name&gt;
            &lt;value&gt;en-US,en;q=0.8,es;q=0.6&lt;/value&gt;
        &lt;/httpHeader&gt;
    &lt;/httpHeadersList&gt;
&lt;/httpGet&gt;</pre><p>
</p><p><code class="literal">Additional Examples:</code>
<a class="link" href="ar01s18.html#snip4707255">Example 1</a>, <a class="link" href="ar01s08.html#snip5543915">Example 2</a></p><h5><a id="_http_post_request"></a>HTTP POST Request</h5><p>Access a URL using HTTP POST and save the result into a file.
The allowed properties in the <a class="link" href="apa.html#httpPost"><code class="literal">&lt;httpPost&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#httpPost.filename"><code class="literal">&lt;filename&gt;</code></a>: Filename to which to save the result to
</li><li class="listitem">
<a class="link" href="apa.html#httpPost.password"><code class="literal">&lt;password&gt;</code></a>: Password for URLs that require authentication
</li><li class="listitem">
<a class="link" href="apa.html#httpPost.url"><code class="literal">&lt;url&gt;</code></a>: URL to launch
</li><li class="listitem">
<a class="link" href="apa.html#httpPost.username"><code class="literal">&lt;username&gt;</code></a>: Username for URLs that require authentication
</li><li class="listitem">
<a class="link" href="apa.html#httpPost.httpHeadersList"><code class="literal">&lt;httpHeadersList&gt;</code></a>: List of headers for the request
</li><li class="listitem">
<a class="link" href="apa.html#httpPost.queryParameterList"><code class="literal">&lt;queryParameterList&gt;</code></a>: List of variables that will be included in the POST query.
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Query your server to validate user provided input. </strong>
</p><pre class="programlisting">&lt;parameterGroup&gt;
   &lt;name&gt;credentials&lt;/name&gt;
   &lt;title&gt;Account Credentials&lt;/title&gt;
   &lt;explanation&gt;Introduce Your account credentials&lt;/explanation&gt;
   &lt;parameterList&gt;
      &lt;stringParameter name="username" description="Username:"/&gt;
      &lt;passwordParameter name="password" description="Password:"/&gt;
      &lt;stringParameter name="key" description="License key:"/&gt;
   &lt;/parameterList&gt;
   &lt;validationActionList&gt;
      &lt;httpPost&gt;
        &lt;url&gt;http://www.example.com/register.php&lt;/url&gt;
        &lt;filename&gt;${installdir}/result&lt;/filename&gt;
        &lt;queryParameterList&gt;
          &lt;queryParameter name="name" value="${username}"/&gt;
          &lt;queryParameter name="pass" value="${password}"/&gt;
          &lt;queryParameter name="license" value="${key}"/&gt;
        &lt;/queryParameterList&gt;
      &lt;/httpPost&gt;
      &lt;readFile path="${installdir}/result" name="result"/&gt;
      &lt;deleteFile path="${installdir}/result"/&gt;
      &lt;throwError&gt;
        &lt;text&gt;The provided credentials are not valid&lt;/text&gt;
        &lt;ruleList&gt;
          &lt;compareText&gt;
            &lt;text&gt;${result}&lt;/text&gt;
            &lt;logic&gt;does_not_contain&lt;/logic&gt;
            &lt;value&gt;OK&lt;/value&gt;
          &lt;/compareText&gt;
        &lt;/ruleList&gt;
      &lt;/throwError&gt;
   &lt;/validationActionList&gt;
&lt;/parameterGroup&gt;</pre><p>
</p><p><strong>Checking the HTTP status code of a httpPost request. </strong>
</p><pre class="programlisting">&lt;httpPost&gt;
    &lt;url&gt;http://www.example.com/register.php&lt;/url&gt;
    &lt;filename&gt;${installdir}/result&lt;/filename&gt;
    &lt;queryParameterList&gt;
        &lt;queryParameter name="name" value="${username}"/&gt;
        &lt;queryParameter name="pass" value="${password}"/&gt;
        &lt;queryParameter name="license" value="${key}"/&gt;
    &lt;/queryParameterList&gt;
&lt;/httpPost&gt;
&lt;throwError&gt;
    &lt;text&gt;Could not register installation&lt;/text&gt;
    &lt;ruleList&gt;
        &lt;compareText text="${installer_http_code}" logic="does_not_equal" value="200"/&gt;
    &lt;/ruleList&gt;
&lt;/throwError&gt;</pre><p>
</p><p><code class="literal">Additional Examples:</code>
<a class="link" href="ar01s02.html#snip3666467">Example 1</a>, <a class="link" href="ar01s28.html#snip8096471">Example 2</a>, <a class="link" href="ar01s07.html#snip9011535">Example 3</a></p><h5><a id="_configure_proxy"></a>Configure proxy</h5><p>Configure a proxy to be used by the http actions (<a class="link" href="apa.html#httpGet"><code class="literal">&lt;httpGet&gt;</code></a> and <a class="link" href="apa.html#httpPost"><code class="literal">&lt;httpPost&gt;</code></a>).</p><p>The allowed properties in the <a class="link" href="apa.html#httpProxyInit"><code class="literal">&lt;httpProxyInit&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#httpProxyInit.exclude"><code class="literal">&lt;exclude&gt;</code></a>: Space separated list of patters for urls that will be excluded from the proxy configuration
</li><li class="listitem">
<a class="link" href="apa.html#httpProxyInit.password"><code class="literal">&lt;password&gt;</code></a>: Proxy server password
</li><li class="listitem">
<a class="link" href="apa.html#httpProxyInit.port"><code class="literal">&lt;port&gt;</code></a>: Proxy server port
</li><li class="listitem">
<a class="link" href="apa.html#httpProxyInit.server"><code class="literal">&lt;server&gt;</code></a>: Proxy server url
</li><li class="listitem">
<a class="link" href="apa.html#httpProxyInit.username"><code class="literal">&lt;username&gt;</code></a>: Proxy server username
</li></ul></div><p>If no properties are defined, the action will try to aoutodetect the proxy configured in the system.</p><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Ask the user to configure the proxy. </strong>
</p><pre class="programlisting">&lt;parameterGroup&gt;
   &lt;name&gt;proxyConfiguration&lt;/name&gt;
   &lt;title&gt;Configuration&lt;/title&gt;
   &lt;explanation&gt;&lt;/explanation&gt;
   &lt;parameterList&gt;
      &lt;stringParameter name="username" description="Username:"/&gt;
      &lt;passwordParameter name="password" description="Password:"/&gt;
      &lt;parameterGroup&gt;
        &lt;name&gt;proxyServer&lt;/name&gt;
        &lt;orientation&gt;horizontal&lt;/orientation&gt;
        &lt;parameterList&gt;
          &lt;stringParameter name="server" description="Server:     "/&gt;
          &lt;stringParameter name="port" description="Port:" width="5"/&gt;
        &lt;/parameterList&gt;
      &lt;/parameterGroup&gt;
   &lt;/parameterList&gt;
   &lt;postShowPageActionList&gt;
      &lt;httpProxyInit&gt;
         &lt;username&gt;${username}&lt;/username&gt;
         &lt;password&gt;${password}&lt;/password&gt;
         &lt;server&gt;${server}&lt;/server&gt;
         &lt;port&gt;${port}&lt;/port&gt;
      &lt;/httpProxyInit&gt;
   &lt;/postShowPageActionList&gt;
&lt;/parameterGroup&gt;</pre><p>
</p><p><strong>Use system proxy configuration. </strong>
</p><pre class="programlisting">&lt;httpProxyInit/&gt;</pre><p>
</p><h5><a id="_encode_url"></a>Encode URL</h5><p>Encode a given text using URL formatting specifications and place the result in a variable.
The allowed properties in the <a class="link" href="apa.html#urlEncode"><code class="literal">&lt;urlEncode&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#urlEncode.text"><code class="literal">&lt;text&gt;</code></a>: Text to encode
</li><li class="listitem">
<a class="link" href="apa.html#urlEncode.variable"><code class="literal">&lt;variable&gt;</code></a>: Variable to store the result in
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Encode text. </strong>
</p><pre class="programlisting">&lt;urlEncode&gt;
    &lt;text&gt;Some long text to
send to your server containg a lot of
forbiden characters such as ? [ and @&lt;/text&gt;
    &lt;variable&gt;encodedText&lt;/variable&gt;
&lt;/urlEncode&gt;</pre><p>
</p><p>In the example above, the encoded text would be <code class="literal">Some+long+text+to%0d%0asend+to+your+server+containg+a+lot+of%0d%0aforbiden+characters+such+as+%3f+%5b+and+%40</code>, ready to send to our server using an <a class="link" href="apa.html#httpPost"><code class="literal">&lt;httpPost&gt;</code></a> action.</p><h5><a id="_decode_url"></a>Decode URL</h5><p>Decode a given text using URL formatting specifications and place the result in a variable.
The allowed properties in the <a class="link" href="apa.html#urlDecode"><code class="literal">&lt;urlDecode&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#urlDecode.text"><code class="literal">&lt;text&gt;</code></a>: Text to decode
</li><li class="listitem">
<a class="link" href="apa.html#urlDecode.variable"><code class="literal">&lt;variable&gt;</code></a>: Variable to store the result in
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Decode url. </strong>
</p><pre class="programlisting">&lt;urlDecode&gt;
   &lt;text&gt;Some+long+text+to%0d%0asend+to+your+server+containg+a+lot+of%0d%0aforbiden+characters+such+as+%3f+%5b+and+%40&lt;/text&gt;
   &lt;variable&gt;decodedText&lt;/variable&gt;
&lt;/urlDecode&gt;</pre><p>
</p><p>The action will store the below text in the variable <code class="literal">${decodedText}</code>:</p><pre class="screen">Some long text to
send to your server containg a lot of
forbiden characters such as ? [ and @</pre><h5><a id="_launch_browser"></a>Launch Browser</h5><p>Launch the default web browser with a given URL.
The allowed properties in the <a class="link" href="apa.html#launchBrowser"><code class="literal">&lt;launchBrowser&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#launchBrowser.url"><code class="literal">&lt;url&gt;</code></a>: URL of the page to be shown.
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Visit your website at the end of the installation. </strong>
</p><pre class="programlisting">&lt;finalPageActionList&gt;
   &lt;launchBrowser&gt;
     &lt;url&gt;www.downloads.com/optional&lt;/url&gt;
     &lt;progressText&gt;Would you like to visit our website to download
     additional modules?&lt;/progressText&gt;
   &lt;/launchBrowser&gt;
&lt;/finalPageActionList&gt;</pre><p>
</p><p><code class="literal">Additional Examples:</code>
<a class="link" href="ar01s07.html#snip5632118">Example 1</a>, <a class="link" href="ar01s02.html#snip2497531">Example 2</a>, <a class="link" href="ar01s25.html#snip9405708">Example 3</a></p><h4><a id="fileManipulation_actions_group"></a>File Manipulation Actions</h4><h5><a id="_dos_to_unix_file_conversion"></a>DOS to Unix File Conversion</h5><p>Convert plain text files in DOS/Mac format to Unix format. It is specially useful to fix Unix shell scripts modified on Windows.</p><p>The allowed properties in the <a class="link" href="apa.html#dos2unix"><code class="literal">&lt;dos2unix&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#dos2unix.excludeFiles"><code class="literal">&lt;excludeFiles&gt;</code></a>: Patterns to exclude files
</li><li class="listitem">
<a class="link" href="apa.html#dos2unix.files"><code class="literal">&lt;files&gt;</code></a>: File patterns to apply action to
</li><li class="listitem">
<a class="link" href="apa.html#dos2unix.matchHiddenFiles"><code class="literal">&lt;matchHiddenFiles&gt;</code></a>: Whether or not to attempt to match Windows hidden files
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Convert all shell scripts to Unix line endings. </strong>
</p><pre class="programlisting">&lt;dos2unix&gt;
    &lt;files&gt;${installdir}/scripts/*.sh&lt;/files&gt;
&lt;/dos2unix&gt;</pre><p>
</p><h5><a id="_unix_to_dos_file_conversion"></a>Unix to DOS File Conversion</h5><p>Convert plain text files in Unix format to DOS format. It is specially useful to fix Windows bat files modified on Unix.</p><p>The allowed properties in the <a class="link" href="apa.html#unix2dos"><code class="literal">&lt;unix2dos&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#unix2dos.excludeFiles"><code class="literal">&lt;excludeFiles&gt;</code></a>: Patterns to exclude files
</li><li class="listitem">
<a class="link" href="apa.html#unix2dos.files"><code class="literal">&lt;files&gt;</code></a>: File patterns to apply action to
</li><li class="listitem">
<a class="link" href="apa.html#unix2dos.matchHiddenFiles"><code class="literal">&lt;matchHiddenFiles&gt;</code></a>: Whether or not to attempt to match Windows hidden files
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Convert all batch scripts to Unix line endings. </strong>
</p><pre class="programlisting">&lt;unix2dos&gt;
  &lt;files&gt;${installdir}/scripts/*.bat&lt;/files&gt;
&lt;/unix2dos&gt;</pre><p>
</p><h5><a id="_read_value_from_xml_file"></a>Read value from XML file</h5><p>Read value of element or attribute from an XML file
The allowed properties in the <a class="link" href="apa.html#xmlFileGet"><code class="literal">&lt;xmlFileGet&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#xmlFileGet.attribute"><code class="literal">&lt;attribute&gt;</code></a>: If present, the action will refer to the attribute instead of the element
</li><li class="listitem">
<a class="link" href="apa.html#xmlFileGet.element"><code class="literal">&lt;element&gt;</code></a>: XPath expression pointing to the selected element
</li><li class="listitem">
<a class="link" href="apa.html#xmlFileGet.file"><code class="literal">&lt;file&gt;</code></a>: Path to XML file
</li><li class="listitem">
<a class="link" href="apa.html#xmlFileGet.variable"><code class="literal">&lt;variable&gt;</code></a>: Variable where to start the result
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Extract a property from an Info.plist file. </strong>If you have an Info.plist file with contents:</p><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE plist PUBLIC "-//Apple Computer//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd"&gt;
&lt;plist version="1.0"&gt;
   &lt;dict&gt;
        &lt;key&gt;CFBundleDevelopmentRegion&lt;/key&gt;
        &lt;string&gt;English&lt;/string&gt;
        &lt;key&gt;CFBundleExecutable&lt;/key&gt;
        &lt;string&gt;installbuilder.sh&lt;/string&gt;
        &lt;key&gt;CFBundleIdentifier&lt;/key&gt;
        &lt;string&gt;com.bitrock.installbuilder&lt;/string&gt;
        &lt;key&gt;CFBundleInfoDictionaryVersion&lt;/key&gt;
        &lt;string&gt;6.0&lt;/string&gt;
        ...
   &lt;/dict&gt;
&lt;/plist&gt;</pre><p>You can access the <code class="literal">CFBundleExecutable</code> associated string using:</p><pre class="programlisting">&lt;xmlFileGet&gt;
    &lt;attribute&gt;&lt;/attribute&gt;
    &lt;element&gt;/plist/dict[1]/string[preceding-sibling::key[1]/text()="CFBundleExecutable"]&lt;/element&gt;
    &lt;file&gt;${installdir}/some.app/Contents/Info.plist&lt;/file&gt;
    &lt;variable&gt;CFBundleExecutable&lt;/variable&gt;
&lt;/xmlFileGet&gt;</pre><p></p><p><strong>Extract an attribute from an XML. </strong>If instead of working with XML elements you need to read an attribute, like the <code class="literal">&lt;progressText&gt;</code> in the below InstallBuider action:</p><pre class="programlisting">&lt;actionList&gt;
  &lt;runProgram progressText="Launch ${project.fullName}" &gt;
    &lt;program&gt;${installdir}/bin/app.exe&lt;/program&gt;
    &lt;programArguments&gt;&amp;amp;&lt;/programArguments&gt;
  &lt;/runProgram&gt;
&lt;/actionList&gt;</pre><p>You can use:</p><pre class="programlisting">&lt;xmlFileGet&gt;
    &lt;!-- Specify the XML element containing the attribute --&gt;
    &lt;element&gt;/actionList/runProgram&lt;/element&gt;
    &lt;!-- Specify the attribute --&gt;
    &lt;attribute&gt;progressText&lt;/attribute&gt;
    &lt;file&gt;${build_project_directory}/actionList.xml&lt;/file&gt;
    &lt;variable&gt;progressText&lt;/variable&gt;
&lt;/xmlFileGet&gt;</pre><p></p><h5><a id="_set_value_in_xml_file"></a>Set value in XML file</h5><p>Set the value of an element or attribute in an XML file
The allowed properties in the <a class="link" href="apa.html#xmlFileSet"><code class="literal">&lt;xmlFileSet&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#xmlFileSet.attribute"><code class="literal">&lt;attribute&gt;</code></a>: If present, the action will refer to the attribute instead of the element
</li><li class="listitem">
<a class="link" href="apa.html#xmlFileSet.element"><code class="literal">&lt;element&gt;</code></a>: XPath expression pointing to the selected element
</li><li class="listitem">
<a class="link" href="apa.html#xmlFileSet.file"><code class="literal">&lt;file&gt;</code></a>: Path to XML file
</li><li class="listitem">
<a class="link" href="apa.html#xmlFileSet.value"><code class="literal">&lt;value&gt;</code></a>: Value to store in element or attribute
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Modify an item in a XML list. </strong>To modify an entry in a XML address book:</p><pre class="programlisting">&lt;addressBook&gt;
   &lt;addressList&gt;
      &lt;address name="Jhon" email="jhon@myemail.com"/&gt;
      &lt;address name="joseph" email="joseph@myemail.com"/&gt;
   &lt;/addressList&gt;
&lt;/addressBook&gt;</pre><p>You can use:</p><pre class="programlisting">&lt;xmlFileSet&gt;
    &lt;attribute&gt;email&lt;/attribute&gt;
    &lt;element&gt;/addressBook/addressList/address[@name="Jhon"]&lt;/element&gt;
    &lt;file&gt;${installdir}/config/address.xml&lt;/file&gt;
    &lt;value&gt;jhonhome@otheremail.com&lt;/value&gt;
&lt;/xmlFileSet&gt;</pre><h5><a id="_comment_subtree_of_xml_file"></a>Comment subtree of XML file</h5><p>Comment entire subtree of an XML file
The allowed properties in the <a class="link" href="apa.html#xmlFileCommentElement"><code class="literal">&lt;xmlFileCommentElement&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#xmlFileCommentElement.element"><code class="literal">&lt;element&gt;</code></a>: XPath expression pointing to the selected element
</li><li class="listitem">
<a class="link" href="apa.html#xmlFileCommentElement.file"><code class="literal">&lt;file&gt;</code></a>: Path to XML file
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Comment an entry in an XML list. </strong>To remove (commenting it) one of the entries in the XML address book from our previous example:</p><pre class="programlisting">&lt;xmlFileCommentElement&gt;
    &lt;element&gt;/addressBook/addressList/address[@name="joseph"]&lt;/element&gt;
    &lt;file&gt;${installdir}/config/address.xml&lt;/file&gt;
&lt;/xmlFileCommentElement&gt;</pre><h5><a id="_read_file_contents"></a>Read File Contents</h5><p>Read the contents of a file and save it in a variable.
The allowed properties in the <a class="link" href="apa.html#readFile"><code class="literal">&lt;readFile&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#readFile.encoding"><code class="literal">&lt;encoding&gt;</code></a>: Encoding of the text file
</li><li class="listitem">
<a class="link" href="apa.html#readFile.endOfLineConversion"><code class="literal">&lt;endOfLineConversion&gt;</code></a>: End Of Line Conversion
</li><li class="listitem">
<a class="link" href="apa.html#readFile.name"><code class="literal">&lt;name&gt;</code></a>: Variable to which to save the file contents
</li><li class="listitem">
<a class="link" href="apa.html#readFile.path"><code class="literal">&lt;path&gt;</code></a>: Path to the file you wish to read the contents from
</li><li class="listitem">
<a class="link" href="apa.html#readFile.removeBOM"><code class="literal">&lt;removeBOM&gt;</code></a>: Whether or not to remove or not Byte Order Mark on Unicode files
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Read a packed .txt file and display it in the <a class="link" href="apd.html#finalPageActionList"><code class="literal">&lt;finalPageActionList&gt;</code></a>. </strong>
</p><pre class="programlisting">&lt;finalPageActionList&gt;
   &lt;actionGroup progressText="View readme file"&gt;
      &lt;actionList&gt;
        &lt;readFile&gt;
          &lt;name&gt;text&lt;/name&gt;
          &lt;path&gt;${installdir}/readmes/README-1.txt&lt;/path&gt;
        &lt;/readFile&gt;
        &lt;showText&gt;
          &lt;text&gt;${text}&lt;/text&gt;
          &lt;title&gt;README&lt;/title&gt;
        &lt;/showText&gt;
      &lt;/actionList&gt;
   &lt;/actionGroup&gt;
&lt;/finalPageActionList&gt;</pre><p>
</p><p><code class="literal">Additional Examples:</code>
<a class="link" href="ar01s02.html#snip3666467">Example 1</a>, <a class="link" href="ar01s28.html#snip8096471">Example 2</a>, <a class="link" href="ar01s12.html#snip3626356">Example 3</a></p><h5><a id="_write_text_to_file"></a>Write Text to File</h5><p>Create or replace a file with a certain text content.
The allowed properties in the <a class="link" href="apa.html#writeFile"><code class="literal">&lt;writeFile&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#writeFile.encoding"><code class="literal">&lt;encoding&gt;</code></a>: Encoding of the text file
</li><li class="listitem">
<a class="link" href="apa.html#writeFile.endOfLineConversion"><code class="literal">&lt;endOfLineConversion&gt;</code></a>: End Of Line Conversion
</li><li class="listitem">
<a class="link" href="apa.html#writeFile.path"><code class="literal">&lt;path&gt;</code></a>: Path of the file to be created or replaced
</li><li class="listitem">
<a class="link" href="apa.html#writeFile.text"><code class="literal">&lt;text&gt;</code></a>: Text to write
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Write a summary of the installation. </strong>
</p><pre class="programlisting">&lt;writeFile&gt;
    &lt;path&gt;${installdir}/summary.txt&lt;/path&gt;
    &lt;!-- &amp;#xA; is the XML escape sequence for
    the line break --&gt;
    &lt;text&gt;Username: ${username}
Password: *******
Installation Type: ${project.installationType}
IP: ${ip}
Port: ${port}&lt;/text&gt;
&lt;/writeFile&gt;</pre><p>
</p><p><code class="literal">Additional Examples:</code>
<a class="link" href="ar01s23.html#snip9625970">Example 1</a>, <a class="link" href="ar01s23.html#snip2099941">Example 2</a>, <a class="link" href="ar01s15.html#snip9112944">Example 3</a></p><h5><a id="_append_text_to_file"></a>Append Text to File</h5><p>Append text to a file. If the file does not exist, it will be created.
The allowed properties in the <a class="link" href="apa.html#addTextToFile"><code class="literal">&lt;addTextToFile&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#addTextToFile.encoding"><code class="literal">&lt;encoding&gt;</code></a>: Encoding of the text file
</li><li class="listitem">
<a class="link" href="apa.html#addTextToFile.endOfLineConversion"><code class="literal">&lt;endOfLineConversion&gt;</code></a>: End Of Line Conversion
</li><li class="listitem">
<a class="link" href="apa.html#addTextToFile.file"><code class="literal">&lt;file&gt;</code></a>: Path to the file
</li><li class="listitem">
<a class="link" href="apa.html#addTextToFile.insertAt"><code class="literal">&lt;insertAt&gt;</code></a>: Whether to insert the text at the beginning or at the end of the file
</li><li class="listitem">
<a class="link" href="apa.html#addTextToFile.text"><code class="literal">&lt;text&gt;</code></a>: Text to append
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Append information to a file in an upgrade installation: </strong>
</p><pre class="programlisting">&lt;addTextToFile&gt;
    &lt;file&gt;${installdir}/ChangeLog&lt;/file&gt;
    &lt;text&gt;* Fixed application failing to start from directory with spaces.
* Added new plugins
* Removed unnecessary libraries
* Reworked UI
&lt;/text&gt;
    &lt;ruleList&gt;
       &lt;compareText text="${project.installationType}" logic="equals" value="upgrade"/&gt;
       &lt;fileExists path="${installdir}/ChangeLog"/&gt;
    &lt;/ruleList&gt;
&lt;/addTextToFile&gt;</pre><p>
</p><p><code class="literal">Additional Examples:</code>
<a class="link" href="ar01s06.html#snip4531647">Example 1</a>, <a class="link" href="ar01s04.html#snip9309425">Example 2</a>, <a class="link" href="ar01s01.html#snip7886722">Example 3</a></p><h5><a id="_set_ini_file_property"></a>Set INI File Property</h5><p>Set property values of a INI file. If the file does not exists it will be created.</p><p>The allowed properties in the <a class="link" href="apa.html#iniFileSet"><code class="literal">&lt;iniFileSet&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#iniFileSet.file"><code class="literal">&lt;file&gt;</code></a>: Path to INI file
</li><li class="listitem">
<a class="link" href="apa.html#iniFileSet.key"><code class="literal">&lt;key&gt;</code></a>: Property Key
</li><li class="listitem">
<a class="link" href="apa.html#iniFileSet.section"><code class="literal">&lt;section&gt;</code></a>: INI section
</li><li class="listitem">
<a class="link" href="apa.html#iniFileSet.value"><code class="literal">&lt;value&gt;</code></a>: Property Value
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Configure MySQL. </strong>
</p><pre class="programlisting">&lt;iniFileSet&gt;
    &lt;file&gt;${installdir}/mysql/my.cnf&lt;/file&gt;
    &lt;section&gt;mysqld&lt;/section&gt;
    &lt;key&gt;port&lt;/key&gt;
    &lt;value&gt;${port}&lt;/value&gt;
&lt;/iniFileSet&gt;
&lt;iniFileSet&gt;
    &lt;file&gt;${installdir}/mysql/my.cnf&lt;/file&gt;
    &lt;section&gt;mysqld&lt;/section&gt;
    &lt;key&gt;socket&lt;/key&gt;
    &lt;value&gt;/tmp/mysql.sock&lt;/value&gt;
&lt;/iniFileSet&gt;
&lt;iniFileSet&gt;
    &lt;file&gt;${installdir}/mysql/my.cnf&lt;/file&gt;
    &lt;section&gt;client&lt;/section&gt;
    &lt;key&gt;password&lt;/key&gt;
    &lt;value&gt;somePassWord!&lt;/value&gt;
&lt;/iniFileSet&gt;</pre><p>
</p><p><code class="literal">Additional Examples:</code>
<a class="link" href="ar01s11.html#snip3158191">Example 1</a></p><h5><a id="_get_ini_file_property"></a>Get INI File Property</h5><p>Extract property values out of a INI file. If the key does not exists, the variable will be set to empty.</p><p>The allowed properties in the <a class="link" href="apa.html#iniFileGet"><code class="literal">&lt;iniFileGet&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#iniFileGet.file"><code class="literal">&lt;file&gt;</code></a>: Path to INI file
</li><li class="listitem">
<a class="link" href="apa.html#iniFileGet.key"><code class="literal">&lt;key&gt;</code></a>: Property Key
</li><li class="listitem">
<a class="link" href="apa.html#iniFileGet.section"><code class="literal">&lt;section&gt;</code></a>: INI section
</li><li class="listitem">
<a class="link" href="apa.html#iniFileGet.variable"><code class="literal">&lt;variable&gt;</code></a>: Variable name to save property to
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Read PHP configuration. </strong>
</p><pre class="programlisting">&lt;iniFileGet&gt;
    &lt;file&gt;${installdir}/php/etc/php.ini&lt;/file&gt;
    &lt;key&gt;include_path&lt;/key&gt;
    &lt;section&gt;PHP&lt;/section&gt;
    &lt;variable&gt;php_include_path&lt;/variable&gt;
&lt;/iniFileGet&gt;</pre><p>
</p><p><code class="literal">Additional Examples:</code>
<a class="link" href="ar01s22.html#snip2282278">Example 1</a></p><h5><a id="_write_property_file_value"></a>Write Property File Value</h5><p>Writes out property values to a properties file, creating a new file if it does not exist.
The allowed properties in the <a class="link" href="apa.html#propertiesFileSet"><code class="literal">&lt;propertiesFileSet&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#propertiesFileSet.encoding"><code class="literal">&lt;encoding&gt;</code></a>: Encoding of the text file
</li><li class="listitem">
<a class="link" href="apa.html#propertiesFileSet.endOfLineConversion"><code class="literal">&lt;endOfLineConversion&gt;</code></a>: End Of Line Conversion
</li><li class="listitem">
<a class="link" href="apa.html#propertiesFileSet.file"><code class="literal">&lt;file&gt;</code></a>: Path to the property file
</li><li class="listitem">
<a class="link" href="apa.html#propertiesFileSet.key"><code class="literal">&lt;key&gt;</code></a>: Property key
</li><li class="listitem">
<a class="link" href="apa.html#propertiesFileSet.value"><code class="literal">&lt;value&gt;</code></a>: Value to set the key to.
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Update the version of the installed application in an upgrade. </strong>
</p><pre class="programlisting">&lt;propertiesFileSet&gt;
    &lt;file&gt;${installdir}/installation.properties&lt;/file&gt;
    &lt;key&gt;version&lt;/key&gt;
    &lt;value&gt;${project.version}&lt;/value&gt;
&lt;/propertiesFileSet&gt;</pre><p>
</p><h5><a id="_get_property_file_value"></a>Get Property File Value</h5><p>Extract property values out of a properties file.
The allowed properties in the <a class="link" href="apa.html#propertiesFileGet"><code class="literal">&lt;propertiesFileGet&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#propertiesFileGet.encoding"><code class="literal">&lt;encoding&gt;</code></a>: Encoding of the text file
</li><li class="listitem">
<a class="link" href="apa.html#propertiesFileGet.endOfLineConversion"><code class="literal">&lt;endOfLineConversion&gt;</code></a>: End Of Line Conversion
</li><li class="listitem">
<a class="link" href="apa.html#propertiesFileGet.file"><code class="literal">&lt;file&gt;</code></a>: Path to the property file
</li><li class="listitem">
<a class="link" href="apa.html#propertiesFileGet.key"><code class="literal">&lt;key&gt;</code></a>: Property key
</li><li class="listitem">
<a class="link" href="apa.html#propertiesFileGet.variable"><code class="literal">&lt;variable&gt;</code></a>: Variable name to save property to
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Check the version of an existing installation to upgrade and abort if greater than the current. </strong>
</p><pre class="programlisting">&lt;propertiesFileGet&gt;
   &lt;file&gt;${installdir}/installation.properties&lt;/file&gt;
   &lt;key&gt;version&lt;/key&gt;
   &lt;variable&gt;installedVersion&lt;/variable&gt;
&lt;/propertiesFileGet&gt;
&lt;throwError text="The installed application is up to date. Aborting"&gt;
   &lt;ruleList&gt;
     &lt;compareVersions&gt;
       &lt;version1&gt;${installedVersion}&lt;/version1&gt;
       &lt;logic&gt;greater_or_equal&lt;/logic&gt;
       &lt;version2&gt;${project.version}&lt;/version2&gt;
     &lt;/compareVersions&gt;
   &lt;/ruleList&gt;
&lt;/throwError&gt;</pre><p>
</p><h5><a id="_read_value_from_yaml_file"></a>Read value from YAML file</h5><p>Read value of element from a YAML file
The allowed properties in the <a class="link" href="apa.html#yamlFileGet"><code class="literal">&lt;yamlFileGet&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#yamlFileGet.element"><code class="literal">&lt;element&gt;</code></a>: Path expression pointing to the selected element
</li><li class="listitem">
<a class="link" href="apa.html#yamlFileGet.file"><code class="literal">&lt;file&gt;</code></a>: Path to YAML file
</li><li class="listitem">
<a class="link" href="apa.html#yamlFileGet.variable"><code class="literal">&lt;variable&gt;</code></a>: Variable where to start the result
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Retrieve path to database file from a YAML file. </strong>To retrieve path to production database in the following YAML file to <code class="literal">application_database_path</code> variable:</p><pre class="programlisting">production:
  adapter: sqlite3
  database: db/production.sqlite3
  pool: 5
  timeout: 5000</pre><p>You can use:</p><pre class="programlisting">&lt;yamlFileGet&gt;
    &lt;element&gt;/production/database&lt;/element&gt;
    &lt;file&gt;${installdir}/config/database.yml&lt;/file&gt;
    &lt;variable&gt;application_database_path&lt;/variable&gt;
&lt;/yamlFileGet&gt;</pre><h5><a id="_set_value_in_yaml_file"></a>Set value in YAML file</h5><p>Set the value of an element in a YAML file
The allowed properties in the <a class="link" href="apa.html#yamlFileSet"><code class="literal">&lt;yamlFileSet&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#yamlFileSet.element"><code class="literal">&lt;element&gt;</code></a>: Path expression pointing to the selected element
</li><li class="listitem">
<a class="link" href="apa.html#yamlFileSet.file"><code class="literal">&lt;file&gt;</code></a>: Path to YAML file
</li><li class="listitem">
<a class="link" href="apa.html#yamlFileSet.value"><code class="literal">&lt;value&gt;</code></a>: Value to store in element
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Modify an item in a YAML file. </strong>To modify path to database in a YAML file:</p><pre class="programlisting">production:
  adapter: sqlite3
  database: db/production.sqlite3
  pool: 5
  timeout: 5000</pre><p>You can use:</p><pre class="programlisting">&lt;yamlFileSet&gt;
    &lt;element&gt;/production/database&lt;/element&gt;
    &lt;file&gt;${installdir}/config/database.yml&lt;/file&gt;
    &lt;value&gt;db/otherpath.sqlite3&lt;/value&gt;
&lt;/yamlFileSet&gt;</pre><h5><a id="_substitute_text_in_file"></a>Substitute Text in File</h5><p>Substitute a value in a file.
The allowed properties in the <a class="link" href="apa.html#substitute"><code class="literal">&lt;substitute&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#substitute.encoding"><code class="literal">&lt;encoding&gt;</code></a>: Encoding of the files to substitute
</li><li class="listitem">
<a class="link" href="apa.html#substitute.excludeFiles"><code class="literal">&lt;excludeFiles&gt;</code></a>: Patterns to exclude files
</li><li class="listitem">
<a class="link" href="apa.html#substitute.files"><code class="literal">&lt;files&gt;</code></a>: File patterns to apply action to
</li><li class="listitem">
<a class="link" href="apa.html#substitute.matchHiddenFiles"><code class="literal">&lt;matchHiddenFiles&gt;</code></a>: Whether or not to attempt to match Windows hidden files
</li><li class="listitem">
<a class="link" href="apa.html#substitute.type"><code class="literal">&lt;type&gt;</code></a>: Type of substitution, regular expression or exact
</li><li class="listitem">
<a class="link" href="apa.html#substitute.substitutionList"><code class="literal">&lt;substitutionList&gt;</code></a>: List of patterns/values for a substitution
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Replace well known placeholders. </strong>
</p><pre class="programlisting">&lt;substitute&gt;
    &lt;files&gt;${installdir}/conf/*&lt;/files&gt;
    &lt;type&gt;exact&lt;/type&gt;
    &lt;substitutionList&gt;
       &lt;substitution pattern="PATH_PLACEHOLDER" value="${installdir.unix}" /&gt;
       &lt;substitution pattern="PORT_PLACEHOLDER" value="${server_port}" /&gt;
    &lt;/substitutionList&gt;
&lt;/substitute&gt;</pre><p>
</p><p>As the text to match is known, the code uses the <code class="literal">exact</code> <a class="link" href="apa.html#substitute.type"><code class="literal">&lt;type&gt;</code></a>, which makes the action work faster.</p><p><strong>Replace an unknown port in httpd.conf. </strong>
</p><pre class="programlisting">&lt;substitute&gt;
    &lt;files&gt;${installdir}/apache2/conf/httpd.conf&lt;/files&gt;
    &lt;type&gt;regexp&lt;/type&gt;
    &lt;substitutionList&gt;
       &lt;substitution pattern="\s*Listen\s+[0-9]+" value="${apache_port}"/&gt;
    &lt;/substitutionList&gt;
&lt;/substitute&gt;</pre><p>
</p><p>As the port is unknown, we use the <code class="literal">regexp</code> <a class="link" href="apa.html#substitute.type"><code class="literal">&lt;type&gt;</code></a>.</p><h5><a id="_add_directories_to_the_uninstaller"></a>Add Directories to the Uninstaller</h5><p>This action allows you to add new directories to the uninstaller, so they will be removed during the uninstallation process. The uninstaller just takes care of deleting those files unpacked in the installation step. If your installer generates new files at runtime or copies unpacked files to other locations you can  use the <a class="link" href="apa.html#addDirectoriesToUninstaller"><code class="literal">&lt;addDirectoriesToUninstaller&gt;</code></a> (and <a class="link" href="apa.html#addFilesToUninstaller"><code class="literal">&lt;addFilesToUninstaller&gt;</code></a>) to make the uninstaller also delete them in the uninstallation stage. The directories to add must exists at the time the action is executed or it will just skip.</p><p>The allowed properties in the <a class="link" href="apa.html#addDirectoriesToUninstaller"><code class="literal">&lt;addDirectoriesToUninstaller&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#addDirectoriesToUninstaller.addContents"><code class="literal">&lt;addContents&gt;</code></a>: Whether or not to add directory contents to the uninstaller
</li><li class="listitem">
<a class="link" href="apa.html#addDirectoriesToUninstaller.excludeFiles"><code class="literal">&lt;excludeFiles&gt;</code></a>: Patterns to exclude files
</li><li class="listitem">
<a class="link" href="apa.html#addDirectoriesToUninstaller.files"><code class="literal">&lt;files&gt;</code></a>: File patterns to apply action to
</li><li class="listitem">
<a class="link" href="apa.html#addDirectoriesToUninstaller.matchHiddenFiles"><code class="literal">&lt;matchHiddenFiles&gt;</code></a>: Whether or not to attempt to match Windows hidden files
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Add directory without its contents. </strong>
</p><pre class="programlisting">&lt;createDirectory&gt;
  &lt;path&gt;${installdir}/config&lt;/path&gt;
&lt;/createDirectory&gt;
&lt;addDirectoriesToUninstaller&gt;
  &lt;files&gt;${installdir}/config&lt;/files&gt;
&lt;/addDirectoriesToUninstaller&gt;</pre><p>
</p><p>As just the directory and not its contents were added, the uninstaller will just delete the directory if it is empty. This way your user can preserve the configuration files stored in that directory.</p><p><strong>Add directory and its contents to the uninstaller. </strong>
</p><pre class="programlisting">&lt;copyFile&gt;
  &lt;origin&gt;${installdir}/data&lt;/origin&gt;
  &lt;destination&gt;${installdir}/backup&lt;/destination&gt;
&lt;/copyFile&gt;

&lt;addDirectoriesToUninstaller&gt;
  &lt;files&gt;${installdir}/data&lt;/files&gt;
  &lt;addContents&gt;1&lt;/addContents&gt;
  &lt;matchHiddenFiles&gt;1&lt;/matchHiddenFiles&gt;
&lt;/addDirectoriesToUninstaller&gt;</pre><p>
</p><p>If new files are added to the <code class="literal">${installdir}/data</code> folder, the uninstaller won’t delete them, just those files registered will be removed. This is how the uninstaller works for the unpacked files. Take into account that adding a directory with a big number of files and nested directories could take some time to finish as the action must locate all the files to add.</p><p><code class="literal">Additional Examples:</code>
<a class="link" href="ar01s22.html#snip4499894">Example 1</a>, <a class="link" href="ar01s14.html#snip306787">Example 2</a></p><h5><a id="_add_files_to_uninstaller"></a>Add Files to Uninstaller</h5><p>This action allows you to add new files to the uninstaller, so they will be removed during the uninstallation process. This action behaves the same way the <a class="link" href="apa.html#addDirectoriesToUninstaller"><code class="literal">&lt;addDirectoriesToUninstaller&gt;</code></a> does but is intended to files. If the action is used with directories, the uninstaller will delete them regardless of the changes in its contents.</p><p>The allowed properties in the <a class="link" href="apa.html#addFilesToUninstaller"><code class="literal">&lt;addFilesToUninstaller&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#addFilesToUninstaller.excludeFiles"><code class="literal">&lt;excludeFiles&gt;</code></a>: Patterns to exclude files
</li><li class="listitem">
<a class="link" href="apa.html#addFilesToUninstaller.files"><code class="literal">&lt;files&gt;</code></a>: File patterns to apply action to
</li><li class="listitem">
<a class="link" href="apa.html#addFilesToUninstaller.matchHiddenFiles"><code class="literal">&lt;matchHiddenFiles&gt;</code></a>: Whether or not to attempt to match Windows hidden files
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Adds the temporary files created at runtime. </strong>
</p><pre class="programlisting">&lt;addFilesToUninstaller&gt;
   &lt;files&gt;${installdir}/*~
${installdir}/*/*~
${installdir}/*/*/*~
${installdir}/*/*/*/*~&lt;/files&gt;
&lt;/addFilesToUninstaller&gt;</pre><p>
</p><p><strong>Delete a directory regardless of its contents. </strong>
</p><pre class="programlisting">&lt;addFilesToUninstaller&gt;
   &lt;files&gt;${installdir}/someDirectory/&lt;/files&gt;
&lt;/addFilesToUninstaller&gt;</pre><p>
</p><p>The action will make the uninstaller delete the <code class="literal">${installdir}/someDirectory/</code> directory even if new files are added. In addition, as the action does not care about the contents of the directory, it is much more faster.</p><p><code class="literal">Additional Examples:</code>
<a class="link" href="ar01s14.html#snip6171021">Example 1</a>, <a class="link" href="ar01s14.html#snip3995377">Example 2</a>, <a class="link" href="ar01s15.html#snip8575056">Example 3</a></p><h5><a id="_remove_files_from_uninstaller"></a>Remove Files from Uninstaller</h5><p>This action allows you to remove files or directories from the uninstaller, so they will not be removed during the uninstallation process. This action is used when some files unpacked by the installer (so they are automatically marked to be uninstalled) must be preserved after uninstalling.</p><p>The allowed properties in the <a class="link" href="apa.html#removeFilesFromUninstaller"><code class="literal">&lt;removeFilesFromUninstaller&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#removeFilesFromUninstaller.excludeFiles"><code class="literal">&lt;excludeFiles&gt;</code></a>: Patterns to exclude files
</li><li class="listitem">
<a class="link" href="apa.html#removeFilesFromUninstaller.files"><code class="literal">&lt;files&gt;</code></a>: File patterns to apply action to
</li><li class="listitem">
<a class="link" href="apa.html#removeFilesFromUninstaller.matchHiddenFiles"><code class="literal">&lt;matchHiddenFiles&gt;</code></a>: Whether or not to attempt to match Windows hidden files
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><pre class="programlisting">&lt;postInstallationActionList&gt;
  &lt;removeFilesFromUninstaller&gt;
    &lt;files&gt;${installdir}/licenses&lt;/files&gt;
  &lt;/removeFilesFromUninstaller&gt;
&lt;/postInstallationActionList&gt;</pre><p><code class="literal">Additional Examples:</code>
<a class="link" href="ar01s14.html#snip6361195">Example 1</a></p><h4><a id="flowControl_actions_group"></a>Flow Control Actions</h4><h5><a id="_foreach"></a>Foreach</h5><p>Iterate over a set of values and execute a given set of actions
The allowed properties in the <a class="link" href="apa.html#foreach"><code class="literal">&lt;foreach&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#foreach.values"><code class="literal">&lt;values&gt;</code></a>: Space-separated values to iterate over
</li><li class="listitem">
<a class="link" href="apa.html#foreach.variables"><code class="literal">&lt;variables&gt;</code></a>: Space-separated list of variables that will be assigned a value with each iteration
</li><li class="listitem">
<a class="link" href="apa.html#foreach.actionList"><code class="literal">&lt;actionList&gt;</code></a>: List of actions
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Create a summary page with the installed components. </strong>
</p><pre class="programlisting">  &lt;labelParameter&gt;
     &lt;name&gt;summary&lt;/name&gt;
     &lt;title&gt;Summary&lt;/title&gt;
     &lt;explanation&gt;&lt;/explanation&gt;
     &lt;preShowPageActionList&gt;
        &lt;setInstallerVariable&gt;
           &lt;name&gt;text&lt;/name&gt;
           &lt;value&gt;You are about to install ${project.fullName}.

Please review the below information:

Installation Directory: ${installdir}

Username: ${username}

License File: ${license_file}

Installed Componets:
&lt;/value&gt;
        &lt;/setInstallerVariable&gt;
        &lt;foreach&gt;
           &lt;variables&gt;component&lt;/variables&gt;
           &lt;values&gt;component1 component2 component3&lt;/values&gt;
           &lt;actionList&gt;
              &lt;!-- Just include selected Components --&gt;
              &lt;continue&gt;
                &lt;ruleList&gt;
                   &lt;isFalse&gt;
                     &lt;value&gt;${component(${component}).selected}&lt;/value&gt;
                   &lt;/isFalse&gt;
                &lt;/ruleList&gt;
              &lt;/continue&gt;
              &lt;setInstallerVariable&gt;
                &lt;name&gt;text&lt;/name&gt;
                &lt;value&gt;${text}

${component(${component}).description}&lt;/value&gt;
              &lt;/setInstallerVariable&gt;
           &lt;/actionList&gt;
        &lt;/foreach&gt;
     &lt;/preShowPageActionList&gt;
  &lt;/labelParameter&gt;</pre><p>
</p><p><strong>Iterate to define variables from the registry using multiple variables. </strong>
</p><pre class="programlisting">&lt;foreach&gt;
   &lt;variables&gt;name variable&lt;/variables&gt;
   &lt;values&gt;Version oldVersion Location ondInstalldir Language installationLanguage&lt;/values&gt;
   &lt;actionList&gt;
      &lt;registryGet&gt;
         &lt;key&gt;HKEY_LOCAL_MACHINE\Software\${project.windowsSoftwareRegistryPrefix}&lt;/key&gt;
         &lt;name&gt;${name}&lt;/name&gt;
         &lt;variable&gt;${variable}&lt;/variable&gt;
      &lt;/registryGet&gt;
   &lt;/actionList&gt;
&lt;/foreach&gt;</pre><p>
</p><p><code class="literal">Additional Examples:</code>
<a class="link" href="ar01s26.html#snip4706373">Example 1</a>, <a class="link" href="ar01s02.html#snip8152914">Example 2</a>, <a class="link" href="ar01s09.html#snip2620612">Example 3</a></p><h5><a id="_while"></a>While</h5><p>Execute a group of actions as long as conditions are met
The allowed properties in the <a class="link" href="apa.html#while"><code class="literal">&lt;while&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#while.conditionRuleEvaluationLogic"><code class="literal">&lt;conditionRuleEvaluationLogic&gt;</code></a>: Condition rule evaluation logic
</li><li class="listitem">
<a class="link" href="apa.html#while.actionList"><code class="literal">&lt;actionList&gt;</code></a>: List of actions
</li><li class="listitem">
<a class="link" href="apa.html#while.conditionRuleList"><code class="literal">&lt;conditionRuleList&gt;</code></a>: List of conditions
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Wait for the user to close a running application. </strong>
</p><pre class="programlisting">&lt;while&gt;
  &lt;actionList&gt;
    &lt;showWarning&gt;
      &lt;text&gt;The application "myapp.exe" is still running, please close it and click ok&lt;/text&gt;
    &lt;/showWarning&gt;
  &lt;/actionList&gt;
  &lt;conditionRuleList&gt;
    &lt;processTest&gt;
      &lt;logic&gt;is_running&lt;/logic&gt;
      &lt;name&gt;My Application with long filename.exe&lt;/name&gt;
    &lt;/processTest&gt;
  &lt;/conditionRuleList&gt;
&lt;/while&gt;</pre><p>
</p><p><code class="literal">Additional Examples:</code>
<a class="link" href="ar01s23.html#snip9625970">Example 1</a>, <a class="link" href="ar01s08.html#snip3612900">Example 2</a></p><h5><a id="_if_else"></a>If / Else</h5><p>Conditionally execute a group of actions
The allowed properties in the <a class="link" href="apa.html#if"><code class="literal">&lt;if&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#if.conditionRuleEvaluationLogic"><code class="literal">&lt;conditionRuleEvaluationLogic&gt;</code></a>: Condition rule evaluation logic
</li><li class="listitem">
<a class="link" href="apa.html#if.actionList"><code class="literal">&lt;actionList&gt;</code></a>: List of actions to execute if condition is true
</li><li class="listitem">
<a class="link" href="apa.html#if.conditionRuleList"><code class="literal">&lt;conditionRuleList&gt;</code></a>: List of conditions
</li><li class="listitem">
<a class="link" href="apa.html#if.elseActionList"><code class="literal">&lt;elseActionList&gt;</code></a>: List of actions to execute if condition is false
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Execute the installed application depending on the platform. </strong>
</p><pre class="programlisting">&lt;if&gt;
  &lt;conditionRuleEvaluationLogic&gt;or&lt;/conditionRuleEvaluationLogic&gt;
  &lt;conditionRuleList&gt;
     &lt;platformTest type="linux"/&gt;
     &lt;platformTest type="osx"/&gt;
  &lt;/conditionRuleList&gt;
  &lt;actionList&gt;
     &lt;runProgram&gt;
        &lt;program&gt;${installdir}/scripts/launch.sh&lt;/program&gt;
     &lt;/runProgram&gt;
  &lt;/actionList&gt;
  &lt;elseActionList&gt;
     &lt;runProgram&gt;
        &lt;program&gt;${installdir}/scripts/launch.bat&lt;/program&gt;
     &lt;/runProgram&gt;
  &lt;/elseActionList&gt;
&lt;/if&gt;</pre><p>
</p><h5><a id="_continue"></a>Continue</h5><p>Continue current loop. If the <a class="link" href="apa.html#continue"><code class="literal">&lt;continue&gt;</code></a> action it is executed outside a loop (a <a class="link" href="apa.html#while"><code class="literal">&lt;while&gt;</code></a> or a <a class="link" href="apa.html#foreach"><code class="literal">&lt;foreach&gt;</code></a>) it will throw an error.</p><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Backup a list of folders if they are not empty. </strong>
</p><pre class="programlisting">&lt;foreach&gt;
   &lt;variables&gt;dir&lt;/variables&gt;
   &lt;values&gt;${installdir}/data ${installdir}/conf ${installdir}/samples&lt;/values&gt;
   &lt;actionList&gt;
     &lt;continue&gt;
       &lt;ruleList&gt;
         &lt;fileTest path="${dir}" condition="is_empty"/&gt;
       &lt;/ruleList&gt;
     &lt;/continue&gt;
     &lt;copyFile&gt;
        &lt;origin&gt;${dir}&lt;/origin&gt;
        &lt;destination&gt;${installdir}/backup&lt;/destination&gt;
     &lt;/copyFile&gt;
   &lt;/actionList&gt;
&lt;/foreach&gt;</pre><p>
</p><p><code class="literal">Additional Examples:</code>
<a class="link" href="ar01s09.html#snip2620612">Example 1</a>, <a class="link" href="ar01s07.html#snip9887258">Example 2</a>, <a class="link" href="ar01s09.html#snip6871102">Example 3</a></p><h5><a id="_break"></a>Break</h5><p>Break current loop. If the <a class="link" href="apa.html#continue"><code class="literal">&lt;continue&gt;</code></a> action it is executed outside a loop (a <a class="link" href="apa.html#while"><code class="literal">&lt;while&gt;</code></a> or a <a class="link" href="apa.html#foreach"><code class="literal">&lt;foreach&gt;</code></a>) it will throw an error.</p><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Wait until a service is started or a timeout is reached. </strong>
</p><pre class="programlisting">&lt;startWindowsService&gt;
    &lt;abortOnError&gt;0&lt;/abortOnError&gt;
    &lt;displayName&gt;myservice&lt;/displayName&gt;
    &lt;serviceName&gt;My Service&lt;/serviceName&gt;
&lt;/startWindowsService&gt;
&lt;setInstallerVariable name="time" value="0"/&gt;
&lt;while&gt;
  &lt;actionList&gt;
    &lt;!-- Break the loop if port is freed --&gt;
    &lt;break&gt;
      &lt;ruleList&gt;
        &lt;windowsServiceTest service="myService" condition="is_running"/&gt;
      &lt;/ruleList&gt;
    &lt;/break&gt;
    &lt;!-- Wait a second to avoid using too much cpu --&gt;
    &lt;wait ms="1000"/&gt;
    &lt;mathExpression&gt;
      &lt;text&gt;${time}+1000&lt;/text&gt;
      &lt;variable&gt;time&lt;/variable&gt;
    &lt;/mathExpression&gt;
  &lt;/actionList&gt;
  &lt;conditionRuleList&gt;
    &lt;!-- Iterate until the timeout reach 30 sec (30000msec) --&gt;
    &lt;compareValues&gt;
      &lt;value1&gt;${time}&lt;/value1&gt;
      &lt;logic&gt;less_or_equal&lt;/logic&gt;
      &lt;value2&gt;30000&lt;/value2&gt;
    &lt;/compareValues&gt;
  &lt;/conditionRuleList&gt;
&lt;/while&gt;</pre><p>
</p><p><code class="literal">Additional Examples:</code>
<a class="link" href="ar01s23.html#snip9625970">Example 1</a>, <a class="link" href="ar01s07.html#snip4153424">Example 2</a></p><h4><a id="osx_actions_group"></a>OSX-specific actions</h4><h5><a id="_change_osx_file_attributes"></a>Change OSX file attributes</h5><p>Change OSX attributes of a file or directory. Trying to set an attribute on a read only file will result in a failure. Make sure the file is writable before attempting to change any attribute other than, of course, readOnly
The allowed properties in the <a class="link" href="apa.html#changeOSXAttributes"><code class="literal">&lt;changeOSXAttributes&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#changeOSXAttributes.creator"><code class="literal">&lt;creator&gt;</code></a>: Creator to set to file or directory
</li><li class="listitem">
<a class="link" href="apa.html#changeOSXAttributes.excludeFiles"><code class="literal">&lt;excludeFiles&gt;</code></a>: Patterns to exclude files
</li><li class="listitem">
<a class="link" href="apa.html#changeOSXAttributes.files"><code class="literal">&lt;files&gt;</code></a>: File patterns to apply action to
</li><li class="listitem">
<a class="link" href="apa.html#changeOSXAttributes.hidden"><code class="literal">&lt;hidden&gt;</code></a>: Whether the file is visible or not
</li><li class="listitem">
<a class="link" href="apa.html#changeOSXAttributes.readOnly"><code class="literal">&lt;readOnly&gt;</code></a>: Whether the file is read only or writable
</li><li class="listitem">
<a class="link" href="apa.html#changeOSXAttributes.type"><code class="literal">&lt;type&gt;</code></a>: Type to set to file or directory
</li></ul></div><p>The <a class="link" href="apa.html#changeOSXAttributes.hidden"><code class="literal">&lt;hidden&gt;</code></a> and <a class="link" href="apa.html#changeOSXAttributes.readOnly"><code class="literal">&lt;readOnly&gt;</code></a> tags allow specifying a boolean value (<span class="emphasis"><em>0</em></span> or <span class="emphasis"><em>1</em></span>) or <span class="emphasis"><em>unchanged</em></span>, to preserve the current value of the attribute. You can check the result of the action using the OS X command <code class="literal">/Developer/Tools/GetFileInfo</code>:</p><pre class="programlisting">$&gt; /Developer/Tools/GetFileInfo path/to/someFile</pre><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Hide a set of files and define their creator and type. </strong>
</p><pre class="programlisting">&lt;changeOSXAttributes&gt;
    &lt;creator&gt;doug&lt;/creator&gt;
    &lt;files&gt;${installdir}/conf/*&lt;/files&gt;
    &lt;type&gt;TEXT&lt;/type&gt;
    &lt;hidden&gt;1&lt;/hidden&gt;
    &lt;readOnly&gt;unchanged&lt;/readOnly&gt;
&lt;/changeOSXAttributes&gt;</pre><p>
</p><p><strong>Change attributes of a <code class="literal">readOnly</code> file. </strong>
</p><pre class="programlisting">&lt;!-- The file must be first to be writable --&gt;
&lt;changeOSXAttributes&gt;
    &lt;files&gt;${installdir}/some/file&lt;/files&gt;
    &lt;readOnly&gt;0&lt;/readOnly&gt;
&lt;/changeOSXAttributes&gt;

&lt;!-- Then we change the attributes --&gt;
&lt;changeOSXAttributes&gt;
    &lt;files&gt;${installdir}/some/file&lt;/files&gt;
    &lt;creator&gt;jhon&lt;/creator&gt;
    &lt;readOnly&gt;unchanged&lt;/readOnly&gt;
&lt;/changeOSXAttributes&gt;

&lt;!-- Then we revert the readOnly attribute --&gt;
&lt;changeOSXAttributes&gt;
    &lt;files&gt;${installdir}/some/file&lt;/files&gt;
    &lt;readOnly&gt;1&lt;/readOnly&gt;
&lt;/changeOSXAttributes&gt;</pre><p>
</p><h4><a id="java_actions_group"></a>Java Actions</h4><h5><a id="_autodetect_java"></a>Autodetect Java</h5><p>Autodetects an existing Java (tm) installation in the system and creates corresponding installer variables: java_executable java_vendor java_version java_version_major java_version_full java_bitness. If a valid java version was found, the variable java_autodetected will be set to 1
The allowed properties in the <a class="link" href="apa.html#autodetectJava"><code class="literal">&lt;autodetectJava&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#autodetectJava.promptUser"><code class="literal">&lt;promptUser&gt;</code></a>: Prompt user to choose appropriate version
</li><li class="listitem">
<a class="link" href="apa.html#autodetectJava.selectionOrder"><code class="literal">&lt;selectionOrder&gt;</code></a>: Order of the Java versions detected
</li><li class="listitem">
<a class="link" href="apa.html#autodetectJava.validVersionList"><code class="literal">&lt;validVersionList&gt;</code></a>: List of supported Java versions
</li></ul></div><p>You can find additional information in the <a class="link" href="ar01s18.html#java_autodetection" title="18.1. Java Specific Actions">Java</a> section.</p><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Detect a Java version between 1.4 and 1.5. </strong>
</p><pre class="programlisting">&lt;autodetectJava&gt;
  &lt;promptUser&gt;0&lt;/promptUser&gt;
  &lt;validVersionList&gt;
     &lt;validVersion&gt;
        &lt;vendor&gt;sun&lt;/vendor&gt;
        &lt;minVersion&gt;1.4&lt;/minVersion&gt;
        &lt;maxVersion&gt;1.5&lt;/maxVersion&gt;
     &lt;/validVersion&gt;
  &lt;/validVersionList&gt;
&lt;/autodetectJava&gt;</pre><p>
</p><p><code class="literal">Additional Examples:</code>
<a class="link" href="ar01s18.html#snip4707255">Example 1</a>, <a class="link" href="ar01s18.html#snip786262">Example 2</a>, <a class="link" href="ar01s18.html#snip5936858">Example 3</a></p><h5><a id="_create_launchers"></a>Create Launchers</h5><p>Creates one or more Java launchers in specified location.
The allowed properties in the <a class="link" href="apa.html#createJavaLaunchers"><code class="literal">&lt;createJavaLaunchers&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#createJavaLaunchers.destination"><code class="literal">&lt;destination&gt;</code></a>: Path to the location where you want to create the launchers.
</li><li class="listitem">
<a class="link" href="apa.html#createJavaLaunchers.javaLauncherList"><code class="literal">&lt;javaLauncherList&gt;</code></a>: List of launchers to create.
</li></ul></div><p>You can find additional information in the <a class="link" href="ar01s18.html#java_launchers_section" title="18.3. Launchers">Java Launchers</a> section.
<span class="strong"><strong>Examples:</strong></span></p><p><strong>Create a launcher for a bundled JAR file. </strong>
</p><pre class="programlisting">&lt;createJavaLaunchers&gt;
  &lt;destination&gt;${installdir}/launchers&lt;/destination&gt;
  &lt;javaLauncherList&gt;
    &lt;javaLauncher&gt;
      &lt;binaryName&gt;myLauncher&lt;/binaryName&gt;
      &lt;jarFile&gt;testapplication.jar&lt;/jarFile&gt;
    &lt;/javaLauncher&gt;
  &lt;/javaLauncherList&gt;
&lt;/createJavaLaunchers&gt;</pre><p>
</p><p><code class="literal">Additional Examples:</code>
<a class="link" href="ar01s18.html#snip7173767">Example 1</a>, <a class="link" href="ar01s18.html#snip4843669">Example 2</a></p><h4><a id="installer_actions_group"></a>Installer Actions</h4><h5><a id="_encode_base64"></a>Encode base64</h5><p>Encode a string using base64.
The allowed properties in the <a class="link" href="apa.html#encodeBase64"><code class="literal">&lt;encodeBase64&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#encodeBase64.text"><code class="literal">&lt;text&gt;</code></a>: Text to process
</li><li class="listitem">
<a class="link" href="apa.html#encodeBase64.variable"><code class="literal">&lt;variable&gt;</code></a>: Variable to save the final result to.
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Encode a message in Base64. </strong>
</p><pre class="programlisting">&lt;encodeBase64&gt;
    &lt;text&gt;This is some secret text to encode&lt;/text&gt;
    &lt;variable&gt;${secretEncodedText}&lt;/variable&gt;
&lt;/encodeBase64&gt;</pre><p>
</p><h5><a id="_decode_base64"></a>Decode base64</h5><p>Decode a string using base64.
The allowed properties in the <a class="link" href="apa.html#decodeBase64"><code class="literal">&lt;decodeBase64&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#decodeBase64.text"><code class="literal">&lt;text&gt;</code></a>: Text to process
</li><li class="listitem">
<a class="link" href="apa.html#decodeBase64.variable"><code class="literal">&lt;variable&gt;</code></a>: Variable to save the final result to.
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Decode a message encided in Base64. </strong>
</p><pre class="programlisting">&lt;decodeBase64&gt;
    &lt;text&gt;${secretEncodedText}&lt;/text&gt;
    &lt;variable&gt;${result}&lt;/variable&gt;
&lt;/decodeBase64&gt;</pre><p>
</p><h5><a id="_md4"></a>MD4</h5><p>Generate a MD4 from a given text.
The allowed properties in the <a class="link" href="apa.html#md4"><code class="literal">&lt;md4&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#md4.text"><code class="literal">&lt;text&gt;</code></a>: Text to calculate the MD4 on.
</li><li class="listitem">
<a class="link" href="apa.html#md4.useNTLMFormat"><code class="literal">&lt;useNTLMFormat&gt;</code></a>: Whether or not to create an NTLM compilant hash
</li><li class="listitem">
<a class="link" href="apa.html#md4.variable"><code class="literal">&lt;variable&gt;</code></a>: Variable to which to save the MD4 to.
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Calculate the MD4 has of a password. </strong>
</p><pre class="programlisting">&lt;md4&gt;
    &lt;text&gt;${password}&lt;/text&gt;
    &lt;variable&gt;result&lt;/variable&gt;
&lt;/md4&gt;</pre><p>
</p><h5><a id="_md5"></a>MD5</h5><p>Generate a MD5 from a given text.
The allowed properties in the <a class="link" href="apa.html#md5"><code class="literal">&lt;md5&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#md5.text"><code class="literal">&lt;text&gt;</code></a>: Text to calculate the MD5 on.
</li><li class="listitem">
<a class="link" href="apa.html#md5.variable"><code class="literal">&lt;variable&gt;</code></a>: Variable to which to save the MD5 to.
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Check the integrity of a file. </strong>
</p><pre class="programlisting">&lt;readFile&gt;
  &lt;path&gt;${installdir}/keys.txt&lt;/path&gt;
  &lt;name&gt;data&lt;/name&gt;
&lt;/readFile&gt;
&lt;md5&gt;
  &lt;text&gt;${data}&lt;/text&gt;
  &lt;variable&gt;result&lt;/variable&gt;
&lt;/md5&gt;
&lt;throwError&gt;
   &lt;text&gt;The file has been corrupted!&lt;/text&gt;
   &lt;ruleList&gt;
     &lt;compareText&gt;
       &lt;text&gt;${result}&lt;/text&gt;
       &lt;logic&gt;does_not_equal&lt;/logic&gt;
       &lt;value&gt;3f62e6df4607c4be16f4946dc9fa16ca&lt;/value&gt;
     &lt;/compareText&gt;
   &lt;/ruleList&gt;
&lt;/throwError&gt;</pre><p>
</p><p><code class="literal">Additional Examples:</code>
<a class="link" href="ar01s02.html#snip3666467">Example 1</a>, <a class="link" href="ar01s07.html#snip4153424">Example 2</a>, <a class="link" href="ar01s22.html#snip3871895">Example 3</a></p><h5><a id="_sha_1"></a>SHA-1</h5><p>Generate a SHA-1 from a given text.
The allowed properties in the <a class="link" href="apa.html#sha1"><code class="literal">&lt;sha1&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#sha1.text"><code class="literal">&lt;text&gt;</code></a>: Text to calculate the SHA-1 on.
</li><li class="listitem">
<a class="link" href="apa.html#sha1.variable"><code class="literal">&lt;variable&gt;</code></a>: Variable to which to save the SHA-1 to.
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Encode some secret data with a secret key to send using <a class="link" href="apa.html#httpPost"><code class="literal">&lt;httpPost&gt;</code></a>. </strong>
</p><pre class="programlisting">&lt;sha1&gt;
  &lt;text&gt;${user}+thisIsAsecretKey+${password}&lt;/text&gt;
  &lt;variable&gt;encodedText&lt;/variable&gt;
&lt;/sha1&gt;
&lt;httpPost url="http://www.example.com/checkdata.php"&gt;
  &lt;filename&gt;${installdir}/activationUrl&lt;/filename&gt;
  &lt;queryParameterList&gt;
    &lt;queryParameter name="data" value="${encodedText}"/&gt;
  &lt;/queryParameterList&gt;
&lt;/httpPost&gt;</pre><p>
</p><h5><a id="_sha_256"></a>SHA-256</h5><p>Generate a SHA-256 from a given text.
The allowed properties in the <a class="link" href="apa.html#sha256"><code class="literal">&lt;sha256&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#sha256.text"><code class="literal">&lt;text&gt;</code></a>: Text to calculate the SHA-256 on.
</li><li class="listitem">
<a class="link" href="apa.html#sha256.variable"><code class="literal">&lt;variable&gt;</code></a>: Variable to which to save the SHA-256 to.
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Encode some secret data with a secret key to send using <a class="link" href="apa.html#httpPost"><code class="literal">&lt;httpPost&gt;</code></a>. </strong>
</p><pre class="programlisting">&lt;sha256&gt;
  &lt;text&gt;${user}+thisIsAsecretKey+${password}&lt;/text&gt;
  &lt;variable&gt;encodedText&lt;/variable&gt;
&lt;/sha256&gt;
&lt;httpPost url="http://www.example.com/checkdata.php"&gt;
  &lt;filename&gt;${installdir}/activationUrl&lt;/filename&gt;
  &lt;queryParameterList&gt;
    &lt;queryParameter name="data" value="${encodedText}"/&gt;
  &lt;/queryParameterList&gt;
&lt;/httpPost&gt;</pre><p>
</p><h5><a id="_math"></a>Math</h5><p>Calculate math expression
The allowed properties in the <a class="link" href="apa.html#mathExpression"><code class="literal">&lt;mathExpression&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#mathExpression.text"><code class="literal">&lt;text&gt;</code></a>:
</li><li class="listitem">
<a class="link" href="apa.html#mathExpression.variable"><code class="literal">&lt;variable&gt;</code></a>: Variable to save the final result to.
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Calculate the square root of a number. </strong>
</p><pre class="programlisting">&lt;mathExpression&gt;
    &lt;text&gt;sqrt(${number})&lt;/text&gt;
    &lt;variable&gt;result&lt;/variable&gt;
&lt;/mathExpression&gt;</pre><p>
</p><p><code class="literal">Additional Examples:</code>
<a class="link" href="ar01s02.html#snip826659">Example 1</a></p><h5><a id="_add_choice_options"></a>Add Choice Options</h5><p>Add options to an existing choice parameter
The allowed properties in the <a class="link" href="apa.html#addChoiceOptions"><code class="literal">&lt;addChoiceOptions&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#addChoiceOptions.name"><code class="literal">&lt;name&gt;</code></a>: Name of an existing choice parameter.
</li><li class="listitem">
<a class="link" href="apa.html#addChoiceOptions.optionList"><code class="literal">&lt;optionList&gt;</code></a>: List of options to give to a choice parameter
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Add options for English and Spanish for an existing choice parameter <code class="literal">language</code>. </strong>
</p><pre class="programlisting"> &lt;addChoiceOptions&gt;
    &lt;name&gt;language&lt;/name&gt;
    &lt;optionList&gt;
      &lt;option&gt;
        &lt;value&gt;en&lt;/value&gt;
        &lt;text&gt;English&lt;/text&gt;
      &lt;/option&gt;
      &lt;option&gt;
        &lt;value&gt;es&lt;/value&gt;
        &lt;text&gt;Spanish&lt;/text&gt;
      &lt;/option&gt;
    &lt;/optionList&gt;
 &lt;/addChoiceOptions&gt;</pre><p>
</p><p>Each <a class="link" href="apg.html#option"><code class="literal">&lt;option&gt;</code></a> specifies an additional option to be added to a <a class="link" href="apc.html#choiceParameter"><code class="literal">&lt;choiceParameter&gt;</code></a>.</p><p><code class="literal">Additional Examples:</code>
<a class="link" href="ar01s07.html#snip5047945">Example 1</a>, <a class="link" href="ar01s07.html#snip4153424">Example 2</a>, <a class="link" href="ar01s07.html#snip3647232">Example 3</a></p><h5><a id="_add_choice_options_from_text"></a>Add Choice Options from Text</h5><p>Add options to an existing choice parameter from a given text
The allowed properties in the <a class="link" href="apa.html#addChoiceOptionsFromText"><code class="literal">&lt;addChoiceOptionsFromText&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#addChoiceOptionsFromText.name"><code class="literal">&lt;name&gt;</code></a>: Name of an existing choice parameter.
</li><li class="listitem">
<a class="link" href="apa.html#addChoiceOptionsFromText.text"><code class="literal">&lt;text&gt;</code></a>: Text with the options to give to a choice parameter
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Add options parsing text format existing choice parameter <code class="literal">language</code>. </strong>
</p><pre class="programlisting"> &lt;addChoiceOptionsFromText&gt;
    &lt;name&gt;language&lt;/name&gt;
    &lt;text&gt;
jp=Japanese
jp.description=Language spoken in Japan
de=German
de.description=Language spoken in Germany
it=Italian
it.description=Language spoken in Italy
pl=Polish
pl.description=Language spoken in Poland
ru=Russian
ru.description=Language spoken in Russia
&lt;/text&gt;
 &lt;/addChoiceOptionsFromText&gt;</pre><p>
</p><p>The keys in the text will be used to set the <code class="literal">&lt;value&gt;</code> property of option. The key value (the righthand side) will be used to set the <code class="literal">&lt;text&gt;</code> property.
Optionally, if a key has a <code class="literal">.description</code> suffix and matches an existing <code class="literal">&lt;value&gt;</code>, the key value will be used to set the <code class="literal">&lt;description&gt;</code> property.</p><p><code class="literal">Additional Examples:</code>
<a class="link" href="ar01s07.html#snip5047945">Example 1</a>, <a class="link" href="ar01s07.html#snip4153424">Example 2</a>, <a class="link" href="ar01s07.html#snip3647232">Example 3</a></p><h5><a id="_remove_choice_options"></a>Remove Choice Options</h5><p>Clear choice values for a parameter
The allowed properties in the <a class="link" href="apa.html#removeChoiceOptions"><code class="literal">&lt;removeChoiceOptions&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#removeChoiceOptions.name"><code class="literal">&lt;name&gt;</code></a>: Name of an existing choice parameter.
</li><li class="listitem">
<a class="link" href="apa.html#removeChoiceOptions.options"><code class="literal">&lt;options&gt;</code></a>: Options to remove
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Remove options for English and Spanish from existing choice parameter `language. </strong>
</p><pre class="programlisting">&lt;removeChoiceOptions&gt;
   &lt;name&gt;language&lt;/name&gt;
   &lt;options&gt;es,en&lt;/options&gt;
&lt;/removeChoiceOptions&gt;</pre><p>
</p><p>This action can take a single option to remove or multiple options, which are separated using comma.</p><p><code class="literal">Additional Examples:</code>
<a class="link" href="ar01s07.html#snip4153424">Example 1</a>, <a class="link" href="ar01s07.html#snip4127099">Example 2</a>, <a class="link" href="ar01s07.html#snip3564236">Example 3</a></p><h5><a id="_generate_random_value"></a>Generate Random Value</h5><p>Generate a random value.
The allowed properties in the <a class="link" href="apa.html#generateRandomValue"><code class="literal">&lt;generateRandomValue&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#generateRandomValue.length"><code class="literal">&lt;length&gt;</code></a>: Character length for the generated value.
</li><li class="listitem">
<a class="link" href="apa.html#generateRandomValue.variable"><code class="literal">&lt;variable&gt;</code></a>: Variable to which to save the generated value.
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Create an unique filename. </strong>
</p><pre class="programlisting">&lt;generateRandomValue&gt;
   &lt;length&gt;5&lt;/length&gt;
   &lt;variable&gt;suffix&lt;/variable&gt;
&lt;/generateRandomValue&gt;
&lt;setInstallerVariable name="${installdir}/.tmp${suffix}"/&gt;</pre><p>
</p><p><code class="literal">Additional Examples:</code>
<a class="link" href="ar01s04.html#snip9309425">Example 1</a></p><h5><a id="_action_group"></a>Action Group</h5><p>Group a set of actions.
The allowed properties in the <a class="link" href="apa.html#actionGroup"><code class="literal">&lt;actionGroup&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#actionGroup.actionList"><code class="literal">&lt;actionList&gt;</code></a>: List of actions to be grouped
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Read a file and show its contents. </strong>
</p><pre class="programlisting">   &lt;actionGroup&gt;
     &lt;actionList&gt;
       &lt;readFile&gt;
         &lt;path&gt;${installdir}/notes.txt&lt;/path&gt;
         &lt;name&gt;text&lt;/name&gt;
       &lt;/readFile&gt;
       &lt;showText&gt;
          &lt;title&gt;InstallBuilder Notes&lt;/title&gt;
          &lt;width&gt;500&lt;/width&gt;
          &lt;height&gt;600&lt;/height&gt;
          &lt;text&gt;${text}&lt;/text&gt;
       &lt;/showText&gt;
     &lt;/actionList&gt;
     &lt;ruleList&gt;
        &lt;isTrue value="${viewNotes}"/&gt;
     &lt;/ruleList&gt;
   &lt;/actionGroup&gt;</pre><p>
</p><p><code class="literal">Additional Examples:</code>
<a class="link" href="ar01s25.html#snip8788564">Example 1</a>, <a class="link" href="ar01s18.html#snip4707255">Example 2</a>, <a class="link" href="ar01s07.html#snip4153424">Example 3</a></p><h5><a id="_log_message"></a>Log Message</h5><p>Write a message to the installation log. Useful for debugging purposes.
The allowed properties in the <a class="link" href="apa.html#logMessage"><code class="literal">&lt;logMessage&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#logMessage.enableTimeStamp"><code class="literal">&lt;enableTimeStamp&gt;</code></a>: Whether to enable timestamp in the message or not.
</li><li class="listitem">
<a class="link" href="apa.html#logMessage.text"><code class="literal">&lt;text&gt;</code></a>: Message to include in log
</li><li class="listitem">
<a class="link" href="apa.html#logMessage.timeStampFormat"><code class="literal">&lt;timeStampFormat&gt;</code></a>: Format string for the optional timestamp. The string allows a number of field descriptors.
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Add additional details to the log. </strong>
</p><pre class="programlisting">&lt;logMessage&gt;
   &lt;text&gt;Starting MySQL...&lt;/text&gt;
&lt;/logMessage&gt;
&lt;runProgram&gt;
    &lt;program&gt;${installdir}/ctlscript.sh&lt;/program&gt;
    &lt;programArguments&gt;start mysql&lt;/programArguments&gt;
&lt;/runProgram&gt;
&lt;logMessage&gt;
   &lt;text&gt;MySQL started!&lt;/text&gt;
&lt;/logMessage&gt;</pre><p>
</p><p><code class="literal">Additional Examples:</code>
<a class="link" href="ar01s21.html#snip3409236">Example 1</a>, <a class="link" href="ar01s08.html#snip6442474">Example 2</a>, <a class="link" href="ar01s21.html#snip9043705">Example 3</a></p><h5><a id="_component_selection"></a>Component Selection</h5><p>Select or deselect components for installation.
The allowed properties in the <a class="link" href="apa.html#componentSelection"><code class="literal">&lt;componentSelection&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#componentSelection.deselect"><code class="literal">&lt;deselect&gt;</code></a>: Comma separated list of components you wish to deselect for installation.
</li><li class="listitem">
<a class="link" href="apa.html#componentSelection.select"><code class="literal">&lt;select&gt;</code></a>: Comma separated list of components you wish to select for installation.
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Configure the selected components based on the installation type. </strong>
</p><pre class="programlisting">&lt;componentSelection&gt;
   &lt;deselect&gt;minimumDoc&lt;/deselect&gt;
   &lt;select&gt;fullDocs,core,images&lt;/select&gt;
   &lt;ruleList&gt;
     &lt;compareText text="${installationMode}" logic="equals" value="full"/&gt;
   &lt;/ruleList&gt;
&lt;/componentSelection&gt;
&lt;componentSelection&gt;
   &lt;deselect&gt;fullDocs,images&lt;/deselect&gt;
   &lt;select&gt;minimumDoc,core&lt;/select&gt;
   &lt;ruleList&gt;
     &lt;compareText text="${installationMode}" logic="equals" value="minimal"/&gt;
   &lt;/ruleList&gt;
&lt;/componentSelection&gt;</pre><p>
</p><p><code class="literal">Additional Examples:</code>
<a class="link" href="ar01s05.html#snip8662628">Example 1</a>, <a class="link" href="ar01s22.html#snip4499894">Example 2</a>, <a class="link" href="ar01s05.html#snip2719709">Example 3</a></p><h5><a id="_mark_variables_as_global"></a>Mark variables as global</h5><p>Mark a list of variables as global. Global variables defined or modified inside custom actions preserve their values after the execution while regular variables are not visible outside.
The allowed properties in the <a class="link" href="apa.html#globalVariables"><code class="literal">&lt;globalVariables&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#globalVariables.names"><code class="literal">&lt;names&gt;</code></a>: Variable names
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Create a function that generates an unique name and stores its path in a variable. </strong>
</p><pre class="programlisting">&lt;project&gt;
 ...
 &lt;functionDefinitionList&gt;
  &lt;actionDefinition&gt;
    &lt;name&gt;getUniquePath&lt;/name&gt;
      &lt;actionList&gt;
         &lt;globalVariables names="${variable}"/&gt;
         &lt;if&gt;
           &lt;conditionRuleList&gt;
             &lt;fileExists path="${root}" negate="1"/&gt;
           &lt;/conditionRuleList&gt;
           &lt;actionList&gt;
              &lt;setInstallerVariable name="${variable}" value="${root}"/&gt;
           &lt;/actionList&gt;
           &lt;elseActionList&gt;
             &lt;setInstallerVariable name="suffix" value="0"/&gt;
             &lt;setInstallerVariable name="candidate" value="${root}.${suffix}"/&gt;
             &lt;while&gt;
               &lt;actionList&gt;
                 &lt;mathExpression&gt;
                   &lt;text&gt;${suffix}+1&lt;/text&gt;
                   &lt;variable&gt;time&lt;/variable&gt;
                 &lt;/mathExpression&gt;
                 &lt;setInstallerVariable name="candidate" value="${root}.${suffix}"/&gt;
               &lt;/actionList&gt;
               &lt;conditionRuleList&gt;
                 &lt;fileExists path="${root}"/&gt;
               &lt;/conditionRuleList&gt;
             &lt;/while&gt;
             &lt;setInstallerVariable name="${variable}" value="${candidate}"/&gt;
           &lt;/elseActionList&gt;
         &lt;/if&gt;
      &lt;/actionList&gt;
      &lt;parameterList&gt;
         &lt;stringParameter name="variable" value="" default=""/&gt;
         &lt;stringParameter name="root" value="" default=""/&gt;
      &lt;/parameterList&gt;
  &lt;/actionDefinition&gt;
 &lt;/functionDefinitionList&gt;
 ...
 &lt;initializationActionList&gt;
   &lt;getUniquePath root="${installdir}/.conf" variable="uniquepath"/&gt;
 &lt;/initializationActionList&gt;
 ...
&lt;/project&gt;</pre><p>
</p><p>You can find additional information in the <a class="link" href="ar01s08.html#global_variables_section" title="Returning values from a custom action">Global Variables</a> section.</p><p><code class="literal">Additional Examples:</code>
<a class="link" href="ar01s08.html#snip5280012">Example 1</a>, <a class="link" href="ar01s08.html#snip1818149">Example 2</a></p><h5><a id="_set_variable_from_program"></a>Set Variable from Program</h5><p>Set a installer variable to the output of a script. If the name of the variable matches a parameter name, the value of the parameter will be updated.
The allowed properties in the <a class="link" href="apa.html#setInstallerVariableFromScriptOutput"><code class="literal">&lt;setInstallerVariableFromScriptOutput&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#setInstallerVariableFromScriptOutput.exec"><code class="literal">&lt;exec&gt;</code></a>: Path to the script to run
</li><li class="listitem">
<a class="link" href="apa.html#setInstallerVariableFromScriptOutput.execArgs"><code class="literal">&lt;execArgs&gt;</code></a>: Arguments to pass to the script
</li><li class="listitem">
<a class="link" href="apa.html#setInstallerVariableFromScriptOutput.name"><code class="literal">&lt;name&gt;</code></a>: Name of the variable to set
</li><li class="listitem">
<a class="link" href="apa.html#setInstallerVariableFromScriptOutput.workingDirectory"><code class="literal">&lt;workingDirectory&gt;</code></a>: Working directory. This is important for scripts that expect to be run from a specific location
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Get the list of .txt files in a directory. </strong>
</p><pre class="programlisting">&lt;setInstallerVariableFromScriptOutput&gt;
    &lt;exec&gt;find&lt;/exec&gt;
    &lt;execArgs&gt;${directory} -name '*.txt'&lt;/execArgs&gt;
    &lt;name&gt;files&lt;/name&gt;
    &lt;ruleList&gt;
       &lt;platformTest type="linux"/&gt;
    &lt;/ruleList&gt;
&lt;/setInstallerVariableFromScriptOutput&gt;</pre><p>
</p><p><code class="literal">Additional Examples:</code>
<a class="link" href="ar01s08.html#snip4735146">Example 1</a>, <a class="link" href="ar01s07.html#snip3647232">Example 2</a>, <a class="link" href="ar01s07.html#snip6610636">Example 3</a></p><h5><a id="_wait"></a>Wait</h5><p>Pause the installation for given time
The allowed properties in the <a class="link" href="apa.html#wait"><code class="literal">&lt;wait&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#wait.ms"><code class="literal">&lt;ms&gt;</code></a>: Number of milliseconds to wait
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Wait 30 seconds for a service to start. </strong>
</p><pre class="programlisting">&lt;startWindowsService&gt;
   &lt;serviceName&gt;myService&lt;/serviceName&gt;
   &lt;displayName&gt;My Service&lt;/displayName&gt;
&lt;/startWindowsService&gt;
&lt;wait&gt;
   &lt;ms&gt;30000&lt;/ms&gt;
&lt;/wait&gt;
&lt;showWarning&gt;
   &lt;text&gt;The service 'My Service' could not be started&lt;/text&gt;
   &lt;ruleList&gt;
     &lt;windowsServiceTest service="myService" condition="is_not_running"/&gt;
   &lt;/ruleList&gt;
&lt;/showWarning&gt;</pre><p>
</p><p><code class="literal">Additional Examples:</code>
<a class="link" href="ar01s08.html#snip9595355">Example 1</a></p><h5><a id="_exit_installer"></a>Exit Installer</h5><p>Exit the installer/uninstaller.
The allowed properties in the <a class="link" href="apa.html#exit"><code class="literal">&lt;exit&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#exit.exitCode"><code class="literal">&lt;exitCode&gt;</code></a>: exit code returned by the installer/uninstaller
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Exit the uninstallation if the installed application is still running. </strong>
</p><pre class="programlisting">&lt;preUninstallationActionList&gt;
  &lt;actionGroup&gt;
    &lt;actionList&gt;
      &lt;showWarning&gt;
        &lt;text&gt;You must close the application ${project.fullName}
        before launching the uninstaller&lt;/text&gt;
      &lt;/showWarning&gt;
      &lt;exit exitCode="1"/&gt;
    &lt;/actionList&gt;
    &lt;ruleList&gt;
       &lt;processTest name="${project.fullName}.exe" logic="is_running" /&gt;
    &lt;/ruleList&gt;
  &lt;/actionGroup&gt;
&lt;/preUninstallationActionList&gt;&gt;</pre><p>
</p><p><code class="literal">Additional Examples:</code>
<a class="link" href="ar01s26.html#snip9101077">Example 1</a>, <a class="link" href="ar01s14.html#snip1901226">Example 2</a></p><h5><a id="_modify_a_string"></a>Modify a String</h5><p>This action allows you to transform a given text using one of the allowed string manipulation methods.
The allowed properties in the <a class="link" href="apa.html#stringModify"><code class="literal">&lt;stringModify&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#stringModify.logic"><code class="literal">&lt;logic&gt;</code></a>: Transformation to perform.
</li><li class="listitem">
<a class="link" href="apa.html#stringModify.text"><code class="literal">&lt;text&gt;</code></a>: Text which will be transformed.
</li><li class="listitem">
<a class="link" href="apa.html#stringModify.variable"><code class="literal">&lt;variable&gt;</code></a>: Variable name which will store the result.
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Normalize a value provided by the user. </strong>
</p><pre class="programlisting">&lt;stringModify&gt;
   &lt;text&gt;${identifier}&lt;/text&gt;
   &lt;logic&gt;tolower&lt;/logic&gt;
   &lt;variable&gt;identifier&lt;/variable&gt;
&lt;/stringModify&gt;
&lt;stringModify&gt;
   &lt;text&gt;${identifier}&lt;/text&gt;
   &lt;logic&gt;trim&lt;/logic&gt;
   &lt;variable&gt;identifier&lt;/variable&gt;
&lt;/stringModify&gt;</pre><p>
</p><h5><a id="_set_installer_variable"></a>Set Installer Variable</h5><p>Set a installer variable. If the name of the variable matches a parameter name, the value of the parameter will be updated.
The allowed properties in the <a class="link" href="apa.html#setInstallerVariable"><code class="literal">&lt;setInstallerVariable&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#setInstallerVariable.name"><code class="literal">&lt;name&gt;</code></a>: Variable name
</li><li class="listitem">
<a class="link" href="apa.html#setInstallerVariable.persist"><code class="literal">&lt;persist&gt;</code></a>: Whether the variable will be available in the uninstaller as well.
</li><li class="listitem">
<a class="link" href="apa.html#setInstallerVariable.value"><code class="literal">&lt;value&gt;</code></a>: Value to set the variable to
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><pre class="programlisting">&lt;setInstallerVariable&gt;
    &lt;name&gt;dataDir&lt;/name&gt;
    &lt;value&gt;${installdir.dos}/data&lt;/value&gt;
&lt;/setInstallerVariable&gt;</pre><p><code class="literal">Additional Examples:</code>
<a class="link" href="ar01s08.html#snip415022">Example 1</a>, <a class="link" href="ar01s04.html#snip2123152">Example 2</a>, <a class="link" href="ar01s04.html#snip9426040">Example 3</a></p><h5><a id="_set_variable_from_regular_expression"></a>Set Variable from Regular Expression</h5><p>Set a installer variable to the result of a regular expression. If the name of the variable matches a parameter name, the value of the parameter will be updated.
The allowed properties in the <a class="link" href="apa.html#setInstallerVariableFromRegEx"><code class="literal">&lt;setInstallerVariableFromRegEx&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#setInstallerVariableFromRegEx.name"><code class="literal">&lt;name&gt;</code></a>: Name of the variable to set
</li><li class="listitem">
<a class="link" href="apa.html#setInstallerVariableFromRegEx.pattern"><code class="literal">&lt;pattern&gt;</code></a>: Pattern to match
</li><li class="listitem">
<a class="link" href="apa.html#setInstallerVariableFromRegEx.substitution"><code class="literal">&lt;substitution&gt;</code></a>: Value to replace matched text with
</li><li class="listitem">
<a class="link" href="apa.html#setInstallerVariableFromRegEx.text"><code class="literal">&lt;text&gt;</code></a>: Text to match
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Get the extension of a file. </strong>
</p><pre class="programlisting">&lt;setInstallerVariableFromRegEx&gt;
    &lt;name&gt;extension&lt;/name&gt;
    &lt;pattern&gt;.*\.([^\.]+)$&lt;/pattern&gt;
    &lt;substitution&gt;\1&lt;/substitution&gt;
    &lt;text&gt;${filename}&lt;/text&gt;
&lt;/setInstallerVariableFromRegEx&gt;</pre><p>
</p><p><code class="literal">Additional Examples:</code>
<a class="link" href="ar01s19.html#snip9049844">Example 1</a>, <a class="link" href="ar01s07.html#snip3647232">Example 2</a>, <a class="link" href="ar01s19.html#snip1537525">Example 3</a></p><h5><a id="_specify_encryption_password"></a>Specify encryption password</h5><p>Specifies and verifies password to use for copying files from installer
The allowed properties in the <a class="link" href="apa.html#setEncryptionPassword"><code class="literal">&lt;setEncryptionPassword&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#setEncryptionPassword.password"><code class="literal">&lt;password&gt;</code></a>: Password to use; action will throw error if password specified does not match password from build time
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Set <code class="literal">MYAPP_HOME</code> environment variable to directory where application is installed. </strong>
</p><pre class="programlisting">&lt;setEncryptionPassword&gt;
    &lt;password&gt;...&lt;/password&gt;
&lt;/setEncryptionPassword&gt;</pre><p>
</p><p><code class="literal">Additional Examples:</code>
<a class="link" href="ar01s28.html#snip8096471">Example 1</a>, <a class="link" href="ar01s28.html#snip3106330">Example 2</a></p><h4><a id="messages_actions_group"></a>Dialog Actions</h4><h5><a id="_show_password_question"></a>Show Password Question</h5><p>This action allows you to ask the user to provide a password in a popup window.
The allowed properties in the <a class="link" href="apa.html#showPasswordQuestion"><code class="literal">&lt;showPasswordQuestion&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#showPasswordQuestion.text"><code class="literal">&lt;text&gt;</code></a>: Question message that will be shown.
</li><li class="listitem">
<a class="link" href="apa.html#showPasswordQuestion.title"><code class="literal">&lt;title&gt;</code></a>: Dialog window title.
</li><li class="listitem">
<a class="link" href="apa.html#showPasswordQuestion.variable"><code class="literal">&lt;variable&gt;</code></a>: Variable name where the password will be stored.
</li></ul></div><p>The password will not be echoed back to the user in text mode installations and will be substituted by <span class="emphasis"><em>*</em></span> characters in GUI mode installations.</p><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Ask for a password and use it to execute a program. </strong>
</p><pre class="programlisting">  &lt;preUninstallationActionList&gt;
    &lt;showPasswordQuestion&gt;
        &lt;title&gt;Password Required&lt;/title&gt;
        &lt;text&gt;Please provide you MySQL password&lt;/text&gt;
        &lt;variable&gt;pass&lt;/variable&gt;
    &lt;/showPasswordQuestion&gt;
    &lt;runProgram&gt;
       &lt;program&gt;mysqldump&lt;/program&gt;
       &lt;programArguments&gt;--opt --user=${username} --password=${pass.password} ${databaseName} &gt; ${backupFolder}/dump.sql&lt;/programArguments&gt;
     &lt;/runProgram&gt;
  &lt;/preUninstallationActionList&gt;</pre><p>
</p><h5><a id="_show_info_dialog"></a>Show Info Dialog</h5><p>Prompt an info dialog to the user.
The allowed properties in the <a class="link" href="apa.html#showInfo"><code class="literal">&lt;showInfo&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#showInfo.text"><code class="literal">&lt;text&gt;</code></a>: Information message that will be shown
</li><li class="listitem">
<a class="link" href="apa.html#showInfo.title"><code class="literal">&lt;title&gt;</code></a>: Title of the dialog window
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Thanks message after installation. </strong>
</p><pre class="programlisting">&lt;showInfo&gt;
   &lt;text&gt;Thank you for installing ${project.fullName}!&lt;/text&gt;
   &lt;title&gt;Installation Finished!&lt;/title&gt;
&lt;/showInfo&gt;</pre><p>
</p><p><code class="literal">Additional Examples:</code>
<a class="link" href="ar01s21.html#snip2135560">Example 1</a>, <a class="link" href="ar01s08.html#snip1164767">Example 2</a>, <a class="link" href="ar01s08.html#snip4976753">Example 3</a></p><h5><a id="_show_text_dialog"></a>Show Text Dialog</h5><p>Display a read-only text dialog to the user.
The allowed properties in the <a class="link" href="apa.html#showText"><code class="literal">&lt;showText&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#showText.height"><code class="literal">&lt;height&gt;</code></a>: Text window height
</li><li class="listitem">
<a class="link" href="apa.html#showText.htmlText"><code class="literal">&lt;htmlText&gt;</code></a>: HTML text that will be shown in Qt mode. Note that regular text still needs to be provided in case the installer is run in another mode
</li><li class="listitem">
<a class="link" href="apa.html#showText.text"><code class="literal">&lt;text&gt;</code></a>: Text that will be shown.
</li><li class="listitem">
<a class="link" href="apa.html#showText.title"><code class="literal">&lt;title&gt;</code></a>: Dialog title.
</li><li class="listitem">
<a class="link" href="apa.html#showText.width"><code class="literal">&lt;width&gt;</code></a>: Text window width
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Display an introduction text at the end of the installation. </strong>
</p><pre class="programlisting">&lt;finalPageActionList&gt;
   &lt;showText&gt;
      &lt;progressText&gt;View Notes&lt;/progressText&gt;
      &lt;title&gt;InstallBuilder Notes&lt;/title&gt;
      &lt;width&gt;500&lt;/width&gt;
      &lt;height&gt;600&lt;/height&gt;
      &lt;text&gt;BitRock InstallBuilder is a development tool for
building crossplatform installers for desktop and server software.
 With InstallBuilder, you can quickly create professional installers
for Linux, Windows, Mac OS X, Solaris and other platforms from a single
project file and build environment. In addition to installers,
InstallBuilder will generate RPM and Debian packages and multiplatform
CDs/DVDs. Its new automatic update functionality makes it easy to deliver
 updates directly to your users once they have your software installed.
...&lt;/text&gt;
   &lt;/showText&gt;
&lt;/finalPageActionList&gt;</pre><p>
</p><p>If you are using InstallBuilder for Qt, the <a class="link" href="apa.html#showText"><code class="literal">&lt;showText&gt;</code></a> will be also able to display HTML text when executing in qt mode. Please note you should still provide a plain text to display in other modes:</p><p><strong>Display an HTML document. </strong>
</p><pre class="programlisting">&lt;finalPageActionList&gt;
   &lt;showText&gt;
      &lt;progressText&gt;View Notes&lt;/progressText&gt;
      &lt;title&gt;InstallBuilder Notes&lt;/title&gt;
      &lt;width&gt;500&lt;/width&gt;
      &lt;height&gt;600&lt;/height&gt;
      &lt;htmlText&gt;&amp;lt;h1&amp;gt;This is HTML text&amp;lt;/h1&amp;gt;

&amp;lt;p&amp;gt;The supported platforms are:
&amp;lt;ul&amp;gt;
&amp;lt;li&amp;gt;&amp;lt;b&amp;gt;Linux&amp;lt;/b&amp;gt;&amp;lt;/li&amp;gt;
&amp;lt;li&amp;gt;&amp;lt;b&amp;gt;Windows&amp;lt;/b&amp;gt;&amp;lt;/li&amp;gt;
&amp;lt;li&amp;gt;&amp;lt;b&amp;gt;OS X&amp;lt;/b&amp;gt;&amp;lt;/li&amp;gt;
&amp;lt;li&amp;gt;&amp;lt;b&amp;gt;...&amp;lt;/b&amp;gt;&amp;lt;/li&amp;gt;
&amp;lt;/ul&amp;gt;
&amp;lt;/p&amp;gt;
&lt;/htmlText&gt;
      &lt;text&gt;Some long plain text...&lt;/text&gt;
   &lt;/showText&gt;
&lt;/finalPageActionList&gt;</pre><p>
</p><p>If the HTML text is read from a file at runtime, you don’t have to escape it:</p><p><strong>Display a packed HTML file. </strong>
</p><pre class="programlisting">&lt;finalPageActionList&gt;
   &lt;actionGroup progressText="View Notes"&gt;
     &lt;actionList&gt;
       &lt;readFile&gt;
         &lt;path&gt;${installdir}/notes.html&lt;/path&gt;
         &lt;name&gt;htmlText&lt;/name&gt;
       &lt;/readFile&gt;
       &lt;showText&gt;
          &lt;title&gt;InstallBuilder Notes&lt;/title&gt;
          &lt;width&gt;500&lt;/width&gt;
          &lt;height&gt;600&lt;/height&gt;
          &lt;htmlText&gt;${htmlText}&lt;/htmlText&gt;
          &lt;text&gt;Some long plain text...&lt;/text&gt;
       &lt;/showText&gt;
     &lt;/actionList&gt;
   &lt;/actionGroup&gt;
&lt;/finalPageActionList&gt;</pre><p>
</p><p><code class="literal">Additional Examples:</code>
<a class="link" href="ar01s13.html#snip6279997">Example 1</a>, <a class="link" href="ar01s10.html#snip7322928">Example 2</a></p><h5><a id="_show_question_dialog"></a>Show Question Dialog</h5><p>Prompt a question to the user. The result is stored as <span class="emphasis"><em>yes</em></span> or <span class="emphasis"><em>no</em></span> in the given variable name.
The allowed properties in the <a class="link" href="apa.html#showQuestion"><code class="literal">&lt;showQuestion&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#showQuestion.default"><code class="literal">&lt;default&gt;</code></a>: Default answer, it can be yes or no.
</li><li class="listitem">
<a class="link" href="apa.html#showQuestion.text"><code class="literal">&lt;text&gt;</code></a>: Question message that will be shown.
</li><li class="listitem">
<a class="link" href="apa.html#showQuestion.title"><code class="literal">&lt;title&gt;</code></a>: Title of the dialog window
</li><li class="listitem">
<a class="link" href="apa.html#showQuestion.variable"><code class="literal">&lt;variable&gt;</code></a>: Variable name where the result will be stored
</li></ul></div><p>The best way of checking the value is using the <a class="link" href="apb.html#isFalse"><code class="literal">&lt;isFalse&gt;</code></a> and <a class="link" href="apb.html#isTrue"><code class="literal">&lt;isTrue&gt;</code></a> rules.</p><p>The text in the <a class="link" href="apa.html#showQuestion"><code class="literal">&lt;showQuestion&gt;</code></a> buttons can be localized modifying the <a class="link" href="ar01s12.html#built_in_strings" title="12.2. Changing Built-in Installer Text Strings">language keys</a>:</p><pre class="screen">Installer.Button.Yes=Yes
Installer.Button.No=No</pre><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Ask a Yes/No question. </strong>
</p><pre class="programlisting">  &lt;showQuestion&gt;
     &lt;title&gt;Delete Configuration&lt;/title&gt;
     &lt;text&gt;Are you sure you want to delete the
     configuration files?&lt;/text&gt;
     &lt;variable&gt;answer&lt;/variable&gt;
     &lt;default&gt;yes&lt;/default&gt;
  &lt;/showQuestion&gt;</pre><p>
</p><p><code class="literal">Additional Examples:</code>
<a class="link" href="ar01s23.html#snip4524283">Example 1</a>, <a class="link" href="ar01s14.html#snip2606181">Example 2</a>, <a class="link" href="ar01s26.html#snip9101077">Example 3</a></p><h5><a id="_show_progress_dialog"></a>Show Progress Dialog</h5><p>Launch a popup dialog window which displays an indeterminate progress bar to process a list of actions. In text mode frontend, it will display a character-based animation.
The allowed properties in the <a class="link" href="apa.html#showProgressDialog"><code class="literal">&lt;showProgressDialog&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#showProgressDialog.height"><code class="literal">&lt;height&gt;</code></a>: Popup window height
</li><li class="listitem">
<a class="link" href="apa.html#showProgressDialog.title"><code class="literal">&lt;title&gt;</code></a>: Title of the progress dialog window
</li><li class="listitem">
<a class="link" href="apa.html#showProgressDialog.width"><code class="literal">&lt;width&gt;</code></a>: Popup window width
</li><li class="listitem">
<a class="link" href="apa.html#showProgressDialog.actionList"><code class="literal">&lt;actionList&gt;</code></a>: Actions to Execute
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Show dialog while database silent installation is in progress. </strong>
</p><pre class="programlisting">&lt;showProgressDialog&gt;
    &lt;title&gt;Please wait while database is installed&lt;/title&gt;
    &lt;actionList&gt;
        &lt;runProgram&gt;
            &lt;program&gt;${installdir}/db/setup-database&lt;/program&gt;
            &lt;programArguments&gt;--silent&lt;/programArguments&gt;
            &lt;workingDirectory&gt;${installdir}/db&lt;/workingDirectory&gt;
        &lt;/runProgram&gt;
    &lt;/actionList&gt;
&lt;/showProgressDialog&gt;</pre><p>
</p><p><code class="literal">Additional Examples:</code>
<a class="link" href="ar01s23.html#snip9625970">Example 1</a>, <a class="link" href="ar01s18.html#snip4707255">Example 2</a>, <a class="link" href="ar01s08.html#snip6580165">Example 3</a></p><h5><a id="_show_warning"></a>Show Warning</h5><p>This action allows you to display a message in a warning dialog.
The allowed properties in the <a class="link" href="apa.html#showWarning"><code class="literal">&lt;showWarning&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#showWarning.text"><code class="literal">&lt;text&gt;</code></a>: Warning message that will be shown.
</li><li class="listitem">
<a class="link" href="apa.html#showWarning.title"><code class="literal">&lt;title&gt;</code></a>: Title of the dialog window
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Warn if the installation directory is not empty. </strong>
</p><pre class="programlisting">&lt;showWarning&gt;
   &lt;text&gt;The selected installation directory is not empty!&lt;/text&gt;
   &lt;title&gt;Directory not empty&lt;/title&gt;
   &lt;ruleList&gt;
      &lt;fileTest path="${installdir}" condition="is_not_empty"/&gt;
   &lt;/ruleList&gt;
&lt;/showWarning&gt;</pre><p>
</p><p><code class="literal">Additional Examples:</code>
<a class="link" href="ar01s14.html#snip1901226">Example 1</a>, <a class="link" href="ar01s08.html#snip3612900">Example 2</a></p><h5><a id="_show_choice_dialog"></a>Show Choice Dialog</h5><p>Prompt a choice question dialog to the user.
The allowed properties in the <a class="link" href="apa.html#showChoiceQuestion"><code class="literal">&lt;showChoiceQuestion&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#showChoiceQuestion.defaultValue"><code class="literal">&lt;defaultValue&gt;</code></a>: Default value
</li><li class="listitem">
<a class="link" href="apa.html#showChoiceQuestion.text"><code class="literal">&lt;text&gt;</code></a>: Information message that will be shown
</li><li class="listitem">
<a class="link" href="apa.html#showChoiceQuestion.title"><code class="literal">&lt;title&gt;</code></a>: Dialog title
</li><li class="listitem">
<a class="link" href="apa.html#showChoiceQuestion.variable"><code class="literal">&lt;variable&gt;</code></a>: Variable to store choice
</li><li class="listitem">
<a class="link" href="apa.html#showChoiceQuestion.optionList"><code class="literal">&lt;optionList&gt;</code></a>: Predefined list of options that allows the user to select a value
</li></ul></div><p>The text in the <a class="link" href="apa.html#showChoiceQuestion"><code class="literal">&lt;showChoiceQuestion&gt;</code></a> buttons can be localized modifying the <a class="link" href="ar01s12.html#built_in_strings" title="12.2. Changing Built-in Installer Text Strings">language keys</a>:</p><pre class="screen">Installer.Button.OK=OK
Installer.Button.Cancel=Cancel</pre><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Ask the user to select the uninstallation type. </strong>
</p><pre class="programlisting">  &lt;preUninstallationActionList&gt;
     ...
     &lt;showChoiceQuestion&gt;
       &lt;defaultValue&gt;keep&lt;/defaultValue&gt;
       &lt;text&gt;Do you want to keep your configuration files?&lt;/text&gt;
       &lt;variable&gt;answer&lt;/variable&gt;
       &lt;optionList&gt;
          &lt;option&gt;
             &lt;description&gt;Does not delete the configuration files&lt;/description&gt;
             &lt;text&gt;Keep configuration files&lt;/text&gt;
             &lt;value&gt;keep&lt;/value&gt;
          &lt;/option&gt;
          &lt;option&gt;
             &lt;description&gt;Deletes the configuration files&lt;/description&gt;
             &lt;text&gt;Delete configuration files&lt;/text&gt;
             &lt;value&gt;delete&lt;/value&gt;
          &lt;/option&gt;
       &lt;/optionList&gt;
     &lt;/showChoiceQuestion&gt;
     &lt;deleteFile path="${installdir}/configuration" &gt;
        &lt;ruleList&gt;
           &lt;compareText text="${answer}" logic="equals" value="delete"/&gt;
        &lt;/ruleList&gt;
     &lt;/deleteFile&gt;
     ...
  &lt;/preUninstallationActionList&gt;</pre><p>
</p><p>If the user cancels the dialog, either clicking <code class="literal">Cancel</code> or closing the popup, the result variable will be set to empty. If the user clicks <code class="literal">Ok</code>, the result variable will be set to the selected choice item. This behavior can be used to validate the user input:</p><p><strong>Force the user to select a choice. </strong>
</p><pre class="programlisting">  &lt;preUninstallationActionList&gt;
     ...
     &lt;while&gt;
        &lt;actionList&gt;
            &lt;showChoiceQuestion&gt;
                &lt;defaultValue&gt;keep&lt;/defaultValue&gt;
                &lt;text&gt;Do you want to keep your configuration files?&lt;/text&gt;
                &lt;variable&gt;answer&lt;/variable&gt;
                &lt;optionList&gt;
                    &lt;option&gt;
                        &lt;description&gt;Does not delete the configuration files&lt;/description&gt;
                        &lt;image&gt;&lt;/image&gt;
                        &lt;text&gt;Keep configuration files&lt;/text&gt;
                        &lt;value&gt;keep&lt;/value&gt;
                    &lt;/option&gt;
                    &lt;option&gt;
                        &lt;description&gt;Deletes the configuration files&lt;/description&gt;
                        &lt;image&gt;&lt;/image&gt;
                        &lt;text&gt;Delete configuration files&lt;/text&gt;
                        &lt;value&gt;delete&lt;/value&gt;
                    &lt;/option&gt;
                &lt;/optionList&gt;
            &lt;/showChoiceQuestion&gt;
            &lt;break&gt;
                &lt;ruleList&gt;
                    &lt;compareText text="${answer}" logic="does_not_equal" value=""/&gt;
                &lt;/ruleList&gt;
            &lt;/break&gt;
            &lt;showWarning&gt;
                &lt;text&gt;You must select an Option!&lt;/text&gt;
            &lt;/showWarning&gt;
        &lt;/actionList&gt;
    &lt;/while&gt;
    ...
  &lt;/preUninstallationActionList&gt;</pre><p>
</p><h5><a id="_throw_error"></a>Throw Error</h5><p>Generate an error inside the installer so the installer will exit. The only exception to this is when abortOnError equals zero or the action is inside a validationActionList, in which case it will prompt an error dialog to the user, but will not exit the installer.
The allowed properties in the <a class="link" href="apa.html#throwError"><code class="literal">&lt;throwError&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#throwError.text"><code class="literal">&lt;text&gt;</code></a>: Error message
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Abort if the installer is not launched as Administrator. </strong>
</p><pre class="programlisting">&lt;initializationActionList&gt;
   &lt;throwError&gt;
      &lt;text&gt;The installer requires Admin privileges. Aborting...&lt;/text&gt;
      &lt;ruleList&gt;
        &lt;isFalse value="${installer_is_root_install}"/&gt;
      &lt;/ruleList&gt;
   &lt;/throwError&gt;
&lt;/initializationActionList&gt;</pre><p>
</p><p><code class="literal">Additional Examples:</code>
<a class="link" href="ar01s02.html#snip3666467">Example 1</a>, <a class="link" href="ar01s05.html#snip7580459">Example 2</a>, <a class="link" href="ar01s22.html#snip2282278">Example 3</a></p><h5><a id="_show_string_question"></a>Show String Question</h5><p>This action allows you to ask the user a question in a popup window.
The allowed properties in the <a class="link" href="apa.html#showStringQuestion"><code class="literal">&lt;showStringQuestion&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#showStringQuestion.text"><code class="literal">&lt;text&gt;</code></a>: Question message that will be shown.
</li><li class="listitem">
<a class="link" href="apa.html#showStringQuestion.title"><code class="literal">&lt;title&gt;</code></a>: Dialog window title.
</li><li class="listitem">
<a class="link" href="apa.html#showStringQuestion.variable"><code class="literal">&lt;variable&gt;</code></a>: Variable name where the answer will be stored.
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Ask for an username. </strong>
</p><pre class="programlisting">  &lt;showStringQuestion&gt;
     &lt;title&gt;Username&lt;/title&gt;
     &lt;text&gt;Please introduce your username:&lt;/text&gt;
     &lt;variable&gt;username&lt;/variable&gt;
  &lt;/showStringQuestion&gt;</pre><p>
</p><h5><a id="_write_text_to_console"></a>Write text to console</h5><p>Write text to console
The allowed properties in the <a class="link" href="apa.html#consoleWrite"><code class="literal">&lt;consoleWrite&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#consoleWrite.text"><code class="literal">&lt;text&gt;</code></a>: Text to write
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Write error message to standard output. </strong>
</p><pre class="programlisting">&lt;consoleWrite&gt;
    &lt;text&gt;Unable to install database in directory ${installdir}&lt;/text&gt;
&lt;/consoleWrite&gt;</pre><p>
</p><h4><a id="registry_actions_group"></a>Registry Actions</h4><h5><a id="_registry_find_key"></a>Registry Find Key</h5><p>Retrieve the first registry hive and content matching a certain expression and store it as a list in an installer variable. If no match is found the variable will be created empty.
The allowed properties in the <a class="link" href="apa.html#registryFind"><code class="literal">&lt;registryFind&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#registryFind.dataPattern"><code class="literal">&lt;dataPattern&gt;</code></a>: Pattern to match in the value
</li><li class="listitem">
<a class="link" href="apa.html#registryFind.findAll"><code class="literal">&lt;findAll&gt;</code></a>: Whether to look for the first occurrence or for all
</li><li class="listitem">
<a class="link" href="apa.html#registryFind.keyPattern"><code class="literal">&lt;keyPattern&gt;</code></a>: Pattern to match key name with
</li><li class="listitem">
<a class="link" href="apa.html#registryFind.namePattern"><code class="literal">&lt;namePattern&gt;</code></a>: Pattern to match entry name with
</li><li class="listitem">
<a class="link" href="apa.html#registryFind.rootKey"><code class="literal">&lt;rootKey&gt;</code></a>: Root key from which start the search
</li><li class="listitem">
<a class="link" href="apa.html#registryFind.searchDepth"><code class="literal">&lt;searchDepth&gt;</code></a>: Maximum depth of the search. 0 will look just in the Root Key
</li><li class="listitem">
<a class="link" href="apa.html#registryFind.variable"><code class="literal">&lt;variable&gt;</code></a>: Variable name to store the results
</li><li class="listitem">
<a class="link" href="apa.html#registryFind.wowMode"><code class="literal">&lt;wowMode&gt;</code></a>: Determines whether we want to access a 32-bit or 64-bit view of the Registry
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>List all applications from same vendor as current installer. </strong>
</p><pre class="programlisting">&lt;registryFind&gt;
    &lt;findAll&gt;1&lt;/findAll&gt;
    &lt;keyPattern&gt;*&lt;/keyPattern&gt;
    &lt;namePattern&gt;DisplayName&lt;/namePattern&gt;
    &lt;rootKey&gt;HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall&lt;/rootKey&gt;
    &lt;searchDepth&gt;1&lt;/searchDepth&gt;
    &lt;variable&gt;installedApplications&lt;/variable&gt;
&lt;/registryFind&gt;
&lt;setInstallerVariable&gt;
    &lt;name&gt;text&lt;/name&gt;
    &lt;value&gt;&lt;/value&gt;
&lt;/setInstallerVariable&gt;
&lt;foreach&gt;
    &lt;values&gt;${installedApplications}&lt;/values&gt;
    &lt;variables&gt;key name value&lt;/variables&gt;
    &lt;actionList&gt;
        &lt;registryGet&gt;
            &lt;key&gt;${key}&lt;/key&gt;
            &lt;name&gt;Publisher&lt;/name&gt;
            &lt;variable&gt;publisher&lt;/variable&gt;
        &lt;/registryGet&gt;
        &lt;actionGroup&gt;
            &lt;actionList&gt;
                &lt;md5 text="${key}" variable="md5"/&gt;
                &lt;setInstallerVariable&gt;
                    &lt;name&gt;text&lt;/name&gt;
                    &lt;value&gt;${text}
${md5}=${value}&lt;/value&gt;
                &lt;/setInstallerVariable&gt;
            &lt;/actionList&gt;
            &lt;ruleList&gt;
                &lt;compareText&gt;
                    &lt;logic&gt;equals&lt;/logic&gt;
                    &lt;text&gt;${publisher}&lt;/text&gt;
                    &lt;value&gt;${project.vendor}&lt;/value&gt;
                &lt;/compareText&gt;
            &lt;/ruleList&gt;
        &lt;/actionGroup&gt;
    &lt;/actionList&gt;
&lt;/foreach&gt;</pre><p>
</p><p>Action <a class="link" href="apa.html#registryFind"><code class="literal">&lt;registryFind&gt;</code></a> returns all keys from specified subtree matching specified pattern for key.</p><p><code class="literal">Additional Examples:</code>
<a class="link" href="ar01s26.html#snip4706373">Example 1</a>, <a class="link" href="ar01s07.html#snip4153424">Example 2</a></p><h5><a id="_registry_get_matching_key_value"></a>Registry Get Matching Key Value</h5><p>Store the value of the first match of a registry key matching a certain expression in an installer variable. If the key or name does not exist, then the variable will be created empty. The name can contain a wildcard expression (using *)
The allowed properties in the <a class="link" href="apa.html#registryGetMatch"><code class="literal">&lt;registryGetMatch&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#registryGetMatch.key"><code class="literal">&lt;key&gt;</code></a>: Registry key
</li><li class="listitem">
<a class="link" href="apa.html#registryGetMatch.name"><code class="literal">&lt;name&gt;</code></a>: Entry name to read value from
</li><li class="listitem">
<a class="link" href="apa.html#registryGetMatch.variable"><code class="literal">&lt;variable&gt;</code></a>: Variable name to store registry value to
</li><li class="listitem">
<a class="link" href="apa.html#registryGetMatch.wowMode"><code class="literal">&lt;wowMode&gt;</code></a>: Determines whether we want to access a 32-bit or 64-bit view of the Registry
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Get the data of the first value in our application key. </strong>
</p><pre class="programlisting">&lt;registryGetMatch&gt;
  &lt;key&gt;HKEY_LOCAL_MACHINE\SOFTWARE\${project.vendor}\${project.fullName}&lt;/key&gt;
  &lt;name&gt;Loc*&lt;/name&gt;
  &lt;variable&gt;location&lt;/variable&gt;
&lt;/registryGetMatch&gt;</pre><p>
</p><p><code class="literal">Additional Examples:</code>
<a class="link" href="ar01s26.html#snip9810478">Example 1</a></p><h5><a id="_delete_registry_key"></a>Delete Registry Key</h5><p>Delete a registry entry. If the entry to delete is only a registry key and it does not exist, the action will be ignored. Deleting a registry value (key + name combination) that does not exist will trigger a regular error.
The allowed properties in the <a class="link" href="apa.html#registryDelete"><code class="literal">&lt;registryDelete&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#registryDelete.key"><code class="literal">&lt;key&gt;</code></a>: Registry key
</li><li class="listitem">
<a class="link" href="apa.html#registryDelete.name"><code class="literal">&lt;name&gt;</code></a>: Entry name to delete
</li><li class="listitem">
<a class="link" href="apa.html#registryDelete.wowMode"><code class="literal">&lt;wowMode&gt;</code></a>: Determines whether we want to access a 32-bit or 64-bit view of the Registry
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Delete application’s build timestamp. </strong>
</p><pre class="programlisting">&lt;registryDelete&gt;
    &lt;key&gt;HKEY_LOCAL_MACHINE\Software\${project.vendor}\${project.fullName}&lt;/key&gt;
    &lt;name&gt;Timestamp&lt;/name&gt;
&lt;/registryDelete&gt;</pre><p>
</p><p><code class="literal">Additional Examples:</code>
<a class="link" href="ar01s22.html#snip9734202">Example 1</a>, <a class="link" href="ar01s26.html#snip2954107">Example 2</a></p><h5><a id="_set_registry_key_value"></a>Set Registry Key Value</h5><p>Create a new registry key or modify the value of an existing registry key.
The allowed properties in the <a class="link" href="apa.html#registrySet"><code class="literal">&lt;registrySet&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#registrySet.key"><code class="literal">&lt;key&gt;</code></a>: Registry key
</li><li class="listitem">
<a class="link" href="apa.html#registrySet.name"><code class="literal">&lt;name&gt;</code></a>: Entry name to set or modify value to
</li><li class="listitem">
<a class="link" href="apa.html#registrySet.type"><code class="literal">&lt;type&gt;</code></a>: Type of key to add
</li><li class="listitem">
<a class="link" href="apa.html#registrySet.value"><code class="literal">&lt;value&gt;</code></a>: Value to set to the registry key
</li><li class="listitem">
<a class="link" href="apa.html#registrySet.wowMode"><code class="literal">&lt;wowMode&gt;</code></a>: Determines whether we want to access a 32-bit or 64-bit view of the Registry
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Store application’s build timestamp. </strong>
</p><pre class="programlisting">&lt;registrySet&gt;
    &lt;key&gt;HKEY_LOCAL_MACHINE\Software\${project.vendor}\${project.fullName}&lt;/key&gt;
    &lt;name&gt;Timestamp&lt;/name&gt;
    &lt;value&gt;${installer_builder_timestamp}&lt;/value&gt;
&lt;/registrySet&gt;</pre><p>
</p><p><code class="literal">Additional Examples:</code>
<a class="link" href="ar01s26.html#snip3185753">Example 1</a></p><h5><a id="_get_registry_key_name"></a>Get Registry Key Name</h5><p>Store in <span class="emphasis"><em>variable</em></span> the first registry key that matches the given pattern, or set the variable to empty otherwise. The search is case-sensitive for the whole key provided.
The allowed properties in the <a class="link" href="apa.html#registryGetKey"><code class="literal">&lt;registryGetKey&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#registryGetKey.key"><code class="literal">&lt;key&gt;</code></a>: Registry key
</li><li class="listitem">
<a class="link" href="apa.html#registryGetKey.variable"><code class="literal">&lt;variable&gt;</code></a>: Variable to store result
</li><li class="listitem">
<a class="link" href="apa.html#registryGetKey.wowMode"><code class="literal">&lt;wowMode&gt;</code></a>: Determines whether we want to access a 32-bit or 64-bit view of the Registry
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Get the fisrt key referencing one of the applications under <code class="literal">${project.vendor}</code>. </strong>
</p><pre class="programlisting">&lt;registryGetKey&gt;
  &lt;key&gt;HKEY_LOCAL_MACHINE\SOFTWARE\${project.vendor}\*&lt;/key&gt;
  &lt;variable&gt;application&lt;/variable&gt;
&lt;/registryGetKey&gt;</pre><p>
</p><p><code class="literal">Additional Examples:</code>
<a class="link" href="ar01s26.html#snip9688213">Example 1</a></p><h5><a id="_get_registry_key_value"></a>Get Registry Key Value</h5><p>Store the value of a registry key in an installer variable. If the key or name does not exist, then the variable will be created empty.
The allowed properties in the <a class="link" href="apa.html#registryGet"><code class="literal">&lt;registryGet&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#registryGet.key"><code class="literal">&lt;key&gt;</code></a>: Registry key
</li><li class="listitem">
<a class="link" href="apa.html#registryGet.name"><code class="literal">&lt;name&gt;</code></a>: Entry name to read value from
</li><li class="listitem">
<a class="link" href="apa.html#registryGet.variable"><code class="literal">&lt;variable&gt;</code></a>: Variable name to store registry value to
</li><li class="listitem">
<a class="link" href="apa.html#registryGet.wowMode"><code class="literal">&lt;wowMode&gt;</code></a>: Determines whether we want to access a 32-bit or 64-bit view of the Registry
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Find Google Chrome installation directory. </strong>
</p><pre class="programlisting">&lt;registryGet&gt;
    &lt;key&gt;HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\App Paths\chrome.exe&lt;/key&gt;
    &lt;name&gt;Path&lt;/name&gt;
    &lt;variable&gt;chrome_home&lt;/variable&gt;
&lt;/registryGet&gt;</pre><p>
</p><p>The <a class="link" href="apa.html#registryGet"><code class="literal">&lt;registryGet&gt;</code></a> actions reads <code class="literal">App Paths</code> for <code class="literal">chrome.exe</code> from Microsoft Windows registry. If <code class="literal">chrome.exe</code> is not installed or properly registered, <code class="literal">chrome_home</code> variable will be set to empty string.</p><p><code class="literal">Additional Examples:</code>
<a class="link" href="ar01s08.html#snip415022">Example 1</a>, <a class="link" href="ar01s07.html#snip4153424">Example 2</a>, <a class="link" href="ar01s22.html#snip2282278">Example 3</a></p><h4><a id="windows_actions_group"></a>Windows-specific actions</h4><h5><a id="_change_resource_information"></a>Change Resource Information</h5><p>Change resource information of a Windows executable
The allowed properties in the <a class="link" href="apa.html#changeExecutableResources"><code class="literal">&lt;changeExecutableResources&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#changeExecutableResources.path"><code class="literal">&lt;path&gt;</code></a>: Path to the Windows executable to modify
</li><li class="listitem">
<a class="link" href="apa.html#changeExecutableResources.windowsResourceComments"><code class="literal">&lt;windowsResourceComments&gt;</code></a>: Comments for resources embedded in Windows executable
</li><li class="listitem">
<a class="link" href="apa.html#changeExecutableResources.windowsResourceCompanyName"><code class="literal">&lt;windowsResourceCompanyName&gt;</code></a>: Company Name for resources embedded in Windows executable
</li><li class="listitem">
<a class="link" href="apa.html#changeExecutableResources.windowsResourceFileDescription"><code class="literal">&lt;windowsResourceFileDescription&gt;</code></a>: File Description for resources embedded in Windows executable
</li><li class="listitem">
<a class="link" href="apa.html#changeExecutableResources.windowsResourceFileVersion"><code class="literal">&lt;windowsResourceFileVersion&gt;</code></a>: File version for resources embedded in Windows executable
</li><li class="listitem">
<a class="link" href="apa.html#changeExecutableResources.windowsResourceInternalName"><code class="literal">&lt;windowsResourceInternalName&gt;</code></a>: Internal Name for resources embedded in Windows executable
</li><li class="listitem">
<a class="link" href="apa.html#changeExecutableResources.windowsResourceLegalCopyright"><code class="literal">&lt;windowsResourceLegalCopyright&gt;</code></a>: Legal Copyright for resources embedded in Windows executable
</li><li class="listitem">
<a class="link" href="apa.html#changeExecutableResources.windowsResourceLegalTrademarks"><code class="literal">&lt;windowsResourceLegalTrademarks&gt;</code></a>: Legal Trademarks for resources embedded in Windows executable
</li><li class="listitem">
<a class="link" href="apa.html#changeExecutableResources.windowsResourceOriginalFilename"><code class="literal">&lt;windowsResourceOriginalFilename&gt;</code></a>: Original Filename for resources embedded in Windows executable
</li><li class="listitem">
<a class="link" href="apa.html#changeExecutableResources.windowsResourceProductName"><code class="literal">&lt;windowsResourceProductName&gt;</code></a>: Product Name for resources embedded in Windows executable
</li><li class="listitem">
<a class="link" href="apa.html#changeExecutableResources.windowsResourceProductVersion"><code class="literal">&lt;windowsResourceProductVersion&gt;</code></a>: Product Version for resources embedded in Windows executable
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Change Java launcher’s product name to evaluation if license not specified. </strong>
</p><pre class="programlisting">&lt;changeExecutableResources&gt;
    &lt;path&gt;${installdir}/mylauncher.exe&lt;/path&gt;
    &lt;windowsResourceProductName&gt;My Application (evaluation copy)&lt;/windowsResourceProductName&gt;
    &lt;ruleList&gt;
        &lt;stringTest&gt;
            &lt;text&gt;${licenseinfo}&lt;/text&gt;
            &lt;type&gt;empty&lt;/type&gt;
        &lt;/stringTest&gt;
    &lt;/ruleList&gt;
&lt;/changeExecutableResources&gt;</pre><p>
</p><h5><a id="_autodetect_net_framework"></a>Autodetect .NET Framework</h5><p>Autodetects an existing .NET (tm) installation in the system and creates corresponding installer variables: dotnet_version. If a valid .NET framework version was found, the variable dotnet_autodetected, will be set to 1
The allowed properties in the <a class="link" href="apa.html#autodetectDotNetFramework"><code class="literal">&lt;autodetectDotNetFramework&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#autodetectDotNetFramework.validDotNetVersionList"><code class="literal">&lt;validDotNetVersionList&gt;</code></a>: List of supported .NET versions
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Detect .NET version between 2.0 and 3.5. </strong>
</p><pre class="programlisting">&lt;autodetectDotNetFramework&gt;
    &lt;validDotNetVersionList&gt;
        &lt;validDotNetVersion&gt;
            &lt;maxVersion&gt;3.5&lt;/maxVersion&gt;
            &lt;minVersion&gt;2.0&lt;/minVersion&gt;
        &lt;/validDotNetVersion&gt;
    &lt;/validDotNetVersionList&gt;
&lt;/autodetectDotNetFramework&gt;</pre><p>
</p><p><strong>Bundle and install .NET Framework if it is not present in the user machine. </strong>
</p><pre class="programlisting">&lt;project&gt;
 ...
 &lt;componentList&gt;
   &lt;!-- This component takes care of autodetecting an existing
   installation of .NET and unpack and install the bundled one
   if it is not found --&gt;
   &lt;component&gt;
     &lt;name&gt;dotnet&lt;/name&gt;
     &lt;description&gt;ServiceEx&lt;/description&gt;
     &lt;canBeEdited&gt;0&lt;/canBeEdited&gt;
     &lt;selected&gt;1&lt;/selected&gt;
     &lt;show&gt;0&lt;/show&gt;
     &lt;folderList&gt;
       &lt;folder&gt;
         &lt;description&gt;.NET installer&lt;/description&gt;
         &lt;destination&gt;${installdir}&lt;/destination&gt;
         &lt;name&gt;dotnet&lt;/name&gt;
         &lt;platforms&gt;windows&lt;/platforms&gt;
         &lt;distributionFileList&gt;
           &lt;distributionFile&gt;
             &lt;origin&gt;/path/to/dotnetfx.exe&lt;/origin&gt;
           &lt;/distributionFile&gt;
         &lt;/distributionFileList&gt;
         &lt;ruleList&gt;
            &lt;!-- The .NET installer will be unpacked on demand
            so we attach a rule that will be never passed to
            prevent the automatic unpack process --&gt;
            &lt;isTrue value="0"/&gt;
         &lt;/ruleList&gt;
       &lt;/folder&gt;
     &lt;/folderList&gt;
     ...
     &lt;readyToInstallActionList&gt;
       &lt;!-- check .NET &gt;= 2.0 is installed --&gt;
       &lt;autodetectDotNetFramework&gt;
         &lt;validDotNetVersionList&gt;
           &lt;validDotNetVersion&gt;
             &lt;maxVersion&gt;&lt;/maxVersion&gt;
             &lt;minVersion&gt;2.0&lt;/minVersion&gt;
           &lt;/validDotNetVersion&gt;
         &lt;/validDotNetVersionList&gt;
       &lt;/autodetectDotNetFramework&gt;
       &lt;!-- install .NET if not found --&gt;
       &lt;actionGroup&gt;
         &lt;progressText&gt;Installing .NET framework&lt;/progressText&gt;
         &lt;actionList&gt;
           &lt;unpackFile&gt;
             &lt;component&gt;dotnet&lt;/component&gt;
             &lt;destination&gt;${system_temp_directory}/dotnetfx.exe&lt;/destination&gt;
             &lt;folder&gt;dotnet&lt;/folder&gt;
             &lt;origin&gt;dotnetfx.exe&lt;/origin&gt;
           &lt;/unpackFile&gt;
           &lt;runProgram&gt;
             &lt;program&gt;${system_temp_directory}/dotnetfx.exe&lt;/program&gt;
             &lt;programArguments&gt;/q:a "/c:install.exe /qb"&lt;/programArguments&gt;
           &lt;/runProgram&gt;
           &lt;!-- Delete the .NET installer --&gt;
           &lt;deleteFile&gt;
             &lt;path&gt;${system_temp_directory}/dotnetfx.exe&lt;/path&gt;
           &lt;/deleteFile&gt;
         &lt;/actionList&gt;
         &lt;ruleList&gt;
           &lt;isFalse&gt;
             &lt;value&gt;${dotnet_autodetected}&lt;/value&gt;
           &lt;/isFalse&gt;
         &lt;/ruleList&gt;
       &lt;/actionGroup&gt;
     &lt;/readyToInstallActionList&gt;
   &lt;/component&gt;
 &lt;/componentList&gt;
 ...
&lt;/project&gt;</pre><p>
</p><h5><a id="_add_shared_dll"></a>Add Shared DLL</h5><p>This action allows you to increment the reference count for a shared DLL.
The allowed properties in the <a class="link" href="apa.html#addSharedDLL"><code class="literal">&lt;addSharedDLL&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#addSharedDLL.path"><code class="literal">&lt;path&gt;</code></a>: Path to the shared DLL
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Add <code class="literal">shared.dll</code> that is located in <code class="literal">Common Files\MyApp</code> folder. </strong>
</p><pre class="programlisting">&lt;addSharedDLL&gt;
    &lt;path&gt;${windows_folder_program_files_common}/MyApp/shared.dll&lt;/path&gt;
&lt;/addSharedDLL&gt;</pre><p>
</p><h5><a id="_remove_shared_dll"></a>Remove Shared DLL</h5><p>This action allows you to decrement the reference count for a shared DLL. If it reaches zero, the file will be removed.
The allowed properties in the <a class="link" href="apa.html#removeSharedDLL"><code class="literal">&lt;removeSharedDLL&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#removeSharedDLL.path"><code class="literal">&lt;path&gt;</code></a>: Path to the shared DLL
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Remove <code class="literal">shared.dll</code> that is located in <code class="literal">Common Files\MyApp</code> folder. </strong>
</p><pre class="programlisting">&lt;removeSharedDLL&gt;
    &lt;path&gt;${windows_folder_program_files_common}/MyApp/shared.dll&lt;/path&gt;
&lt;/removeSharedDLL&gt;</pre><p>
</p><h5><a id="_change_windows_file_attributes"></a>Change Windows file attributes</h5><p>Change Windows attributes for a file or directory.
The allowed properties in the <a class="link" href="apa.html#changeWindowsAttributes"><code class="literal">&lt;changeWindowsAttributes&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#changeWindowsAttributes.archive"><code class="literal">&lt;archive&gt;</code></a>: Whether the file has or has not changed since the last backup.
</li><li class="listitem">
<a class="link" href="apa.html#changeWindowsAttributes.excludeFiles"><code class="literal">&lt;excludeFiles&gt;</code></a>: Patterns to exclude files
</li><li class="listitem">
<a class="link" href="apa.html#changeWindowsAttributes.files"><code class="literal">&lt;files&gt;</code></a>: File patterns to apply action to
</li><li class="listitem">
<a class="link" href="apa.html#changeWindowsAttributes.hidden"><code class="literal">&lt;hidden&gt;</code></a>: Whether the file is visible or not
</li><li class="listitem">
<a class="link" href="apa.html#changeWindowsAttributes.matchHiddenFiles"><code class="literal">&lt;matchHiddenFiles&gt;</code></a>: Whether or not to attempt to match Windows hidden files
</li><li class="listitem">
<a class="link" href="apa.html#changeWindowsAttributes.readOnly"><code class="literal">&lt;readOnly&gt;</code></a>: Whether the file is read only or writable
</li><li class="listitem">
<a class="link" href="apa.html#changeWindowsAttributes.system"><code class="literal">&lt;system&gt;</code></a>: Whether the file is a System file or a regular one
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Set <code class="literal">*.ini</code> files as read only and hidden. </strong>
</p><pre class="programlisting">&lt;changeWindowsAttributes&gt;
    &lt;files&gt;${installdir}/*.ini&lt;/files&gt;
    &lt;hidden&gt;1&lt;/hidden&gt;
    &lt;readOnly&gt;1&lt;/readOnly&gt;
&lt;/changeWindowsAttributes&gt;</pre><p>
</p><p><code class="literal">Additional Examples:</code>
<a class="link" href="ar01s26.html#snip6241102">Example 1</a></p><h5><a id="_create_windows_file_associations"></a>Create Windows File Associations</h5><p>This action allows you to create file associations for Windows, defining commands such as "open" for a given file extension.
The allowed properties in the <a class="link" href="apa.html#associateWindowsFileExtension"><code class="literal">&lt;associateWindowsFileExtension&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#associateWindowsFileExtension.extensions"><code class="literal">&lt;extensions&gt;</code></a>: Space-separated list of extensions for which the given commands will be available.
</li><li class="listitem">
<a class="link" href="apa.html#associateWindowsFileExtension.friendlyName"><code class="literal">&lt;friendlyName&gt;</code></a>: Friendly Name for the progID.
</li><li class="listitem">
<a class="link" href="apa.html#associateWindowsFileExtension.icon"><code class="literal">&lt;icon&gt;</code></a>: Path to the icon file that contains the icon to display.
</li><li class="listitem">
<a class="link" href="apa.html#associateWindowsFileExtension.mimeType"><code class="literal">&lt;mimeType&gt;</code></a>: MIME type associated to all the file extensions.
</li><li class="listitem">
<a class="link" href="apa.html#associateWindowsFileExtension.progID"><code class="literal">&lt;progID&gt;</code></a>: Programmatic Identifier to which the extensions are attached, contains the available commands to be invoked on each file type.
</li><li class="listitem">
<a class="link" href="apa.html#associateWindowsFileExtension.scope"><code class="literal">&lt;scope&gt;</code></a>: Choose between system or user scope when installing the association
</li><li class="listitem">
<a class="link" href="apa.html#associateWindowsFileExtension.commandList"><code class="literal">&lt;commandList&gt;</code></a>: List of commands that can be invoked on each given file type.
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><pre class="programlisting">&lt;associateWindowsFileExtension&gt;
    &lt;extensions&gt;.myextension&lt;/extensions&gt;
    &lt;progID&gt;mycompany.package&lt;/progID&gt;
    &lt;icon&gt;${installdir}\images\myicon.ico&lt;/icon&gt;
    &lt;mimeType&gt;example/mycompany-package-myextension&lt;/mimeType&gt;
    &lt;commandList&gt;
        &lt;!-- Defining the 'Open' command --&gt;
        &lt;command&gt;
            &lt;verb&gt;Open&lt;/verb&gt;
            &lt;runProgram&gt;${installdir}\yourprogram.exe&lt;/runProgram&gt;
            &lt;runProgramArguments&gt;"%1"&lt;/runProgramArguments&gt;
        &lt;/command&gt;
    &lt;/commandList&gt;
&lt;/associateWindowsFileExtension&gt;</pre><p>You can get additional information in the Windows File Associations section.</p><p><code class="literal">Additional Examples:</code>
<a class="link" href="ar01s17.html#snip841765">Example 1</a></p><h5><a id="_remove_windows_file_associations"></a>Remove Windows File Associations</h5><p>This action allows you to remove file associations for Windows, unregistering commands such as "open" for a given file extension.
The allowed properties in the <a class="link" href="apa.html#removeWindowsFileAssociation"><code class="literal">&lt;removeWindowsFileAssociation&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#removeWindowsFileAssociation.extensions"><code class="literal">&lt;extensions&gt;</code></a>: Space-separated list of extensions to remove.
</li><li class="listitem">
<a class="link" href="apa.html#removeWindowsFileAssociation.mimeType"><code class="literal">&lt;mimeType&gt;</code></a>: MIME type to remove, associated to all the file extensions. It must be specified if you want to delete MIME associations added previously with associateWindowsFileExtension action.
</li><li class="listitem">
<a class="link" href="apa.html#removeWindowsFileAssociation.progID"><code class="literal">&lt;progID&gt;</code></a>: Programmatic Identifier to remove, to which the extensions are attached.
</li><li class="listitem">
<a class="link" href="apa.html#removeWindowsFileAssociation.scope"><code class="literal">&lt;scope&gt;</code></a>: Choose between system or user scope when installing the association
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Removing association of <code class="literal">.myextension</code> extension. </strong>
</p><pre class="programlisting">&lt;removeWindowsFileAssociation&gt;
  &lt;extensions&gt;.myextension&lt;/extensions&gt;
  &lt;progID&gt;mycompany.package&lt;/progID&gt;
  &lt;mimeType&gt;example/mycompany-package-myextension&lt;/mimeType&gt;
&lt;/removeWindowsFileAssociation&gt;</pre><p>
</p><p>You can get additional information in the Windows File Associations section.</p><p><code class="literal">Additional Examples:</code>
<a class="link" href="ar01s17.html#snip7559130">Example 1</a></p><h5><a id="_wow64_file_system_redirection"></a>Wow64 File System Redirection</h5><p>Modifies the Windows x64 File System Redirection behavior. It mainly redirects %Windir%System32 to %Windir%SysWOW64 for 32-bit processes running on Windows x64 systems. A similar effect is also applied to <span class="emphasis"><em>Program Files</em></span>
The allowed properties in the <a class="link" href="apa.html#wow64FsRedirection"><code class="literal">&lt;wow64FsRedirection&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#wow64FsRedirection.action"><code class="literal">&lt;action&gt;</code></a>: Whether to enable or disable the File System Redirection
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Remove a file in <code class="literal">%windir%\system32</code> disabling redirection temporarily. </strong>
</p><pre class="programlisting">&lt;wow64FsRedirection&gt;
    &lt;action&gt;disable&lt;/action&gt;
&lt;/wow64FsRedirection&gt;
&lt;deleteFile&gt;
    &lt;path&gt;${windows_folder_system}/myApp.exe&lt;/path&gt;
&lt;/deleteFile&gt;
&lt;wow64FsRedirection&gt;
    &lt;action&gt;enable&lt;/action&gt;
&lt;/wow64FsRedirection&gt;</pre><p>
</p><p><code class="literal">Additional Examples:</code>
<a class="link" href="ar01s26.html#snip8734989">Example 1</a></p><h5><a id="_get_windows_file_version_info"></a>Get Windows file version info</h5><p>Get file information.
The allowed properties in the <a class="link" href="apa.html#getWindowsFileVersionInfo"><code class="literal">&lt;getWindowsFileVersionInfo&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#getWindowsFileVersionInfo.path"><code class="literal">&lt;path&gt;</code></a>: Path to the file
</li><li class="listitem">
<a class="link" href="apa.html#getWindowsFileVersionInfo.type"><code class="literal">&lt;type&gt;</code></a>: Type of the file info.
</li><li class="listitem">
<a class="link" href="apa.html#getWindowsFileVersionInfo.variable"><code class="literal">&lt;variable&gt;</code></a>: Variable to save the file info to
</li></ul></div><p>The <a class="link" href="apa.html#getWindowsFileVersionInfo.type"><code class="literal">&lt;type&gt;</code></a> tag accepts the following values:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<code class="literal">codepage</code>: Returns the code page resource (language and country combination). e.g.: 0409
</li><li class="listitem">
<code class="literal">flags</code>: Returns a bit mask specifying the boolean attributes of the file. You can get additional information <a class="ulink" href="http://msdn.microsoft.com/en-us/library/ms646997(v=vs.85).aspx/" target="_top">here</a>, in the <code class="literal">dwFileFlags</code> table. e.g.: debug, prerelease, patched, privatebuild, infoinferred or specialbuild
</li><li class="listitem">
<code class="literal">os</code>: The operating system for what the file was built. e.g.: nt_windows32, dos
</li><li class="listitem">
<code class="literal">productversion</code>: ProductVersion from resources; e.g.: 6.1.7600.16385
</li><li class="listitem">
<code class="literal">signature</code>: signature for the fixed part of the version resource; e.g.: 0xfeef04bd
</li><li class="listitem">
<code class="literal">structversion</code>: version of the version resource format; e.g.: 1.0
</li><li class="listitem">
<code class="literal">type</code>:e.g.: file type; e.g.: application, dll, driver.display, font.truetype
</li><li class="listitem">
<code class="literal">version</code>:e.g.: Returns file version as from resources; e.g. 6.1.7600.16385
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Retrieve version of Microsoft Word. </strong>
</p><pre class="programlisting">&lt;registryGet&gt;
    &lt;key&gt;HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\App Paths\Winword.exe&lt;/key&gt;
    &lt;name&gt;&lt;/name&gt;
    &lt;variable&gt;msword_binary&lt;/variable&gt;
&lt;/registryGet&gt;
&lt;getWindowsFileVersionInfo&gt;
    &lt;path&gt;${msword_binary}&lt;/path&gt;
    &lt;type&gt;version&lt;/type&gt;
    &lt;variable&gt;msword_version&lt;/variable&gt;
&lt;/getWindowsFileVersionInfo&gt;</pre><p>
</p><p>Please note that this example will fail if Microsoft Office is not installed. Proper <a class="link" href="apb.html#stringTest"><code class="literal">&lt;stringTest&gt;</code></a> with <a class="link" href="apb.html#stringTest.type"><code class="literal">&lt;type&gt;</code></a> <code class="literal">not_empty</code> can be used to check <code class="literal">msword_binary</code>.</p><h5><a id="_clear_acl_permissions"></a>Clear ACL Permissions</h5><p>Clear Windows ACL permissions of a file or directory
The allowed properties in the <a class="link" href="apa.html#clearWindowsACL"><code class="literal">&lt;clearWindowsACL&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#clearWindowsACL.excludeFiles"><code class="literal">&lt;excludeFiles&gt;</code></a>: Patterns to exclude files
</li><li class="listitem">
<a class="link" href="apa.html#clearWindowsACL.files"><code class="literal">&lt;files&gt;</code></a>: File patterns to apply action to
</li><li class="listitem">
<a class="link" href="apa.html#clearWindowsACL.matchHiddenFiles"><code class="literal">&lt;matchHiddenFiles&gt;</code></a>: Whether or not to attempt to match Windows hidden files
</li></ul></div><p>You can get additional information in the <a class="link" href="ar01s26.html#access_control_lists" title="26.3. Managing Access Control Lists">ACL</a> section.</p><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Remove all the ACL from a set of files. </strong>
</p><pre class="programlisting">&lt;clearWindowsACL&gt;
    &lt;files&gt;${installdir}/doscs/*&lt;/files&gt;
&lt;/clearWindowsACL&gt;</pre><p>
</p><p><code class="literal">Additional Examples:</code>
<a class="link" href="ar01s26.html#snip8031543">Example 1</a></p><h5><a id="_change_acl_permissions"></a>Change ACL Permissions</h5><p>Change Windows ACL permissions of a file or directory
The allowed properties in the <a class="link" href="apa.html#setWindowsACL"><code class="literal">&lt;setWindowsACL&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#setWindowsACL.action"><code class="literal">&lt;action&gt;</code></a>: Whether to allow or deny permissions
</li><li class="listitem">
<a class="link" href="apa.html#setWindowsACL.excludeFiles"><code class="literal">&lt;excludeFiles&gt;</code></a>: Patterns to exclude files
</li><li class="listitem">
<a class="link" href="apa.html#setWindowsACL.files"><code class="literal">&lt;files&gt;</code></a>: File patterns to apply action to
</li><li class="listitem">
<a class="link" href="apa.html#setWindowsACL.matchHiddenFiles"><code class="literal">&lt;matchHiddenFiles&gt;</code></a>: Whether or not to attempt to match Windows hidden files
</li><li class="listitem">
<a class="link" href="apa.html#setWindowsACL.permissions"><code class="literal">&lt;permissions&gt;</code></a>: Permissions for matching files or directories
</li><li class="listitem">
<a class="link" href="apa.html#setWindowsACL.recurseContainers"><code class="literal">&lt;recurseContainers&gt;</code></a>: Whether to apply recursively or not to container descendant
</li><li class="listitem">
<a class="link" href="apa.html#setWindowsACL.recurseObjects"><code class="literal">&lt;recurseObjects&gt;</code></a>: Whether to apply recursively or not to object descendant
</li><li class="listitem">
<a class="link" href="apa.html#setWindowsACL.recurseOneLevelOnly"><code class="literal">&lt;recurseOneLevelOnly&gt;</code></a>: Just one level recursion if applicable
</li><li class="listitem">
<a class="link" href="apa.html#setWindowsACL.self"><code class="literal">&lt;self&gt;</code></a>: Whether to apply or not to the specified file
</li><li class="listitem">
<a class="link" href="apa.html#setWindowsACL.users"><code class="literal">&lt;users&gt;</code></a>: Comma separated list of users to modify access permissions for
</li></ul></div><p>You can get additional information in the <a class="link" href="ar01s26.html#access_control_lists" title="26.3. Managing Access Control Lists">ACL</a> section.</p><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Remove write permissions to all users but Administrators. </strong>
</p><pre class="programlisting">&lt;clearWindowsACL&gt;
  &lt;files&gt;${installdir}/admin;${installdir}/admin/*&lt;/files&gt;
&lt;/clearWindowsACL&gt;
&lt;setWindowsACL&gt;
  &lt;action&gt;allow&lt;/action&gt;
  &lt;files&gt;${installdir}/admin;${installdir}/admin/*&lt;/files&gt;
  &lt;permissions&gt;file_all_access&lt;/permissions&gt;
  &lt;users&gt;S-1-5-32-544&lt;/users&gt;
&lt;/setWindowsACL&gt;</pre><p>
</p><p><code class="literal">Additional Examples:</code>
<a class="link" href="ar01s26.html#snip8031543">Example 1</a>, <a class="link" href="ar01s09.html#snip209607">Example 2</a>, <a class="link" href="ar01s26.html#snip8637355">Example 3</a></p><h5><a id="_get_acl_permissions"></a>Get ACL Permissions</h5><p>Get Windows ACL permissions of a file or directory
The allowed properties in the <a class="link" href="apa.html#getWindowsACL"><code class="literal">&lt;getWindowsACL&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#getWindowsACL.deniedPermissions"><code class="literal">&lt;deniedPermissions&gt;</code></a>: Variable name to save denied permissions
</li><li class="listitem">
<a class="link" href="apa.html#getWindowsACL.file"><code class="literal">&lt;file&gt;</code></a>: File to retrieve ACL
</li><li class="listitem">
<a class="link" href="apa.html#getWindowsACL.grantedPermissions"><code class="literal">&lt;grantedPermissions&gt;</code></a>: Variable name to save granted permissions
</li><li class="listitem">
<a class="link" href="apa.html#getWindowsACL.username"><code class="literal">&lt;username&gt;</code></a>: User to retrieve ACL
</li></ul></div><p>You can get additional information in the <a class="link" href="ar01s26.html#access_control_lists" title="26.3. Managing Access Control Lists">ACL</a> section.</p><p><span class="strong"><strong>Examples:</strong></span></p><pre class="programlisting">&lt;getWindowsACL&gt;
  &lt;deniedPermissions&gt;denied&lt;/deniedPermissions&gt;
  &lt;file&gt;${installdir}/admin&lt;/file&gt;
  &lt;grantedPermissions&gt;granted&lt;/grantedPermissions&gt;
  &lt;username&gt;S-1-1-0&lt;/username&gt;
&lt;/getWindowsACL&gt;</pre><p><code class="literal">Additional Examples:</code>
<a class="link" href="ar01s26.html#snip6158519">Example 1</a></p><h5><a id="_add_windows_scheduled_task"></a>Add Windows Scheduled Task</h5><p>Create a new task or modify the value of an existing one.
The allowed properties in the <a class="link" href="apa.html#addScheduledTask"><code class="literal">&lt;addScheduledTask&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#addScheduledTask.dayOfMonth"><code class="literal">&lt;dayOfMonth&gt;</code></a>: This parameter is used only for Task of MONTHLY type. It specifies the day of the month the task will be executed.
</li><li class="listitem">
<a class="link" href="apa.html#addScheduledTask.disallowStartIfOnBatteries"><code class="literal">&lt;disallowStartIfOnBatteries&gt;</code></a>: Don’t start the task if the system is running on batteries
</li><li class="listitem">
<a class="link" href="apa.html#addScheduledTask.duration"><code class="literal">&lt;duration&gt;</code></a>: (minutes) How long the Task is active.
</li><li class="listitem">
<a class="link" href="apa.html#addScheduledTask.endDate"><code class="literal">&lt;endDate&gt;</code></a>: (year-month-day) Specify the date on which the task becomes inactive.
</li><li class="listitem">
<a class="link" href="apa.html#addScheduledTask.executionTimeLimit"><code class="literal">&lt;executionTimeLimit&gt;</code></a>: Maximum execution time in hours
</li><li class="listitem">
<a class="link" href="apa.html#addScheduledTask.interval"><code class="literal">&lt;interval&gt;</code></a>: (minutes) How often do you want to execute the given  Task in specified duration time.
</li><li class="listitem">
<a class="link" href="apa.html#addScheduledTask.name"><code class="literal">&lt;name&gt;</code></a>: Name of the  Task
</li><li class="listitem">
<a class="link" href="apa.html#addScheduledTask.password"><code class="literal">&lt;password&gt;</code></a>: The user password associated with the account specified in runAs parameter.
</li><li class="listitem">
<a class="link" href="apa.html#addScheduledTask.period"><code class="literal">&lt;period&gt;</code></a>: This parameter is used only for Task of DAILY/WEEKLY type. It specifies how often (every PERIOD days for type DAILY / every PERIOD weeks for type WEEKLY) the task will be executed.
</li><li class="listitem">
<a class="link" href="apa.html#addScheduledTask.program"><code class="literal">&lt;program&gt;</code></a>: Path to program or script to run.
</li><li class="listitem">
<a class="link" href="apa.html#addScheduledTask.programArguments"><code class="literal">&lt;programArguments&gt;</code></a>: Program arguments.
</li><li class="listitem">
<a class="link" href="apa.html#addScheduledTask.runAs"><code class="literal">&lt;runAs&gt;</code></a>: Run the  Task as the specified user.
</li><li class="listitem">
<a class="link" href="apa.html#addScheduledTask.runAsAdmin"><code class="literal">&lt;runAsAdmin&gt;</code></a>: Run with highest privileges.
</li><li class="listitem">
<a class="link" href="apa.html#addScheduledTask.runOnlyIfLoggedOn"><code class="literal">&lt;runOnlyIfLoggedOn&gt;</code></a>: Run task only if the user specified by runAs parameter is logged on.
</li><li class="listitem">
<a class="link" href="apa.html#addScheduledTask.startDate"><code class="literal">&lt;startDate&gt;</code></a>: (year-month-day) Specify the date on which the task becomes activated.
</li><li class="listitem">
<a class="link" href="apa.html#addScheduledTask.startTime"><code class="literal">&lt;startTime&gt;</code></a>: (hours:minutes) The time the Task becomes activated.
</li><li class="listitem">
<a class="link" href="apa.html#addScheduledTask.type"><code class="literal">&lt;type&gt;</code></a>: Type of the Task.
</li><li class="listitem">
<a class="link" href="apa.html#addScheduledTask.weekDays"><code class="literal">&lt;weekDays&gt;</code></a>: Specifies days to run the task on (MON, TUE, … SUN) or * for all days of week
</li><li class="listitem">
<a class="link" href="apa.html#addScheduledTask.workingDirectory"><code class="literal">&lt;workingDirectory&gt;</code></a>: Working directory. This is important for scripts that expect to be run from a specific location. By default, it will be the directory where the script or program is located.
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Schedule monthly task to be run on each 3rd day of month. </strong>
</p><pre class="programlisting">&lt;addScheduledTask&gt;
    &lt;dayOfMonth&gt;3&lt;/dayOfMonth&gt;
    &lt;duration&gt;120&lt;/duration&gt;
    &lt;endDate&gt;2037-12-31&lt;/endDate&gt;
    &lt;interval&gt;&lt;/interval&gt;
    &lt;name&gt;myappDailyMaintenance&lt;/name&gt;
    &lt;password&gt;&lt;/password&gt;
    &lt;period&gt;&lt;/period&gt;
    &lt;program&gt;${installdir}/maintenance.exe&lt;/program&gt;
    &lt;programArguments&gt;--monthly&lt;/programArguments&gt;
    &lt;runOnlyIfLoggedOn&gt;0&lt;/runOnlyIfLoggedOn&gt;
    &lt;startDate&gt;2011-01-01&lt;/startDate&gt;
    &lt;startTime&gt;03:00&lt;/startTime&gt;
    &lt;type&gt;MONTHLY&lt;/type&gt;
&lt;/addScheduledTask&gt;</pre><p>
</p><p><strong>Create a scheduled tasks if it does not already exist. </strong>
</p><pre class="programlisting">&lt;!-- Check the existence of the task --&gt;
&lt;setInstallerVariableFromScriptOutput&gt;
   &lt;exec&gt;schtasks&lt;/exec&gt;
   &lt;execArgs&gt;/query /fo list&lt;/execArgs&gt;
   &lt;name&gt;output&lt;/name&gt;
   &lt;abortOnError&gt;0&lt;/abortOnError&gt;
   &lt;showMessageOnError&gt;0&lt;/showMessageOnError&gt;
&lt;/setInstallerVariableFromScriptOutput&gt;
&lt;setInstallerVariable name="taskName" value="Check For Updates"/&gt;
&lt;setInstallerVariable name="taskExists" value="0"/&gt;
&lt;setInstallerVariable&gt;
   &lt;name&gt;taskExists&lt;/name&gt;
   &lt;value&gt;1&lt;/value&gt;
   &lt;ruleList&gt;
     &lt;regExMatch&gt;
       &lt;logic&gt;matches&lt;/logic&gt;
       &lt;pattern&gt;TaskName:\s*(${taskName})\n&lt;/pattern&gt;
       &lt;text&gt;${output}&lt;/text&gt;
     &lt;/regExMatch&gt;
   &lt;/ruleList&gt;
&lt;/setInstallerVariable&gt;
&lt;addScheduledTask&gt;
   &lt;program&gt;${installdir}/autoupdate.exe&lt;/program&gt;
   &lt;programArguments&gt;--mode unattended --unattendedmodebehavior download&lt;/programArguments&gt;
   &lt;startTime&gt;09:00&lt;/startTime&gt;
   &lt;type&gt;DAILy&lt;/type&gt;
   &lt;ruleList&gt;
     &lt;isFalse value="${taskExists}"/&gt;
   &lt;/ruleList&gt;
&lt;/addScheduledTask&gt;</pre><p>
</p><h5><a id="_delete_windows_scheduled_task"></a>Delete Windows Scheduled Task</h5><p>Delete Windows Scheduled Task
The allowed properties in the <a class="link" href="apa.html#deleteScheduledTask"><code class="literal">&lt;deleteScheduledTask&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#deleteScheduledTask.name"><code class="literal">&lt;name&gt;</code></a>: Name of the Task
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Delete previously scheduled task. </strong>
</p><pre class="programlisting">&lt;deleteScheduledTask&gt;
    &lt;name&gt;myappDailyMaintenance&lt;/name&gt;
&lt;/deleteScheduledTask&gt;</pre><p>
</p><h5><a id="_shutdown"></a>Shutdown</h5><p>Shut down the machine (Windows only)
The allowed properties in the <a class="link" href="apa.html#shutdown"><code class="literal">&lt;shutdown&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#shutdown.delay"><code class="literal">&lt;delay&gt;</code></a>: Delay in seconds before shut down.
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Shutdown the machine at the end of the installation. </strong>
</p><pre class="programlisting">&lt;finalPageActionList&gt;
  &lt;shutdown progressText="Shutdown the machine" delay="10"/&gt;
&lt;/finalPageActionList&gt;</pre><p>
</p><h5><a id="_query_wmi"></a>Query WMI</h5><p>Query WMI and return results
The allowed properties in the <a class="link" href="apa.html#queryWMI"><code class="literal">&lt;queryWMI&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#queryWMI.class"><code class="literal">&lt;class&gt;</code></a>: Class
</li><li class="listitem">
<a class="link" href="apa.html#queryWMI.fields"><code class="literal">&lt;fields&gt;</code></a>: List of fields to return
</li><li class="listitem">
<a class="link" href="apa.html#queryWMI.namespace"><code class="literal">&lt;namespace&gt;</code></a>: Namespace
</li><li class="listitem">
<a class="link" href="apa.html#queryWMI.variable"><code class="literal">&lt;variable&gt;</code></a>:
</li><li class="listitem">
<a class="link" href="apa.html#queryWMI.where"><code class="literal">&lt;where&gt;</code></a>: Query to pass to WMI
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>List all Windows processes that have MyApp in the executable path using WMI. </strong>
</p><pre class="programlisting">&lt;actionGroup&gt;
    &lt;actionList&gt;
        &lt;queryWMI&gt;
            &lt;class&gt;Win32_Process&lt;/class&gt;
            &lt;variable&gt;result&lt;/variable&gt;
            &lt;fields&gt;ProcessId;ExecutablePath&lt;/fields&gt;
            &lt;where&gt;ExecutablePath LIKE '%MyApp%'&lt;/where&gt;
        &lt;/queryWMI&gt;
        &lt;foreach&gt;
            &lt;values&gt;${result}&lt;/values&gt;
            &lt;variables&gt;result_pid result_path&lt;/variables&gt;
            &lt;actionList&gt;
                &lt;logMessage&gt;
                    &lt;text&gt;Found process: ${result_path} as ${result_pid}&lt;/text&gt;
                &lt;/logMessage&gt;
            &lt;/actionList&gt;
        &lt;/foreach&gt;
    &lt;/actionList&gt;
&lt;/actionGroup&gt;</pre><p>
</p><p>This will allow multiple services of same base name to be created - for example if multiple applications base on same framework that runs as a service.</p><h4><a id="services_actions_group"></a>Services Actions</h4><h5><a id="_delete_mac_os_x_service"></a>Delete Mac OS X service</h5><p>This action allows you to delete a Mac OS X service. Requires Mac OS X version 10.4 or later.
The allowed properties in the <a class="link" href="apa.html#deleteOSXService"><code class="literal">&lt;deleteOSXService&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#deleteOSXService.scope"><code class="literal">&lt;scope&gt;</code></a>: Scope of service
</li><li class="listitem">
<a class="link" href="apa.html#deleteOSXService.serviceName"><code class="literal">&lt;serviceName&gt;</code></a>: Identifier for the service name
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Delete service <code class="literal">com.bitrock.sample</code>. </strong>
</p><pre class="programlisting">&lt;deleteOSXService&gt;
    &lt;serviceName&gt;com.bitrock.sample&lt;/serviceName&gt;
    &lt;scope&gt;system&lt;/scope&gt;
&lt;/deleteOSXService&gt;</pre><p>
</p><p><code class="literal">Additional Examples:</code>
<a class="link" href="ar01s15.html#snip5274077">Example 1</a></p><h5><a id="_start_windows_service"></a>Start Windows Service</h5><p>This action allows you to start a specified Windows service.
The allowed properties in the <a class="link" href="apa.html#startWindowsService"><code class="literal">&lt;startWindowsService&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#startWindowsService.delay"><code class="literal">&lt;delay&gt;</code></a>: Amount of milliseconds to wait for the service to start.
</li><li class="listitem">
<a class="link" href="apa.html#startWindowsService.displayName"><code class="literal">&lt;displayName&gt;</code></a>: Name displayed in the Windows service control panel
</li><li class="listitem">
<a class="link" href="apa.html#startWindowsService.serviceName"><code class="literal">&lt;serviceName&gt;</code></a>: Internal service name
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Start <code class="literal">Sample Service</code> service. </strong>
</p><pre class="programlisting">&lt;startWindowsService&gt;
    &lt;abortOnError&gt;0&lt;/abortOnError&gt;
    &lt;delay&gt;15000&lt;/delay&gt;
    &lt;displayName&gt;Sample Service&lt;/displayName&gt;
    &lt;serviceName&gt;SampleService&lt;/serviceName&gt;
&lt;/startWindowsService&gt;</pre><p>
</p><p><code class="literal">Additional Examples:</code>
<a class="link" href="ar01s15.html#snip3215248">Example 1</a></p><h5><a id="_create_windows_service"></a>Create Windows Service</h5><p>This action allows you to create a new Windows service.
The allowed properties in the <a class="link" href="apa.html#createWindowsService"><code class="literal">&lt;createWindowsService&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#createWindowsService.account"><code class="literal">&lt;account&gt;</code></a>: User account under which the service should run. It takes the form domain\username. If the account is a local account, it may be specified as .\username or username. If this option is not specified, the service will run under the LocalSystem account.
</li><li class="listitem">
<a class="link" href="apa.html#createWindowsService.dependencies"><code class="literal">&lt;dependencies&gt;</code></a>: Comma separated list of services that the created service depends on
</li><li class="listitem">
<a class="link" href="apa.html#createWindowsService.description"><code class="literal">&lt;description&gt;</code></a>: Program description
</li><li class="listitem">
<a class="link" href="apa.html#createWindowsService.displayName"><code class="literal">&lt;displayName&gt;</code></a>: Name displayed in the Windows service control panel
</li><li class="listitem">
<a class="link" href="apa.html#createWindowsService.password"><code class="literal">&lt;password&gt;</code></a>: Password for the user account if one is specified.
</li><li class="listitem">
<a class="link" href="apa.html#createWindowsService.program"><code class="literal">&lt;program&gt;</code></a>: Path to program
</li><li class="listitem">
<a class="link" href="apa.html#createWindowsService.programArguments"><code class="literal">&lt;programArguments&gt;</code></a>: Arguments to pass to the program
</li><li class="listitem">
<a class="link" href="apa.html#createWindowsService.serviceName"><code class="literal">&lt;serviceName&gt;</code></a>: Internal service name
</li><li class="listitem">
<a class="link" href="apa.html#createWindowsService.startType"><code class="literal">&lt;startType&gt;</code></a>: Specify how the service should be started
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Create <code class="literal">Sample Service</code>. </strong>
</p><pre class="programlisting">&lt;createWindowsService&gt;
    &lt;abortOnError&gt;0&lt;/abortOnError&gt;
    &lt;displayName&gt;Sample Service&lt;/displayName&gt;
    &lt;program&gt;${installdir}/sampleservice.exe&lt;/program&gt;
    &lt;programArguments&gt;--service&lt;/programArguments&gt;
    &lt;serviceName&gt;SampleService&lt;/serviceName&gt;
    &lt;startType&gt;auto&lt;/startType&gt;
&lt;/createWindowsService&gt;</pre><p>
</p><p>Created service will start automatically and run <code class="literal">sampleservice.exe</code> from application directory. After a service is created, it should be started using <a class="link" href="apa.html#startWindowsService"><code class="literal">&lt;startWindowsService&gt;</code></a> - otherwise it will be started after computer restart.</p><p><code class="literal">Additional Examples:</code>
<a class="link" href="ar01s15.html#snip5264885">Example 1</a>, <a class="link" href="ar01s15.html#snip7577513">Example 2</a>, <a class="link" href="ar01s15.html#snip9014020">Example 3</a></p><h5><a id="_stop_windows_service"></a>Stop Windows Service</h5><p>This action allows you to stop a specified Windows service.
The allowed properties in the <a class="link" href="apa.html#stopWindowsService"><code class="literal">&lt;stopWindowsService&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#stopWindowsService.delay"><code class="literal">&lt;delay&gt;</code></a>: Amount of milliseconds to wait for the service to stop.
</li><li class="listitem">
<a class="link" href="apa.html#stopWindowsService.displayName"><code class="literal">&lt;displayName&gt;</code></a>: Name displayed in the Windows service control panel
</li><li class="listitem">
<a class="link" href="apa.html#stopWindowsService.serviceName"><code class="literal">&lt;serviceName&gt;</code></a>: Internal service name
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Stop <code class="literal">Sample Service</code> service. </strong>
</p><pre class="programlisting">&lt;stopWindowsService&gt;
    &lt;abortOnError&gt;0&lt;/abortOnError&gt;
    &lt;delay&gt;15000&lt;/delay&gt;
    &lt;displayName&gt;Sample Service&lt;/displayName&gt;
    &lt;serviceName&gt;SampleService&lt;/serviceName&gt;
&lt;/stopWindowsService&gt;</pre><p>
</p><p><code class="literal">Additional Examples:</code>
<a class="link" href="ar01s15.html#snip8675162">Example 1</a></p><h5><a id="_remove_unix_service"></a>Remove Unix Service</h5><p>This action allows you to remove a service in a Linux based system. Note that you will need to run the installer as root to be able to remove services.
The allowed properties in the <a class="link" href="apa.html#removeUnixService"><code class="literal">&lt;removeUnixService&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#removeUnixService.name"><code class="literal">&lt;name&gt;</code></a>: Service Name
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Remove Unix service with name based on project’s <code class="literal">shortName</code>. </strong>
</p><pre class="programlisting">&lt;removeUnixService&gt;
    &lt;name&gt;${project.shortName}&lt;/name&gt;
&lt;/removeUnixService&gt;</pre><p>
</p><p><code class="literal">Additional Examples:</code>
<a class="link" href="ar01s15.html#snip6509728">Example 1</a></p><h5><a id="_add_unix_service"></a>Add Unix Service</h5><p>This action allows you to create a new service in a Linux based system. Note that you will need to run the installer as root to be able to create new services.
The allowed properties in the <a class="link" href="apa.html#addUnixService"><code class="literal">&lt;addUnixService&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#addUnixService.description"><code class="literal">&lt;description&gt;</code></a>: Product description
</li><li class="listitem">
<a class="link" href="apa.html#addUnixService.name"><code class="literal">&lt;name&gt;</code></a>: Service Name
</li><li class="listitem">
<a class="link" href="apa.html#addUnixService.program"><code class="literal">&lt;program&gt;</code></a>: Path to the program
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Create Unix service with name based on project’s <code class="literal">shortName</code>. </strong>
</p><pre class="programlisting">&lt;addUnixService&gt;
    &lt;description&gt;Sample service&lt;/description&gt;
    &lt;name&gt;${project.shortName}&lt;/name&gt;
    &lt;program&gt;${installdir}/sampleservice&lt;/program&gt;
&lt;/addUnixService&gt;</pre><p>
</p><p><code class="literal">Additional Examples:</code>
<a class="link" href="ar01s15.html#snip2095347">Example 1</a></p><h5><a id="_start_mac_os_x_service"></a>Start Mac OS X service</h5><p>This action allows you to start a Mac OS X service. Requires Mac OS X version 10.4 or later.
The allowed properties in the <a class="link" href="apa.html#startOSXService"><code class="literal">&lt;startOSXService&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#startOSXService.serviceName"><code class="literal">&lt;serviceName&gt;</code></a>: Identifier for the service name
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Start service <code class="literal">com.bitrock.sample</code>. </strong>
</p><pre class="programlisting">&lt;startOSXService&gt;
    &lt;serviceName&gt;com.bitrock.sample&lt;/serviceName&gt;
&lt;/startOSXService&gt;</pre><p>
</p><p><code class="literal">Additional Examples:</code>
<a class="link" href="ar01s15.html#snip7889191">Example 1</a></p><h5><a id="_get_unique_windows_service_name"></a>Get Unique Windows Service Name</h5><p>This action allows you to get a unique Windows service name.
The allowed properties in the <a class="link" href="apa.html#getUniqueWindowsServiceName"><code class="literal">&lt;getUniqueWindowsServiceName&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#getUniqueWindowsServiceName.displayName"><code class="literal">&lt;displayName&gt;</code></a>: Initial display name for the service
</li><li class="listitem">
<a class="link" href="apa.html#getUniqueWindowsServiceName.selectedDisplayNameVariable"><code class="literal">&lt;selectedDisplayNameVariable&gt;</code></a>: Variable to store the service display name
</li><li class="listitem">
<a class="link" href="apa.html#getUniqueWindowsServiceName.selectedServiceNameVariable"><code class="literal">&lt;selectedServiceNameVariable&gt;</code></a>: Variable to store the Service name
</li><li class="listitem">
<a class="link" href="apa.html#getUniqueWindowsServiceName.serviceName"><code class="literal">&lt;serviceName&gt;</code></a>: Initial name for the service
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Create <code class="literal">Sample Service</code> with unique service name. </strong>
</p><pre class="programlisting">&lt;getUniqueWindowsServiceName&gt;
    &lt;displayName&gt;Sample Service&lt;/displayName&gt;
    &lt;selectedDisplayNameVariable&gt;service_display_name&lt;/selectedDisplayNameVariable&gt;
    &lt;selectedServiceNameVariable&gt;service_name&lt;/selectedServiceNameVariable&gt;
    &lt;separator&gt;-&lt;/separator&gt;
    &lt;serviceName&gt;SampleService&lt;/serviceName&gt;
&lt;/getUniqueWindowsServiceName&gt;
&lt;createWindowsService&gt;
    &lt;abortOnError&gt;0&lt;/abortOnError&gt;
    &lt;displayName&gt;${service_display_name}&lt;/displayName&gt;
    &lt;program&gt;${installdir}/sampleservice.exe&lt;/program&gt;
    &lt;programArguments&gt;--service&lt;/programArguments&gt;
    &lt;serviceName&gt;${service_name}&lt;/serviceName&gt;
    &lt;startType&gt;auto&lt;/startType&gt;
&lt;/createWindowsService&gt;</pre><p>
</p><p>This will allow multiple services of same base name to be created - for example if multiple applications base on same framework that runs as a service.</p><p><code class="literal">Additional Examples:</code>
<a class="link" href="ar01s15.html#snip5264885">Example 1</a></p><h5><a id="_stop_mac_os_x_service"></a>Stop Mac OS X service</h5><p>This action allows you to stop a Mac OS X service. Requires Mac OS X version 10.4 or later.
The allowed properties in the <a class="link" href="apa.html#stopOSXService"><code class="literal">&lt;stopOSXService&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#stopOSXService.serviceName"><code class="literal">&lt;serviceName&gt;</code></a>: Identifier for the service name
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Stop service <code class="literal">com.bitrock.sample</code>. </strong>
</p><pre class="programlisting">&lt;stopOSXService&gt;
    &lt;serviceName&gt;com.bitrock.sample&lt;/serviceName&gt;
&lt;/stopOSXService&gt;</pre><p>
</p><p><code class="literal">Additional Examples:</code>
<a class="link" href="ar01s15.html#snip1426065">Example 1</a>, <a class="link" href="ar01s15.html#snip3643072">Example 2</a></p><h5><a id="_delete_windows_service"></a>Delete Windows Service</h5><p>This action allows you to remove a specified Windows service.
The allowed properties in the <a class="link" href="apa.html#deleteWindowsService"><code class="literal">&lt;deleteWindowsService&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#deleteWindowsService.displayName"><code class="literal">&lt;displayName&gt;</code></a>: Name displayed in the Windows service control panel
</li><li class="listitem">
<a class="link" href="apa.html#deleteWindowsService.serviceName"><code class="literal">&lt;serviceName&gt;</code></a>: Internal service name
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Delete <code class="literal">Sample Service</code> service. </strong>
</p><pre class="programlisting">&lt;deleteWindowsService&gt;
    &lt;abortOnError&gt;0&lt;/abortOnError&gt;
    &lt;displayName&gt;Sample Service&lt;/displayName&gt;
    &lt;serviceName&gt;SampleService&lt;/serviceName&gt;
&lt;/deleteWindowsService&gt;</pre><p>
</p><p>Before deletion, service is always stopped so <a class="link" href="apa.html#stopWindowsService"><code class="literal">&lt;stopWindowsService&gt;</code></a> does not have to be called prior to <a class="link" href="apa.html#deleteWindowsService"><code class="literal">&lt;deleteWindowsService&gt;</code></a>.</p><p><code class="literal">Additional Examples:</code>
<a class="link" href="ar01s15.html#snip973140">Example 1</a>, <a class="link" href="ar01s15.html#snip8638258">Example 2</a></p><h5><a id="_create_mac_os_x_service"></a>Create Mac OS X service</h5><p>This action allows you to create a Mac OS X service. Requires Mac OS X version 10.4 or later. System Wide scope requires running the installer as an administrator.
The allowed properties in the <a class="link" href="apa.html#createOSXService"><code class="literal">&lt;createOSXService&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#createOSXService.abandonProcessGroup"><code class="literal">&lt;abandonProcessGroup&gt;</code></a>: Don’t kill the remaining processes with the same group ID.
</li><li class="listitem">
<a class="link" href="apa.html#createOSXService.groupname"><code class="literal">&lt;groupname&gt;</code></a>: Groupname
</li><li class="listitem">
<a class="link" href="apa.html#createOSXService.keepAlive"><code class="literal">&lt;keepAlive&gt;</code></a>: Keep process alive by launchctl
</li><li class="listitem">
<a class="link" href="apa.html#createOSXService.program"><code class="literal">&lt;program&gt;</code></a>: Path to program
</li><li class="listitem">
<a class="link" href="apa.html#createOSXService.programArguments"><code class="literal">&lt;programArguments&gt;</code></a>: Arguments to pass to the program
</li><li class="listitem">
<a class="link" href="apa.html#createOSXService.scope"><code class="literal">&lt;scope&gt;</code></a>: Scope of service
</li><li class="listitem">
<a class="link" href="apa.html#createOSXService.serviceName"><code class="literal">&lt;serviceName&gt;</code></a>: Identifier for the service name
</li><li class="listitem">
<a class="link" href="apa.html#createOSXService.username"><code class="literal">&lt;username&gt;</code></a>: Username
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Create new service <code class="literal">com.bitrock.sample</code>. </strong>
</p><pre class="programlisting">&lt;createOSXService&gt;
    &lt;keepAlive&gt;1&lt;/keepAlive&gt;
    &lt;program&gt;${installdir}/Sample.app/Contents/MacOS/sample&lt;/program&gt;
    &lt;programArguments&gt;--service&lt;/programArguments&gt;
    &lt;serviceName&gt;com.bitrock.sample&lt;/serviceName&gt;
    &lt;scope&gt;system&lt;/scope&gt;
    &lt;username&gt;daemon&lt;/username&gt;
    &lt;groupname&gt;wheel&lt;/groupname&gt;
&lt;/createOSXService&gt;</pre><p>
</p><p>New service will start automatically and run <code class="literal">sample</code> from application bundle.</p><p>After a service is created, it should be started using <a class="link" href="apa.html#startOSXService"><code class="literal">&lt;startOSXService&gt;</code></a> - otherwise it will be started after computer restart.</p><p><code class="literal">Additional Examples:</code>
<a class="link" href="ar01s15.html#snip5580131">Example 1</a></p><h5><a id="_restart_windows_service"></a>Restart Windows Service</h5><p>This action allows you to restart a specified Windows service.
The allowed properties in the <a class="link" href="apa.html#restartWindowsService"><code class="literal">&lt;restartWindowsService&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#restartWindowsService.delay"><code class="literal">&lt;delay&gt;</code></a>: Amount of milliseconds to wait for the service to start / stop.
</li><li class="listitem">
<a class="link" href="apa.html#restartWindowsService.displayName"><code class="literal">&lt;displayName&gt;</code></a>: Name displayed in the Windows service control panel
</li><li class="listitem">
<a class="link" href="apa.html#restartWindowsService.serviceName"><code class="literal">&lt;serviceName&gt;</code></a>: Internal service name
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Restart <code class="literal">Sample Service</code> service. </strong>
</p><pre class="programlisting">&lt;restartWindowsService&gt;
    &lt;abortOnError&gt;0&lt;/abortOnError&gt;
    &lt;delay&gt;15000&lt;/delay&gt;
    &lt;displayName&gt;Sample Service&lt;/displayName&gt;
    &lt;serviceName&gt;SampleService&lt;/serviceName&gt;
&lt;/restartWindowsService&gt;</pre><p>
</p><p><code class="literal">Additional Examples:</code>
<a class="link" href="ar01s15.html#snip3458533">Example 1</a></p><h4><a id="environment_actions_group"></a>Environment Actions</h4><h5><a id="_remove_directory_from_path"></a>Remove Directory from PATH</h5><p>This action allows you to remove a directory from the system PATH. For Windows, you can choose to modify the system path or the user path using the &lt;scope&gt; property.
The allowed properties in the <a class="link" href="apa.html#removeDirectoryFromPath"><code class="literal">&lt;removeDirectoryFromPath&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#removeDirectoryFromPath.path"><code class="literal">&lt;path&gt;</code></a>: Path to the directory
</li><li class="listitem">
<a class="link" href="apa.html#removeDirectoryFromPath.scope"><code class="literal">&lt;scope&gt;</code></a>: Select user path or system path.
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><pre class="programlisting">&lt;removeDirectoryFromPath&gt;
    &lt;path&gt;${installdir}/bin&lt;/path&gt;
&lt;/removeDirectoryFromPath&gt;</pre><h5><a id="_set_environment_variable"></a>Set Environment Variable</h5><p>Set the value of a system environment variable. If it does not exist yet, a new one will be created. The variable will not exist once the installer has finished.
The allowed properties in the <a class="link" href="apa.html#setEnvironmentVariable"><code class="literal">&lt;setEnvironmentVariable&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#setEnvironmentVariable.name"><code class="literal">&lt;name&gt;</code></a>: Variable name
</li><li class="listitem">
<a class="link" href="apa.html#setEnvironmentVariable.value"><code class="literal">&lt;value&gt;</code></a>: Variable value
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Set <code class="literal">MYAPP_HOME</code> environment variable to directory where application is installed. </strong>
</p><pre class="programlisting">&lt;setEnvironmentVariable&gt;
    &lt;name&gt;MYAPP_HOME&lt;/name&gt;
    &lt;value&gt;${installdir}&lt;/value&gt;
&lt;/setEnvironmentVariable&gt;</pre><p>
</p><p>Action <a class="link" href="apa.html#setEnvironmentVariable"><code class="literal">&lt;setEnvironmentVariable&gt;</code></a> only sets environment variable for this and child processes. Actions <a class="link" href="apa.html#addEnvironmentVariable"><code class="literal">&lt;addEnvironmentVariable</code></a> and <a class="link" href="apa.html#deleteEnvironmentVariable"><code class="literal">&lt;deleteEnvironmentVariable&gt;</code></a> can be used to set a variable for current user or entire system.</p><h5><a id="_add_directory_to_path"></a>Add Directory to Path</h5><p>Add a directory to the system path. This will modify the registry on windows and the appropiate shell initialization files on Unix systems
The allowed properties in the <a class="link" href="apa.html#addDirectoryToPath"><code class="literal">&lt;addDirectoryToPath&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#addDirectoryToPath.insertAt"><code class="literal">&lt;insertAt&gt;</code></a>: Where to insert the new directory in the PATH (currently Unix only)
</li><li class="listitem">
<a class="link" href="apa.html#addDirectoryToPath.path"><code class="literal">&lt;path&gt;</code></a>: Path to the directory
</li><li class="listitem">
<a class="link" href="apa.html#addDirectoryToPath.scope"><code class="literal">&lt;scope&gt;</code></a>: Select user path or system path.
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><pre class="programlisting">&lt;addDirectoryToPath&gt;
    &lt;insertAt&gt;end&lt;/insertAt&gt;
    &lt;path&gt;${installdir}/bin&lt;/path&gt;
&lt;/addDirectoryToPath&gt;</pre><h5><a id="_add_environment_variable"></a>Add Environment Variable</h5><p>Add a system environment variable.This will modify the registry on windows and the appropiate shell initialization files on Unix systems
The allowed properties in the <a class="link" href="apa.html#addEnvironmentVariable"><code class="literal">&lt;addEnvironmentVariable&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#addEnvironmentVariable.name"><code class="literal">&lt;name&gt;</code></a>: Environment variable name.
</li><li class="listitem">
<a class="link" href="apa.html#addEnvironmentVariable.scope"><code class="literal">&lt;scope&gt;</code></a>: Scope.
</li><li class="listitem">
<a class="link" href="apa.html#addEnvironmentVariable.username"><code class="literal">&lt;username&gt;</code></a>: User to modify the environment for. If empty, the current user will be used
</li><li class="listitem">
<a class="link" href="apa.html#addEnvironmentVariable.value"><code class="literal">&lt;value&gt;</code></a>: Variable name
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Set <code class="literal">MYAPP_HOME</code> environment variable to directory where application is installed. </strong>
</p><pre class="programlisting">&lt;addEnvironmentVariable&gt;
    &lt;abortOnError&gt;0&lt;/abortOnError&gt;
    &lt;name&gt;MYAPP_HOME&lt;/name&gt;
    &lt;scope&gt;system&lt;/scope&gt;
    &lt;showMessageOnError&gt;0&lt;/showMessageOnError&gt;
    &lt;value&gt;${installdir}&lt;/value&gt;
    &lt;onErrorActionList&gt;
        &lt;addEnvironmentVariable&gt;
            &lt;name&gt;MYAPP_HOME&lt;/name&gt;
            &lt;scope&gt;user&lt;/scope&gt;
            &lt;value&gt;${installdir}&lt;/value&gt;
        &lt;/addEnvironmentVariable&gt;
    &lt;/onErrorActionList&gt;
&lt;/addEnvironmentVariable&gt;</pre><p>
</p><p>If setting variable as <code class="literal">system</code> <a class="link" href="apa.html#addEnvironmentVariable.scope"><code class="literal">&lt;scope&gt;</code></a> fails, <code class="literal">user</code> scope is tried. If both fail, an error is thrown in the <a class="link" href="apa.html#addEnvironmentVariable"><code class="literal">&lt;addEnvironmentVariable&gt;</code></a> action for <code class="literal">user</code> <a class="link" href="apa.html#addEnvironmentVariable.scope"><code class="literal">&lt;scope&gt;</code></a>.</p><p>Please note that this sets environment variable for operating system. It does not automatically set variable for current installer and its child processes. Action <a class="link" href="apa.html#setEnvironmentVariable"><code class="literal">&lt;setEnvironmentVariable&gt;</code></a> should be used in addition to <a class="link" href="apa.html#addEnvironmentVariable"><code class="literal">&lt;addEnvironmentVariable&gt;</code></a> to set the variable for current process, if it is needed.</p><h5><a id="_add_fonts"></a>Add Fonts</h5><p>This action allows you to install fonts in Windows systems.
The allowed properties in the <a class="link" href="apa.html#addFonts"><code class="literal">&lt;addFonts&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#addFonts.excludeFiles"><code class="literal">&lt;excludeFiles&gt;</code></a>: Patterns to exclude files
</li><li class="listitem">
<a class="link" href="apa.html#addFonts.files"><code class="literal">&lt;files&gt;</code></a>: File patterns to apply action to
</li><li class="listitem">
<a class="link" href="apa.html#addFonts.matchHiddenFiles"><code class="literal">&lt;matchHiddenFiles&gt;</code></a>: Whether or not to attempt to match Windows hidden files
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Install a set of bundled fonts. </strong>
</p><pre class="programlisting">&lt;postInstallationActionList&gt;
  &lt;addFonts&gt;
    &lt;files&gt;${installdir}/fonts/*.ttf&lt;/files&gt;
  &lt;/addFonts&gt;
&lt;/postInstallationActionList&gt;</pre><p>
</p><h5><a id="_remove_fonts"></a>Remove Fonts</h5><p>This action allows you to remove fonts on Windows. The action accepts only file names or patterns (as opposed to file paths, either relative or absolute), matching them inside the system fonts folder.
The allowed properties in the <a class="link" href="apa.html#removeFonts"><code class="literal">&lt;removeFonts&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#removeFonts.excludeFiles"><code class="literal">&lt;excludeFiles&gt;</code></a>: Patterns to exclude files
</li><li class="listitem">
<a class="link" href="apa.html#removeFonts.files"><code class="literal">&lt;files&gt;</code></a>: File patterns to apply action to
</li><li class="listitem">
<a class="link" href="apa.html#removeFonts.matchHiddenFiles"><code class="literal">&lt;matchHiddenFiles&gt;</code></a>: Whether or not to attempt to match Windows hidden files
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Remove the installed fonts on uninstallation. </strong>
</p><pre class="programlisting">&lt;removeFonts&gt;
    &lt;files&gt;my_old_font.ttf;some_other_font.ttf;${project.shortName}*.ttf&lt;/files&gt;
&lt;/removeFonts&gt;</pre><p>
</p><h5><a id="_delete_environment_variable"></a>Delete Environment Variable</h5><p>Delete an environment variable from the system.
The allowed properties in the <a class="link" href="apa.html#deleteEnvironmentVariable"><code class="literal">&lt;deleteEnvironmentVariable&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#deleteEnvironmentVariable.name"><code class="literal">&lt;name&gt;</code></a>: Environment variable name.
</li><li class="listitem">
<a class="link" href="apa.html#deleteEnvironmentVariable.scope"><code class="literal">&lt;scope&gt;</code></a>: Scope.
</li><li class="listitem">
<a class="link" href="apa.html#deleteEnvironmentVariable.username"><code class="literal">&lt;username&gt;</code></a>: User to modify the environment for. If empty, the current user will be used
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Unset MYAPP_HOME from both <code class="literal">user</code> and <code class="literal">system</code> <code class="literal">&lt;scope&gt;</code>. </strong>
</p><pre class="programlisting">&lt;deleteEnvironmentVariable&gt;
    &lt;name&gt;MYAPP_HOME&lt;/name&gt;
    &lt;scope&gt;system&lt;/scope&gt;
&lt;/deleteEnvironmentVariable&gt;
&lt;deleteEnvironmentVariable&gt;
    &lt;name&gt;MYAPP_HOME&lt;/name&gt;
    &lt;scope&gt;user&lt;/scope&gt;
&lt;/deleteEnvironmentVariable&gt;</pre><p>
</p><h5><a id="_add_library_to_path"></a>Add Library to Path</h5><p>Add a path in which the system will search for shared libraries on Linux
The allowed properties in the <a class="link" href="apa.html#addLibraryToPath"><code class="literal">&lt;addLibraryToPath&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#addLibraryToPath.path"><code class="literal">&lt;path&gt;</code></a>: Path to add to the system search for dynamic libraries on Linux
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Add your packed libraries to the system path. </strong>
</p><pre class="programlisting">&lt;addLibraryToPath&gt;
   &lt;path&gt;${installdir}/libs&lt;/path&gt;
&lt;/addLibraryToPath&gt;</pre><p>
</p><h5><a id="_get_the_current_working_directory"></a>Get the current working directory</h5><p>This action allows you to get the current working directory.
The allowed properties in the <a class="link" href="apa.html#pwd"><code class="literal">&lt;pwd&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#pwd.variable"><code class="literal">&lt;variable&gt;</code></a>: Variable to which to save the current working directory.
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Get the current working directory. </strong>
</p><pre class="programlisting">&lt;pwd&gt;
    &lt;variable&gt;current_working_directory&lt;/variable&gt;
&lt;/pwd&gt;</pre><p>
</p><h4><a id="fileSystem_actions_group"></a>File System Actions</h4><h5><a id="_copy_file"></a>Copy File</h5><p>Create a copy of a file. The destination file will be overwritten if it already exists
The allowed properties in the <a class="link" href="apa.html#copyFile"><code class="literal">&lt;copyFile&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#copyFile.destination"><code class="literal">&lt;destination&gt;</code></a>: Path to where the file will be copied.
</li><li class="listitem">
<a class="link" href="apa.html#copyFile.excludeFiles"><code class="literal">&lt;excludeFiles&gt;</code></a>: Patterns to exclude files
</li><li class="listitem">
<a class="link" href="apa.html#copyFile.matchHiddenFiles"><code class="literal">&lt;matchHiddenFiles&gt;</code></a>: Whether or not to attempt to match Windows hidden files
</li><li class="listitem">
<a class="link" href="apa.html#copyFile.origin"><code class="literal">&lt;origin&gt;</code></a>: Path to the original file.
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Copy a shortcut to the Desktop. </strong>
</p><pre class="programlisting">&lt;copyFile&gt;
   &lt;destination&gt;~/Desktop&lt;/destination&gt;
   &lt;origin&gt;${installdir}/Launch Application.desktop&lt;/origin&gt;
   &lt;ruleList&gt;
      &lt;platformTest type="unix"/&gt;
   &lt;/ruleList&gt;
&lt;/copyFile&gt;</pre><p>
</p><p><code class="literal">Additional Examples:</code>
<a class="link" href="ar01s15.html#snip9112944">Example 1</a>, <a class="link" href="ar01s27.html#snip3002060">Example 2</a>, <a class="link" href="ar01s26.html#snip8734989">Example 3</a></p><h5><a id="_unpack_directory"></a>Unpack Directory</h5><p>This action allows you to unpack a directory before files are unpacked during the installation phase. This can be helpful to extract a full directory to a temporary folder such as ${env(TEMP)}. If you need to unpack single files, you may want to try using &lt;unpackFile&gt; action instead.
The allowed properties in the <a class="link" href="apa.html#unpackDirectory"><code class="literal">&lt;unpackDirectory&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#unpackDirectory.component"><code class="literal">&lt;component&gt;</code></a>: Project component where the directory you want to extract is located.
</li><li class="listitem">
<a class="link" href="apa.html#unpackDirectory.destination"><code class="literal">&lt;destination&gt;</code></a>: Path to the location where you want to extract the directory.
</li><li class="listitem">
<a class="link" href="apa.html#unpackDirectory.folder"><code class="literal">&lt;folder&gt;</code></a>: Project folder name where the directory you want to extract is located.
</li><li class="listitem">
<a class="link" href="apa.html#unpackDirectory.origin"><code class="literal">&lt;origin&gt;</code></a>: Directory name you want to extract.
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Unpack initial data if it does not exist (i.e. for initial installation). </strong>
</p><pre class="programlisting">&lt;unpackDirectory&gt;
    &lt;component&gt;initialdata&lt;/component&gt;
    &lt;destination&gt;${installdir}/data&lt;/destination&gt;
    &lt;folder&gt;data&lt;/folder&gt;
    &lt;origin&gt;data&lt;/origin&gt;
    &lt;ruleList&gt;
        &lt;fileTest&gt;
            &lt;condition&gt;not_exists&lt;/condition&gt;
            &lt;path&gt;${installdir}/data&lt;/path&gt;
        &lt;/fileTest&gt;
    &lt;/ruleList&gt;
&lt;/unpackDirectory&gt;</pre><p>
</p><p><code class="literal">Additional Examples:</code>
<a class="link" href="ar01s06.html#snip2960450">Example 1</a>, <a class="link" href="ar01s06.html#snip7401639">Example 2</a>, <a class="link" href="ar01s08.html#snip2856803">Example 3</a></p><h5><a id="_delete_file"></a>Delete File</h5><p>Delete a file or directory (including its contents). The action does not throw an error if deleting a file or directory failed.
The allowed properties in the <a class="link" href="apa.html#deleteFile"><code class="literal">&lt;deleteFile&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#deleteFile.excludeFiles"><code class="literal">&lt;excludeFiles&gt;</code></a>: Patterns to exclude files
</li><li class="listitem">
<a class="link" href="apa.html#deleteFile.matchHiddenFiles"><code class="literal">&lt;matchHiddenFiles&gt;</code></a>: Whether or not to attempt to match Windows hidden files
</li><li class="listitem">
<a class="link" href="apa.html#deleteFile.path"><code class="literal">&lt;path&gt;</code></a>: Path to the file or directory to delete. It accepts patterns
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Delete a directory if it is empty. </strong>
</p><pre class="programlisting">&lt;deleteFile&gt;
  &lt;path&gt;${installer_directory}&lt;/path&gt;
  &lt;ruleList&gt;
    &lt;fileTest condition="is_empty" path="${installer_directory}"/&gt;
  &lt;/ruleList&gt;
&lt;/deleteFile&gt;
&lt;throwError&gt;
  &lt;text&gt;Unable to delete installer directory&lt;/text&gt;
  &lt;ruleList&gt;
    &lt;fileTest condition="exists" path="${installer_directory}"/&gt;
  &lt;/ruleList&gt;
&lt;/throwError&gt;</pre><p>
</p><p><code class="literal">Additional Examples:</code>
<a class="link" href="ar01s02.html#snip3666467">Example 1</a>, <a class="link" href="ar01s14.html#snip2606181">Example 2</a>, <a class="link" href="ar01s09.html#snip3410647">Example 3</a></p><h5><a id="_create_backup_file"></a>Create Backup File</h5><p>Create a backup of a file or directory. The backup will be named with a .bak extension if no destination is specified. If a backup file already exists, new backups will be named .bak1, .bak2 and so on.
The allowed properties in the <a class="link" href="apa.html#createBackupFile"><code class="literal">&lt;createBackupFile&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#createBackupFile.destination"><code class="literal">&lt;destination&gt;</code></a>: Path to the destination backup folder.
</li><li class="listitem">
<a class="link" href="apa.html#createBackupFile.path"><code class="literal">&lt;path&gt;</code></a>: Path to original file you wish to backup.
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Backup the backup of a file before making changes. </strong>
</p><pre class="programlisting">&lt;createBackupFile&gt;
    &lt;destination&gt;&lt;/destination&gt;
    &lt;path&gt;${installdir}/apache2/conf/httpd.conf&lt;/path&gt;
&lt;/createBackupFile&gt;</pre><p>
</p><p>The action does not specifies a <a class="link" href="ape.html#destination"><code class="literal">&lt;destination&gt;</code></a> so the destination fileaname will be autogenerated.</p><p><code class="literal">Additional Examples:</code>
<a class="link" href="ar01s09.html#snip931362">Example 1</a></p><h5><a id="_create_directory"></a>Create Directory</h5><p>This action allows you to create a new directory.
The allowed properties in the <a class="link" href="apa.html#createDirectory"><code class="literal">&lt;createDirectory&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#createDirectory.path"><code class="literal">&lt;path&gt;</code></a>: Path to the new directory
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Create a directory. </strong>
</p><pre class="programlisting">&lt;createDirectory&gt;
    &lt;path&gt;/opt/src&lt;/path&gt;
&lt;/createDirectory&gt;</pre><p>
</p><p>If the directory already exists the action won’t have any effect so it is not needed to attach a rule checking the existence.</p><p><code class="literal">Additional Examples:</code>
<a class="link" href="ar01s27.html#snip3002060">Example 1</a>, <a class="link" href="ar01s27.html#snip5627449">Example 2</a>, <a class="link" href="ar01s27.html#snip5901886">Example 3</a></p><h5><a id="_unzip"></a>Unzip</h5><p>This action allows you to uncompress the whole content of a zip file to a given destination folder. The file to unzip must be already present on the file system, i.e., it doesn’t support unzipping files that are shipped by the installer but which have not been already unpacked (you may want to use the &lt;unpackFile&gt; action in that case).
The allowed properties in the <a class="link" href="apa.html#unzip"><code class="literal">&lt;unzip&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#unzip.destinationDirectory"><code class="literal">&lt;destinationDirectory&gt;</code></a>: Path to the folder where you want the file content to be extracted. The folder must exist and must be writable
</li><li class="listitem">
<a class="link" href="apa.html#unzip.zipFile"><code class="literal">&lt;zipFile&gt;</code></a>: ZIP file that will be uncompressed
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Extract a compressed application bundle. </strong>
</p><pre class="programlisting">&lt;unzip&gt;
    &lt;destinationDirectory&gt;${installdir}/applications&lt;/destinationDirectory&gt;
    &lt;zipFile&gt;${installdir}/myApplication.app.zip&lt;/zipFile&gt;
&lt;/unzip&gt;</pre><p>
</p><p><code class="literal">Additional Examples:</code>
<a class="link" href="ar01s08.html#snip9131644">Example 1</a></p><h5><a id="_touch_file"></a>Touch File</h5><p>Update the access and modification times of a file or directory. If the file does not exist, it can be specified whether to create an empty file or not. It is equivalent to the <span class="emphasis"><em>touch</em></span> Unix command.
The allowed properties in the <a class="link" href="apa.html#touchFile"><code class="literal">&lt;touchFile&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#touchFile.createIfNotExists"><code class="literal">&lt;createIfNotExists&gt;</code></a>: Whether or not to create the file in case it does not exist
</li><li class="listitem">
<a class="link" href="apa.html#touchFile.matchHiddenFiles"><code class="literal">&lt;matchHiddenFiles&gt;</code></a>: Whether or not to attempt to match Windows hidden files
</li><li class="listitem">
<a class="link" href="apa.html#touchFile.path"><code class="literal">&lt;path&gt;</code></a>: Path to the file/directory to be touched
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Create a file to mark a component as installed. </strong>
</p><pre class="programlisting">&lt;touchFile&gt;
    &lt;createIfNotExists&gt;1&lt;/createIfNotExists&gt;
    &lt;path&gt;${installdir}/components/documentationComponent&lt;/path&gt;
    &lt;ruleList&gt;
       &lt;isTrue value="${project.component(documentationComponent).selected}"/&gt;
    &lt;/ruleList&gt;
&lt;/touchFile&gt;</pre><p>
</p><p><code class="literal">Additional Examples:</code>
<a class="link" href="ar01s14.html#snip6171021">Example 1</a></p><h5><a id="_get_symbolic_link_target"></a>Get Symbolic Link target</h5><p>Get the destination path referenced by the given symbolic link. Returns an empty value if the file doesn’t exist or is not a symbolic link.
The allowed properties in the <a class="link" href="apa.html#getSymLinkTarget"><code class="literal">&lt;getSymLinkTarget&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#getSymLinkTarget.link"><code class="literal">&lt;link&gt;</code></a>: Symbolic link path
</li><li class="listitem">
<a class="link" href="apa.html#getSymLinkTarget.variable"><code class="literal">&lt;variable&gt;</code></a>: Variable to store result
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Read symbolic link <code class="literal">libsample.so</code> in application directory. </strong>
</p><pre class="programlisting">&lt;getSymLinkTarget&gt;
    &lt;link&gt;${installdir}/libsample.so&lt;/link&gt;
    &lt;variable&gt;lib_path&lt;/variable&gt;
&lt;/getSymLinkTarget&gt;</pre><p>
</p><p>This will store target path in <code class="literal">lib_path</code> variable. Note that if the path is not absolute, it is relative to directory where <a class="link" href="apa.html#getSymLinkTarget.link"><code class="literal">&lt;link&gt;</code></a> is located.</p><h5><a id="_rename_file"></a>Rename File</h5><p>Change the name of a file or directory
The allowed properties in the <a class="link" href="apa.html#renameFile"><code class="literal">&lt;renameFile&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#renameFile.destination"><code class="literal">&lt;destination&gt;</code></a>: New name of the file.
</li><li class="listitem">
<a class="link" href="apa.html#renameFile.excludeFiles"><code class="literal">&lt;excludeFiles&gt;</code></a>: Patterns to exclude files
</li><li class="listitem">
<a class="link" href="apa.html#renameFile.matchHiddenFiles"><code class="literal">&lt;matchHiddenFiles&gt;</code></a>: Whether or not to attempt to match Windows hidden files
</li><li class="listitem">
<a class="link" href="apa.html#renameFile.origin"><code class="literal">&lt;origin&gt;</code></a>: Original name of the file.
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Rename file as .bak, deleting previous file if it exists. </strong>
</p><pre class="programlisting">&lt;deleteFile&gt;
    &lt;path&gt;${installdir}/config.ini.bak&lt;/path&gt;
&lt;/deleteFile&gt;
&lt;renameFile&gt;
    &lt;destination&gt;${installdir}/config.ini.bak&lt;/destination&gt;
    &lt;origin&gt;${installdir}/config.ini&lt;/origin&gt;
&lt;/renameFile&gt;</pre><p>
</p><p><code class="literal">Additional Examples:</code>
<a class="link" href="ar01s21.html#snip2135560">Example 1</a>, <a class="link" href="ar01s08.html#snip2856803">Example 2</a>, <a class="link" href="ar01s21.html#snip410075">Example 3</a></p><h5><a id="_create_symbolic_link"></a>Create Symbolic Link</h5><p>Create a symbolic link to a file. It is the equivalent to the Unix <span class="emphasis"><em>ln</em></span> command.
The allowed properties in the <a class="link" href="apa.html#createSymLink"><code class="literal">&lt;createSymLink&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#createSymLink.linkName"><code class="literal">&lt;linkName&gt;</code></a>: Symbolic link name.
</li><li class="listitem">
<a class="link" href="apa.html#createSymLink.target"><code class="literal">&lt;target&gt;</code></a>: Path to the file to which you want to create a symbolic link.
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Create symbolic link <code class="literal">libsample.so</code> pointing to <code class="literal">libsample.so.1</code> in application directory. </strong>
</p><pre class="programlisting">&lt;createSymLink&gt;
    &lt;linkName&gt;${installdir}/libsample.so&lt;/linkName&gt;
    &lt;target&gt;libsample.so.1&lt;/target&gt;
&lt;/createSymLink&gt;</pre><p>
</p><p>This will create a symbolic link in application’s directory. Note that <a class="link" href="apa.html#createSymLink.target"><code class="literal">&lt;target&gt;</code></a> is relative to directory where <a class="link" href="apa.html#createSymLink.linkName"><code class="literal">&lt;linkName&gt;</code></a> will be created.</p><p><code class="literal">Additional Examples:</code>
<a class="link" href="ar01s09.html#snip2751578">Example 1</a>, <a class="link" href="ar01s11.html#snip9459936">Example 2</a></p><h5><a id="_zip"></a>Zip</h5><p>Pack one or more files to a zip file, relative to base directory.
The allowed properties in the <a class="link" href="apa.html#zip"><code class="literal">&lt;zip&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#zip.baseDirectory"><code class="literal">&lt;baseDirectory&gt;</code></a>: Directory that all files will be packed relatively to
</li><li class="listitem">
<a class="link" href="apa.html#zip.excludeFiles"><code class="literal">&lt;excludeFiles&gt;</code></a>: Patterns to exclude files
</li><li class="listitem">
<a class="link" href="apa.html#zip.files"><code class="literal">&lt;files&gt;</code></a>: File patterns to apply action to
</li><li class="listitem">
<a class="link" href="apa.html#zip.matchHiddenFiles"><code class="literal">&lt;matchHiddenFiles&gt;</code></a>: Whether or not to attempt to match Windows hidden files
</li><li class="listitem">
<a class="link" href="apa.html#zip.zipFile"><code class="literal">&lt;zipFile&gt;</code></a>: ZIP file that will be created
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Zip all the files in a directory excluding <code class="literal">.DS_Store</code> directories. </strong>
</p><pre class="programlisting">&lt;zip&gt;
    &lt;baseDirectory&gt;${installdir}&lt;/baseDirectory&gt;
    &lt;files&gt;${installdir}/backup&lt;/files&gt;
    &lt;excludeFiles&gt;*/.DS_Store&lt;/excludeFiles&gt;
    &lt;zipFile&gt;${installdir}/backup.zip&lt;/zipFile&gt;
&lt;/zip&gt;</pre><p>
</p><p>As the <code class="literal">&lt;baseDirectory&gt;</code> is set to <code class="literal">${installdir}</code>, the packed files will be relative to it. For example, the file <code class="literal">/home/bitrock/sample-1.0/backup/README.txt</code> will be stored in the zip file as <code class="literal">backup/README.txt</code>.</p><p><code class="literal">Additional Examples:</code>
<a class="link" href="ar01s08.html#snip9131644">Example 1</a></p><h5><a id="_create_shortcuts"></a>Create Shortcuts</h5><p>Creates one or more shortcuts in specified location.
The allowed properties in the <a class="link" href="apa.html#createShortcuts"><code class="literal">&lt;createShortcuts&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#createShortcuts.destination"><code class="literal">&lt;destination&gt;</code></a>: Path to the location where you want to create the shortcuts.
</li><li class="listitem">
<a class="link" href="apa.html#createShortcuts.shortcutList"><code class="literal">&lt;shortcutList&gt;</code></a>: List of shortcuts to create.
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Create additional shortcuts that run as administrator if UAC is enabled. </strong>
</p><pre class="programlisting">&lt;createShortcuts&gt;
    &lt;destination&gt;${windows_folder_common_programs}/${project.startMenuGroupName}&lt;/destination&gt;
    &lt;ruleList&gt;
        &lt;isTrue value="${windows_os_uac_enabled}"/&gt;
    &lt;/ruleList&gt;
    &lt;shortcutList&gt;
        &lt;shortcut&gt;
            &lt;comment&gt;Text that will appear on Tooltip&lt;/comment&gt;
            &lt;name&gt;Run administrative panel&lt;/name&gt;
            &lt;runAsAdmin&gt;1&lt;/runAsAdmin&gt;
            &lt;windowsExec&gt;${installdir}/admin.exe&lt;/windowsExec&gt;
            &lt;windowsExecArgs&gt;&lt;/windowsExecArgs&gt;
            &lt;windowsPath&gt;${installdir}&lt;/windowsPath&gt;
        &lt;/shortcut&gt;
    &lt;/shortcutList&gt;
&lt;/createShortcuts&gt;</pre><p>
</p><p><code class="literal">Additional Examples:</code>
<a class="link" href="ar01s12.html#snip7426049">Example 1</a>, <a class="link" href="ar01s12.html#snip7613341">Example 2</a>, <a class="link" href="ar01s11.html#snip7815758">Example 3</a></p><h5><a id="_unpack_file"></a>Unpack File</h5><p>This action allows you to unpack a file before files are unpacked during the installation phase. This can be helpful to extract files to a temporary folder such as ${env(TEMP)} if you need to run a pre-installation check script or program. If you need to unpack a directory, you may want to try using &lt;unpackDirectory&gt; action instead.
The allowed properties in the <a class="link" href="apa.html#unpackFile"><code class="literal">&lt;unpackFile&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#unpackFile.component"><code class="literal">&lt;component&gt;</code></a>: Project component where the file you want to extract is located
</li><li class="listitem">
<a class="link" href="apa.html#unpackFile.destination"><code class="literal">&lt;destination&gt;</code></a>: Path to the location where you want to extract the file
</li><li class="listitem">
<a class="link" href="apa.html#unpackFile.folder"><code class="literal">&lt;folder&gt;</code></a>: Project folder name where where the file you want to extract is located
</li><li class="listitem">
<a class="link" href="apa.html#unpackFile.origin"><code class="literal">&lt;origin&gt;</code></a>: File name you want to extract
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Unpack initial configuration if it does not exist. </strong>
</p><pre class="programlisting">&lt;unpackFile&gt;
    &lt;component&gt;initialdata&lt;/component&gt;
    &lt;destination&gt;${installdir}/config.ini&lt;/destination&gt;
    &lt;folder&gt;data&lt;/folder&gt;
    &lt;origin&gt;config.ini&lt;/origin&gt;
    &lt;ruleList&gt;
        &lt;fileTest&gt;
            &lt;condition&gt;not_exists&lt;/condition&gt;
            &lt;path&gt;${installdir}/config.ini&lt;/path&gt;
        &lt;/fileTest&gt;
    &lt;/ruleList&gt;
&lt;/unpackFile&gt;</pre><p>
</p><p><code class="literal">Additional Examples:</code>
<a class="link" href="ar01s06.html#snip2822075">Example 1</a>, <a class="link" href="ar01s02.html#snip8152914">Example 2</a>, <a class="link" href="ar01s06.html#snip9726480">Example 3</a></p><h5><a id="_get_file_or_directory_information"></a>Get File Or Directory Information</h5><p>Gets Information About File Or Directory
The allowed properties in the <a class="link" href="apa.html#getFileInfo"><code class="literal">&lt;getFileInfo&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#getFileInfo.followSymLinks"><code class="literal">&lt;followSymLinks&gt;</code></a>: Whether or not to follow or not symbolic links
</li><li class="listitem">
<a class="link" href="apa.html#getFileInfo.path"><code class="literal">&lt;path&gt;</code></a>: Path
</li><li class="listitem">
<a class="link" href="apa.html#getFileInfo.type"><code class="literal">&lt;type&gt;</code></a>: Type of information to retrieve
</li><li class="listitem">
<a class="link" href="apa.html#getFileInfo.variable"><code class="literal">&lt;variable&gt;</code></a>: Variable to store result in
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Get size of database.db in installation directory. </strong>
</p><pre class="programlisting">&lt;getFileInfo&gt;
    &lt;path&gt;${installdir}/database.db&lt;/path&gt;
    &lt;type&gt;size&lt;/type&gt;
    &lt;variable&gt;size&lt;/variable&gt;
&lt;/getFileInfo&gt;</pre><p>
</p><p>This will store size of <code class="literal">database.db</code> file in installation directory to variable <code class="literal">size</code>.</p><h4><a id="system_actions_group"></a>System Actions</h4><h5><a id="_kill_process"></a>Kill Process</h5><p>This action allows you to kill a running process that matches one or several conditions. Windows support only.
The allowed properties in the <a class="link" href="apa.html#kill"><code class="literal">&lt;kill&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#kill.name"><code class="literal">&lt;name&gt;</code></a>: Name of the process, usually the executable filename.
</li><li class="listitem">
<a class="link" href="apa.html#kill.path"><code class="literal">&lt;path&gt;</code></a>: Path to the executable of the process.
</li><li class="listitem">
<a class="link" href="apa.html#kill.pid"><code class="literal">&lt;pid&gt;</code></a>: ID of the process to be killed.
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Kill a process by its name. </strong>
</p><pre class="programlisting">&lt;kill&gt;
  &lt;name&gt;SampleBinary.exe&lt;/name&gt;
&lt;/kill&gt;</pre><p>
</p><p><strong>Kill a process by its path. </strong>
</p><pre class="programlisting">&lt;kill&gt;
  &lt;path&gt;${filePath.dos}&lt;/path&gt;
&lt;/kill&gt;</pre><p>
</p><p><strong>Kill that the processes matching any of the provided criteria. </strong>
</p><pre class="programlisting">&lt;kill&gt;
  &lt;name&gt;SampleBinary.exe&lt;/name&gt;
  &lt;path&gt;${filePath.dos}&lt;/path&gt;
  &lt;pid&gt;35025&lt;/pid&gt;
&lt;/kill&gt;</pre><p>
</p><h5><a id="_locate_binary"></a>Locate Binary</h5><p>Based on command given, locates binary and creates command that needs to be run.
The allowed properties in the <a class="link" href="apa.html#locate"><code class="literal">&lt;locate&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#locate.command"><code class="literal">&lt;command&gt;</code></a>: Command to locate
</li><li class="listitem">
<a class="link" href="apa.html#locate.variable"><code class="literal">&lt;variable&gt;</code></a>: Variable to store the result in
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Locate <code class="literal">python</code> binary and find Python’s installation directory. </strong>
</p><pre class="programlisting">&lt;locate&gt;
    &lt;command&gt;python&lt;/command&gt;
    &lt;variable&gt;python_bin&lt;/variable&gt;
&lt;/locate&gt;
&lt;!-- get directory name for binary (i.e. /opt/ActivePython-2.5/bin) --&gt;
&lt;dirName&gt;
    &lt;variable&gt;python_parentdir&lt;/variable&gt;
    &lt;path&gt;${python_binary}&lt;/path&gt;
&lt;/dirName&gt;
&lt;!-- get Python home (i.e. /opt/ActivePython-2.5) --&gt;
&lt;dirName&gt;
    &lt;variable&gt;python_home&lt;/variable&gt;
    &lt;path&gt;${python_parentdir}&lt;/path&gt;
&lt;/dirName&gt;</pre><p>
</p><p>First <code class="literal">python</code> binary is located using PATH environment variable and registry on Windows, next binary name as well as parent directory name is stripped - so that <code class="literal">/opt/ActivePython-2.5/bin/python</code> is mapped to <code class="literal">/opt/ActivePython-2.5</code>.</p><h5><a id="_directory_name"></a>Directory Name</h5><p>Returns a name comprised of all of the path components in name excluding the last element. If name is a relative file name and only contains one path element, then returns ".". If name refers to a root directory, then the root directory is returned.
The allowed properties in the <a class="link" href="apa.html#dirName"><code class="literal">&lt;dirName&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#dirName.path"><code class="literal">&lt;path&gt;</code></a>: The path from which the base directory will be retrieved.
</li><li class="listitem">
<a class="link" href="apa.html#dirName.variable"><code class="literal">&lt;variable&gt;</code></a>: Variable that will store the directory path.
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Retrieve parent directory for installation - i.e. <code class="literal">/opt</code> or <code class="literal">C:\Program Files</code>. </strong>
</p><pre class="programlisting">&lt;dirName&gt;
    &lt;variable&gt;installation_parent&lt;/variable&gt;
    &lt;path&gt;${installdir}&lt;/path&gt;
&lt;/dirName&gt;</pre><p>
</p><h5><a id="_create_timestamp"></a>Create Timestamp</h5><p>This action allows you to create a timestamp using a custom format, storing the result in an installer variable.
The allowed properties in the <a class="link" href="apa.html#createTimeStamp"><code class="literal">&lt;createTimeStamp&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#createTimeStamp.format"><code class="literal">&lt;format&gt;</code></a>: Format string for the generated timestamp. The string allows a number of field descriptors.
</li><li class="listitem">
<a class="link" href="apa.html#createTimeStamp.variable"><code class="literal">&lt;variable&gt;</code></a>: Variable that will store the resulting timestamp.
</li></ul></div><p>The <a class="link" href="apa.html#createTimeStamp.format"><code class="literal">&lt;format&gt;</code></a> tag should contain one or more following fields, which will be replaced using current date and time:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<code class="literal">%a</code>: short name of the day of the week. e.g.: Thu
</li><li class="listitem">
<code class="literal">%A</code>: full name of the day of the week. e.g.: Thursday
</li><li class="listitem">
<code class="literal">%b</code>: short name of the month. e.g.: Apr
</li><li class="listitem">
<code class="literal">%B</code>: full name of the month. e.g.: April
</li><li class="listitem">
<code class="literal">%c</code>: localized representation of date and time of day. e.g.: Thu Apr 07 17:23:00 2011
</li><li class="listitem">
<code class="literal">%d</code>: number of the day of the month, as two decimal digits. e.g.: 07
</li><li class="listitem">
<code class="literal">%e</code>: number of the day of the month, as one or two decimal digits. e.g.: 7
</li><li class="listitem">
<code class="literal">%h</code>: same as <code class="literal">%b</code>
</li><li class="listitem">
<code class="literal">%H</code>: number giving the hour of the day in 24-hour clock format, as two decimal digits. e.g.: 17
</li><li class="listitem">
<code class="literal">%I</code>: number giving the hour of the day in 12-hour clock format, as two decimal digits. e.g.: 05
</li><li class="listitem">
<code class="literal">%k</code>: number giving the hour of the day in 24-hour clock format, as one or two decimal digits. e.g.: 17
</li><li class="listitem">
<code class="literal">%l</code>: number giving the hour of the day in 12-hour clock format, as one or two decimal digits. e.g.: 5
</li><li class="listitem">
<code class="literal">%m</code>: number of the month, as two decimal digits. e.g.: 04
</li><li class="listitem">
<code class="literal">%M</code>: number of the minute of the hour (00-59), as two decimal digits. e.g.: 23
</li><li class="listitem">
<code class="literal">%N</code>: number of the month, as one (preceeded with a space) or two decimal digits. e.g.:  4
</li><li class="listitem">
<code class="literal">%p</code>: AM/PM indicator. e.g.: PM
</li><li class="listitem">
<code class="literal">%R</code>: same as <code class="literal">%H:%M</code>
</li><li class="listitem">
<code class="literal">%s</code>: count of seconds since the epoch, expressed as decimal integer. e.g.: 1302189780
</li><li class="listitem">
<code class="literal">%S</code>: number of the seconds in the minute (00-59), as two decimal digits. e.g.: 00
</li><li class="listitem">
<code class="literal">%T</code>: same as <code class="literal">%H:%M:%S</code>
</li><li class="listitem">
<code class="literal">%u</code>: weekday number (Monday = 1, Sunday = 7). e.g.: 4
</li><li class="listitem">
<code class="literal">%U</code>: week of the year (00-52), Sunday is the first day of the week. e.g.: 14
</li><li class="listitem">
<code class="literal">%V</code>: week of the year according to ISO-8601 rules. Week 1 is week containing January 4th. e.g. 14
</li><li class="listitem">
<code class="literal">%w</code>: weekday number (Sunday = 0, Saturday = 6). e.g.: 4
</li><li class="listitem">
<code class="literal">%W</code>: week of the year (00-52), Monday is the first day of the week. e.g.: 14
</li><li class="listitem">
<code class="literal">%y</code>: year without century (00-99). e.g. 11
</li><li class="listitem">
<code class="literal">%Y</code>: year with century. e.g. 2011
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Get current timestamp and store it in an INI file. </strong>
</p><pre class="programlisting">&lt;createTimeStamp&gt;
    &lt;format&gt;%Y%m%d%H%M%S&lt;/format&gt;
    &lt;variable&gt;timestamp&lt;/variable&gt;
&lt;/createTimeStamp&gt;
&lt;iniFileSet&gt;
    &lt;file&gt;${installdir}/version.ini&lt;/file&gt;
    &lt;key&gt;timestamp&lt;/key&gt;
    &lt;section&gt;Version&lt;/section&gt;
    &lt;value&gt;${timestamp}&lt;/value&gt;
&lt;/iniFileSet&gt;</pre><p>
</p><p><code class="literal">Additional Examples:</code>
<a class="link" href="ar01s27.html#snip3002060">Example 1</a>, <a class="link" href="ar01s08.html#snip2856803">Example 2</a>, <a class="link" href="ar01s08.html#snip1818149">Example 3</a></p><h5><a id="_find_file"></a>Find File</h5><p>This action allows you to define a file name or pattern (eg. "*.txt") to be searched inside a given directory and all its subdirectories. It will save in the specified installer variable the full path to the first file that matches the provided file name or pattern.
The allowed properties in the <a class="link" href="apa.html#findFile"><code class="literal">&lt;findFile&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#findFile.baseDirectory"><code class="literal">&lt;baseDirectory&gt;</code></a>: Path to the directory in which to search for the file. It will search inside the directory and all of its subdirectories.
</li><li class="listitem">
<a class="link" href="apa.html#findFile.followSymLinks"><code class="literal">&lt;followSymLinks&gt;</code></a>: Whether or not to follow or not symbolic links
</li><li class="listitem">
<a class="link" href="apa.html#findFile.pattern"><code class="literal">&lt;pattern&gt;</code></a>: Pattern for the file that will be searched. The pattern can contain wildcards (*,?).
</li><li class="listitem">
<a class="link" href="apa.html#findFile.variable"><code class="literal">&lt;variable&gt;</code></a>: Variable where the full path to the first matching file will be stored
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Locate a previous installation by finding a well known file. </strong>
</p><pre class="programlisting">&lt;findFile&gt;
    &lt;baseDirectory&gt;/Applications&lt;/baseDirectory&gt;
    &lt;pattern&gt;myapp-info.ini&lt;/pattern&gt;
    &lt;variable&gt;installationInfo&lt;/variable&gt;
    &lt;ruleList&gt;
      &lt;platformTest type="osx"/&gt;
    &lt;/ruleList&gt;
&lt;/findFile&gt;</pre><p>
</p><h5><a id="_get_free_disk_space"></a>Get Free Disk Space</h5><p>Calculate the free disk (KiloBytes) space and save the value in the given variable. Returns -1 if free space cannot be determined.
The allowed properties in the <a class="link" href="apa.html#getFreeDiskSpace"><code class="literal">&lt;getFreeDiskSpace&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#getFreeDiskSpace.path"><code class="literal">&lt;path&gt;</code></a>: Path to the folder or disk
</li><li class="listitem">
<a class="link" href="apa.html#getFreeDiskSpace.units"><code class="literal">&lt;units&gt;</code></a>: Size units for the returned value.
</li><li class="listitem">
<a class="link" href="apa.html#getFreeDiskSpace.variable"><code class="literal">&lt;variable&gt;</code></a>: Variable to which to save the result of the calculation
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Validate the disk space in the installation directory. </strong>
</p><pre class="programlisting">&lt;directoryParameter&gt;
   &lt;name&gt;installdir&lt;/name&gt;
   &lt;validationActionList&gt;
     &lt;getFreeDiskSpace path="${installdir}" units="KB" variable="diskSpace"/&gt;
     &lt;throwError&gt;
       &lt;text&gt;You don't have enough disk space to install
       ${project.component(bigComponent).description}&lt;/text&gt;
       &lt;ruleList&gt;
         &lt;compareValues&gt;
            &lt;value1&gt;${required_diskspace}&lt;/value1&gt;
            &lt;logic&gt;greater&lt;/logic&gt;
            &lt;value2&gt;${diskSpace}&lt;/value2&gt;
         &lt;/compareValues&gt;
       &lt;/ruleList&gt;
     &lt;/throwError&gt;
   &lt;/validationActionList&gt;
&lt;/directoryParameter&gt;</pre><p>
</p><p><code class="literal">Additional Examples:</code>
<a class="link" href="ar01s05.html#snip6209974">Example 1</a></p><h5><a id="_get_total_disk_space"></a>Get Total Disk Space</h5><p>Get the total disk (KiloBytes) space and save the value in the given variable. Returns -1 if total space cannot be determined.
The allowed properties in the <a class="link" href="apa.html#getTotalDiskSpace"><code class="literal">&lt;getTotalDiskSpace&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#getTotalDiskSpace.path"><code class="literal">&lt;path&gt;</code></a>: Path to the folder or disk
</li><li class="listitem">
<a class="link" href="apa.html#getTotalDiskSpace.units"><code class="literal">&lt;units&gt;</code></a>: Size units for the returned value.
</li><li class="listitem">
<a class="link" href="apa.html#getTotalDiskSpace.variable"><code class="literal">&lt;variable&gt;</code></a>: Variable to which to save the result of the calculation
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Check if installation disk has enough disk space. </strong>
</p><pre class="programlisting">&lt;directoryParameter&gt;
   &lt;name&gt;installdir&lt;/name&gt;
   &lt;validationActionList&gt;
     &lt;getTotalDiskSpace path="${installdir}" units="MB" variable="diskSpace"/&gt;
     &lt;showWarning&gt;
       &lt;text&gt;The application should be installed on disk larger than 1TB for optimal performance&lt;/text&gt;
       &lt;ruleList&gt;
         &lt;compareValues&gt;
            &lt;value1&gt;1024&lt;/value1&gt;
            &lt;logic&gt;greater&lt;/logic&gt;
            &lt;value2&gt;${diskSpace}&lt;/value2&gt;
         &lt;/compareValues&gt;
       &lt;/ruleList&gt;
     &lt;/showWarning&gt;
   &lt;/validationActionList&gt;
&lt;/directoryParameter&gt;</pre><p>
</p><h5><a id="_get_available_port"></a>Get Available Port</h5><p>Returns the number of the first available port in a range of port numbers specified by initialPort and finalPort (both inclusive).
The allowed properties in the <a class="link" href="apa.html#getFreePort"><code class="literal">&lt;getFreePort&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#getFreePort.finalPort"><code class="literal">&lt;finalPort&gt;</code></a>: The final port number on the range (inclusive).
</li><li class="listitem">
<a class="link" href="apa.html#getFreePort.initialPort"><code class="literal">&lt;initialPort&gt;</code></a>: The initial port number on the range (inclusive).
</li><li class="listitem">
<a class="link" href="apa.html#getFreePort.variable"><code class="literal">&lt;variable&gt;</code></a>: Variable that will store the free port number.
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Find unused port and write it into web server’s configuration file. </strong>
</p><pre class="programlisting">&lt;getFreePort&gt;
    &lt;finalPort&gt;8999&lt;/finalPort&gt;
    &lt;initialPort&gt;8080&lt;/initialPort&gt;
    &lt;variable&gt;http_port&lt;/variable&gt;
&lt;/getFreePort&gt;
&lt;iniFileSet&gt;
    &lt;file&gt;${installdir}/www.ini&lt;/file&gt;
    &lt;key&gt;Port&lt;/key&gt;
    &lt;section&gt;Listen&lt;/section&gt;
    &lt;value&gt;${http_port}&lt;/value&gt;
&lt;/iniFileSet&gt;</pre><p>
</p><h5><a id="_get_name_of_process_using_port"></a>Get Name Of Process Using Port</h5><p>Gets Name Of Process Using Specified Port
The allowed properties in the <a class="link" href="apa.html#getProcessUsingPort"><code class="literal">&lt;getProcessUsingPort&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#getProcessUsingPort.pidVariable"><code class="literal">&lt;pidVariable&gt;</code></a>: Variable to use for storing id of the process using the port
</li><li class="listitem">
<a class="link" href="apa.html#getProcessUsingPort.port"><code class="literal">&lt;port&gt;</code></a>: TCP port to check
</li><li class="listitem">
<a class="link" href="apa.html#getProcessUsingPort.variable"><code class="literal">&lt;variable&gt;</code></a>: Variable to use for storing name of the process using the port
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p>Validate port parameter and show appropriate message if it is in use, using the process name if it can be retrieved.</p><pre class="programlisting">&lt;validationActionList&gt;
    &lt;if&gt;
        &lt;actionList&gt;
            &lt;getProcessUsingPort&gt;
                &lt;port&gt;${port}&lt;/port&gt;
                &lt;variable&gt;port_process_name&lt;/variable&gt;
            &lt;/getProcessUsingPort&gt;
            &lt;if&gt;
                &lt;actionList&gt;
                    &lt;throwError&gt;
                        &lt;text&gt;Port ${port} is in use by ${port_process_name}&lt;/text&gt;
                    &lt;/throwError&gt;
                &lt;/actionList&gt;
                &lt;conditionRuleList&gt;
                    &lt;compareTextLength&gt;
                        &lt;length&gt;0&lt;/length&gt;
                        &lt;logic&gt;does_not_equal&lt;/logic&gt;
                        &lt;text&gt;${port_process_name}&lt;/text&gt;
                    &lt;/compareTextLength&gt;
                &lt;/conditionRuleList&gt;
                &lt;elseActionList&gt;
                    &lt;throwError&gt;
                        &lt;text&gt;Port ${port} is in use&lt;/text&gt;
                    &lt;/throwError&gt;
                &lt;/elseActionList&gt;
            &lt;/if&gt;
        &lt;/actionList&gt;
        &lt;conditionRuleList&gt;
            &lt;portTest&gt;
                &lt;condition&gt;cannot_bind&lt;/condition&gt;
                &lt;port&gt;${port}&lt;/port&gt;
            &lt;/portTest&gt;
        &lt;/conditionRuleList&gt;
    &lt;/if&gt;
&lt;/validationActionList&gt;</pre><h5><a id="_desktop_session_startup"></a>Desktop Session Startup</h5><p>Adds a program to be executed whenever a window manager session starts (only Linux KDE/Gnome supported).
The allowed properties in the <a class="link" href="apa.html#addUnixDesktopStartUpItem"><code class="literal">&lt;addUnixDesktopStartUpItem&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#addUnixDesktopStartUpItem.description"><code class="literal">&lt;description&gt;</code></a>: The description of the program.
</li><li class="listitem">
<a class="link" href="apa.html#addUnixDesktopStartUpItem.name"><code class="literal">&lt;name&gt;</code></a>: The name of this startup item.
</li><li class="listitem">
<a class="link" href="apa.html#addUnixDesktopStartUpItem.program"><code class="literal">&lt;program&gt;</code></a>: Path to the program to be executed when the session starts.
</li><li class="listitem">
<a class="link" href="apa.html#addUnixDesktopStartUpItem.programArguments"><code class="literal">&lt;programArguments&gt;</code></a>: Arguments to be considered when running the program (only available for GNOME).
</li><li class="listitem">
<a class="link" href="apa.html#addUnixDesktopStartUpItem.username"><code class="literal">&lt;username&gt;</code></a>: User to add the Startup item for. If empty, the current user will be used
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Create a startup item to run a <code class="literal">myapp-client</code> application. </strong>
</p><pre class="programlisting">&lt;addUnixDesktopStartUpItem&gt;
    &lt;description&gt;Client for managing myapp&lt;/description&gt;
    &lt;name&gt;myapp-client&lt;/name&gt;
    &lt;program&gt;${installdir}/myapp-client&lt;/program&gt;
    &lt;programArguments&gt;--dock&lt;/programArguments&gt;
&lt;/addUnixDesktopStartUpItem&gt;</pre><p>
</p><p>To get a similar behavior on Windows you just need to write a shortcut to the desired application to launch in the folder <code class="literal">${windows_folder_startup}</code>:</p><pre class="programlisting">&lt;createShortcuts&gt;
    &lt;destination&gt;${windows_folder_startup}/&lt;/destination&gt;
    &lt;shortcutList&gt;
        &lt;shortcut&gt;
            &lt;comment&gt;Client for managing myapp&lt;/comment&gt;
            &lt;name&gt;Launch myapp client&lt;/name&gt;
            &lt;runAsAdmin&gt;1&lt;/runAsAdmin&gt;
            &lt;windowsExec&gt;${installdir}/myapp-client.exe&lt;/windowsExec&gt;
            &lt;windowsExecArgs&gt;--dock&lt;/windowsExecArgs&gt;
            &lt;windowsPath&gt;${installdir}&lt;/windowsPath&gt;
        &lt;/shortcut&gt;
    &lt;/shortcutList&gt;
&lt;/createShortcuts&gt;</pre><h5><a id="_run_program"></a>Run Program</h5><p>Run a program or script
The allowed properties in the <a class="link" href="apa.html#runProgram"><code class="literal">&lt;runProgram&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#runProgram.program"><code class="literal">&lt;program&gt;</code></a>: Path to program or script to run
</li><li class="listitem">
<a class="link" href="apa.html#runProgram.programArguments"><code class="literal">&lt;programArguments&gt;</code></a>: Program arguments
</li><li class="listitem">
<a class="link" href="apa.html#runProgram.runAs"><code class="literal">&lt;runAs&gt;</code></a>: Run the program or script as a specific user id. It will only take effect on Unix system and when running the installer as root
</li><li class="listitem">
<a class="link" href="apa.html#runProgram.runAsShell"><code class="literal">&lt;runAsShell&gt;</code></a>: When configuring the runAs property, shell used to run the program. (not supported on OS X)
</li><li class="listitem">
<a class="link" href="apa.html#runProgram.stdin"><code class="literal">&lt;stdin&gt;</code></a>: Text to send to program’s standard input.
</li><li class="listitem">
<a class="link" href="apa.html#runProgram.useMSDOSPath"><code class="literal">&lt;useMSDOSPath&gt;</code></a>: Whether or not to use or not MSDOS program name path on Windows
</li><li class="listitem">
<a class="link" href="apa.html#runProgram.workingDirectory"><code class="literal">&lt;workingDirectory&gt;</code></a>: Working directory. This is important for scripts that expect to be run from a specific location. By default, it will be the directory where the script or program is located
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Launch the installed application in background. </strong>
</p><pre class="programlisting">&lt;runProgram&gt;
    &lt;program&gt;${installdir}/bin/${project.shortName}.run&lt;/program&gt;
    &lt;programArguments&gt;--showWelcome 1 &amp;amp;&lt;/programArguments&gt;
    &lt;workingDirectory&gt;${installdir}/bin&lt;/workingDirectory&gt;
&lt;/runProgram&gt;</pre><p>
</p><p>By default, programs executed are launched by their 8.3 names. InstallBuilder does that to avoid issues handling special characters like spaces. If you need your installer to be launched using the full name, for example to have an exact path to look when checking if the process is running, you can disable it setting <code class="literal">&lt;useMSDOSPath&gt;</code> to <code class="literal">0</code>. This setting is ignored when executing commands in platforms other than Windows.</p><p><strong>Use the long pathname when launching a program on Windows. </strong>
</p><pre class="programlisting">&lt;runProgram&gt;
    &lt;program&gt;${installdir}/bin/myApp.exe&lt;/program&gt;
    &lt;useMSDOSPath&gt;0&lt;/useMSDOSPath&gt;
&lt;/runProgram&gt;</pre><p>
</p><p>In Unix platforms, when running the installer as root, it is also possible to specify the user that will be used to execute the command:</p><p><strong>Run command as a specific user. </strong>
</p><pre class="programlisting">&lt;runProgram&gt;
    &lt;program&gt;${installdir}/bin/mysql&lt;/program&gt;
    &lt;runAs&gt;mysql&lt;/runAs&gt;
&lt;/runProgram&gt;</pre><p>
</p><p>If the installer is executed as a regular user in GUI mode, and <code class="literal">gksu</code> (Gnome command) or <code class="literal">kdesu</code> (KDE command) are in the path, they will be used to graphically require a password to raise privileges. Please note that this won’t work on OS X.</p><p><strong>Run command with a specific shell. </strong>
</p><pre class="programlisting">&lt;runProgram&gt;
    &lt;program&gt;${installdir}/bin/mysql&lt;/program&gt;
    &lt;runAs&gt;mysql&lt;/runAs&gt;
    &lt;runAsShell&gt;/bin/bash&lt;/runAsShell&gt;
&lt;/runProgram&gt;</pre><p>
</p><p>This property will only take into account when using &lt;runAs&gt;.</p><p><code class="literal">Additional Examples:</code>
<a class="link" href="ar01s08.html#snip2017122">Example 1</a>, <a class="link" href="ar01s08.html#snip4728918">Example 2</a>, <a class="link" href="ar01s17.html#snip841765">Example 3</a></p><h5><a id="_wait_for_port"></a>Wait For Port</h5><p>Pause the installation for a maximum timeout until a server process is listening in the specified port
The allowed properties in the <a class="link" href="apa.html#waitForPort"><code class="literal">&lt;waitForPort&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#waitForPort.port"><code class="literal">&lt;port&gt;</code></a>: TCP port to check
</li><li class="listitem">
<a class="link" href="apa.html#waitForPort.state"><code class="literal">&lt;state&gt;</code></a>: Wait for port to be free or in use.
</li><li class="listitem">
<a class="link" href="apa.html#waitForPort.timeout"><code class="literal">&lt;timeout&gt;</code></a>: Maximum amount of time to wait (in milliseconds)
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Wait until a port is free. </strong>
</p><pre class="programlisting">&lt;runProgram&gt;
   &lt;program&gt;${installdir}/ctlscript.sh&lt;/program&gt;
   &lt;programArguments&gt;stop mysql &amp;amp;&lt;/programArguments&gt;
&lt;/runProgram&gt;
&lt;waitForPort&gt;
   &lt;port&gt;${mysql_port}&lt;/port&gt;
   &lt;state&gt;free&lt;/state&gt;
   &lt;timeout&gt;30&lt;/timeout&gt;
&lt;/waitForPort&gt;
&lt;logMessage text="MySQL Stopped"/&gt;</pre><p>
</p><h5><a id="_path_manipulation"></a>Path manipulation</h5><p>Performs change on the path and returns it in variable
The allowed properties in the <a class="link" href="apa.html#pathManipulation"><code class="literal">&lt;pathManipulation&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#pathManipulation.action"><code class="literal">&lt;action&gt;</code></a>: Action to perform on the path
</li><li class="listitem">
<a class="link" href="apa.html#pathManipulation.path"><code class="literal">&lt;path&gt;</code></a>: The path to manipulate
</li><li class="listitem">
<a class="link" href="apa.html#pathManipulation.variable"><code class="literal">&lt;variable&gt;</code></a>: Variable that will store the new path.
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><pre class="programlisting">&lt;pathManipulation&gt;
 &lt;action&gt;absolutize&lt;/action&gt;
 &lt;path&gt;${datadir}&lt;/path&gt;
 &lt;variable&gt;datadir&lt;/variable&gt;
&lt;/pathManipulation&gt;</pre><h4><a id="userAndGroup_actions_group"></a>User and Group Actions</h4><h5><a id="_change_file_permissions"></a>Change File Permissions</h5><p>Change permissions of a file or directory
The allowed properties in the <a class="link" href="apa.html#changePermissions"><code class="literal">&lt;changePermissions&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#changePermissions.excludeFiles"><code class="literal">&lt;excludeFiles&gt;</code></a>: Patterns to exclude files
</li><li class="listitem">
<a class="link" href="apa.html#changePermissions.files"><code class="literal">&lt;files&gt;</code></a>: File patterns to apply action to
</li><li class="listitem">
<a class="link" href="apa.html#changePermissions.permissions"><code class="literal">&lt;permissions&gt;</code></a>: Permissions to set to file or directory
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Set readonly permissions in a directory. </strong>
</p><pre class="programlisting">&lt;changePermissions&gt;
    &lt;files&gt;${installdir}/documentation&lt;/files&gt;
    &lt;permissions&gt;555&lt;/permissions&gt;
&lt;/changePermissions&gt;</pre><p>
</p><p><code class="literal">Additional Examples:</code>
<a class="link" href="ar01s08.html#snip6744331">Example 1</a>, <a class="link" href="ar01s06.html#snip2321826">Example 2</a>, <a class="link" href="ar01s08.html#snip1972428">Example 3</a></p><h5><a id="_get_file_permissions"></a>Get File Permissions</h5><p>Get permissions of a file or directory
The allowed properties in the <a class="link" href="apa.html#getPermissions"><code class="literal">&lt;getPermissions&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#getPermissions.file"><code class="literal">&lt;file&gt;</code></a>: File or directory to retrieve permissions
</li><li class="listitem">
<a class="link" href="apa.html#getPermissions.variable"><code class="literal">&lt;variable&gt;</code></a>: Variable name to save permissions
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Preserve permisions of a system file when installing as root. </strong>
</p><pre class="programlisting">&lt;getPermissions&gt;
    &lt;file&gt;~${user}/.MacOSX/environment.plist&lt;/file&gt;
    &lt;variable&gt;permissions&lt;/variable&gt;
&lt;/getPermissions&gt;
&lt;runProgram&gt;
    &lt;program&gt;defaults&lt;/program&gt;
    &lt;programArguments&gt;write ~${user}/.MacOSX/environment foo -string bar&lt;/programArguments&gt;
&lt;/runProgram&gt;
&lt;changePermissions&gt;
    &lt;files&gt;~${user}/.MacOSX/environment.plist&lt;/files&gt;
    &lt;permissions&gt;${permissions}&lt;/permissions&gt;
&lt;/changePermissions&gt;</pre><p>
</p><h5><a id="_add_user"></a>Add User</h5><p>Add a user to the system.
The allowed properties in the <a class="link" href="apa.html#addUser"><code class="literal">&lt;addUser&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#addUser.homedir"><code class="literal">&lt;homedir&gt;</code></a>: Path to the users homedir
</li><li class="listitem">
<a class="link" href="apa.html#addUser.password"><code class="literal">&lt;password&gt;</code></a>: Password for the user account.
</li><li class="listitem">
<a class="link" href="apa.html#addUser.username"><code class="literal">&lt;username&gt;</code></a>: Username to add to the system
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Add <code class="literal">mysql</code> user. </strong>
</p><pre class="programlisting">&lt;postInstallationActionList&gt;
   &lt;addUser&gt;
     &lt;abortOnError&gt;0&lt;/abortOnError&gt;
     &lt;showMessageOnError&gt;0&lt;/showMessageOnError&gt;
     &lt;username&gt;mysql&lt;/username&gt;
   &lt;/addUser&gt;
&lt;/postInstallationActionList&gt;</pre><p>
</p><p><code class="literal">Additional Examples:</code>
<a class="link" href="ar01s06.html#snip4627376">Example 1</a></p><h5><a id="_delete_user"></a>Delete User</h5><p>Delete a user from the system. Equivalent to the Unix <span class="emphasis"><em>userdel</em></span> command
The allowed properties in the <a class="link" href="apa.html#deleteUser"><code class="literal">&lt;deleteUser&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#deleteUser.username"><code class="literal">&lt;username&gt;</code></a>: Username
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Delete <code class="literal">mysql</code> user. </strong>
</p><pre class="programlisting">&lt;postUninstallationActionList&gt;
  &lt;deleteUser&gt;
     &lt;abortOnError&gt;0&lt;/abortOnError&gt;
     &lt;showMessageOnError&gt;0&lt;/showMessageOnError&gt;
     &lt;username&gt;mysql&lt;/username&gt;
  &lt;/deleteUser&gt;
&lt;/postUninstallationActionList&gt;</pre><p>
</p><h5><a id="_add_group"></a>Add Group</h5><p>Add a group to the system. Equal to the Unix <span class="emphasis"><em>groupadd</em></span> command
The allowed properties in the <a class="link" href="apa.html#addGroup"><code class="literal">&lt;addGroup&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#addGroup.groupname"><code class="literal">&lt;groupname&gt;</code></a>: Group to add to the system
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Add <code class="literal">mysql</code> group. </strong>
</p><pre class="programlisting">&lt;postInstallationActionList&gt;
   &lt;addGroup&gt;
      &lt;abortOnError&gt;0&lt;/abortOnError&gt;
      &lt;groupname&gt;mysql&lt;/groupname&gt;
      &lt;showMessageOnError&gt;0&lt;/showMessageOnError&gt;
   &lt;/addGroup&gt;
&lt;/postInstallationActionList&gt;</pre><p>
</p><p><code class="literal">Additional Examples:</code>
<a class="link" href="ar01s06.html#snip4627376">Example 1</a></p><h5><a id="_delete_group"></a>Delete Group</h5><p>This action allows you to remove a group from the system.
The allowed properties in the <a class="link" href="apa.html#deleteGroup"><code class="literal">&lt;deleteGroup&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#deleteGroup.groupname"><code class="literal">&lt;groupname&gt;</code></a>: Group name to delete.
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Delete <code class="literal">mysql</code> group. </strong>
</p><pre class="programlisting">&lt;postUninstallationActionList&gt;
   &lt;deleteGroup&gt;
      &lt;abortOnError&gt;0&lt;/abortOnError&gt;
      &lt;groupname&gt;mysql&lt;/groupname&gt;
      &lt;showMessageOnError&gt;0&lt;/showMessageOnError&gt;
   &lt;/deleteGroup&gt;
&lt;/postUninstallationActionList&gt;</pre><p>
</p><h5><a id="_add_group_to_user"></a>Add Group To User</h5><p>Add a supplementary group to a user. This way, the user is also member of that group. Make sure that the group already exists. If no username is given, then the current logged on user is selected.
The allowed properties in the <a class="link" href="apa.html#addGroupToUser"><code class="literal">&lt;addGroupToUser&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#addGroupToUser.groupname"><code class="literal">&lt;groupname&gt;</code></a>: Groupname
</li><li class="listitem">
<a class="link" href="apa.html#addGroupToUser.username"><code class="literal">&lt;username&gt;</code></a>: Username
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Add <code class="literal">mysql</code> group to <code class="literal">mysql</code> user. </strong>
</p><pre class="programlisting">&lt;postInstallationActionList&gt;
   &lt;addGroupToUser&gt;
      &lt;groupname&gt;mysql&lt;/groupname&gt;
      &lt;username&gt;mysql&lt;/username&gt;
   &lt;/addGroupToUser&gt;
&lt;/postInstallationActionList&gt;</pre><p>
</p><h5><a id="_delete_group_from_user"></a>Delete Group from User</h5><p>Delete a supplementary group from a user.
The allowed properties in the <a class="link" href="apa.html#deleteGroupFromUser"><code class="literal">&lt;deleteGroupFromUser&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#deleteGroupFromUser.groupname"><code class="literal">&lt;groupname&gt;</code></a>: Groupname
</li><li class="listitem">
<a class="link" href="apa.html#deleteGroupFromUser.username"><code class="literal">&lt;username&gt;</code></a>: Username
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Remove user from myappusers group. </strong>
</p><pre class="programlisting">&lt;postUninstallationActionList&gt;
   &lt;deleteGroupFromUser&gt;
      &lt;groupname&gt;myappusers&lt;/groupname&gt;
      &lt;username&gt;${system_username}&lt;/username&gt;
   &lt;/deleteGroupFromUser&gt;
&lt;/postUninstallationActionList&gt;</pre><p>
</p><h5><a id="_change_owner_and_group"></a>Change Owner And Group</h5><p>Change the owner and group of a file or directory
The allowed properties in the <a class="link" href="apa.html#changeOwnerAndGroup"><code class="literal">&lt;changeOwnerAndGroup&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#changeOwnerAndGroup.excludeFiles"><code class="literal">&lt;excludeFiles&gt;</code></a>: Patterns to exclude files
</li><li class="listitem">
<a class="link" href="apa.html#changeOwnerAndGroup.files"><code class="literal">&lt;files&gt;</code></a>: File patterns to apply action to
</li><li class="listitem">
<a class="link" href="apa.html#changeOwnerAndGroup.group"><code class="literal">&lt;group&gt;</code></a>: Group to set to file or directory
</li><li class="listitem">
<a class="link" href="apa.html#changeOwnerAndGroup.owner"><code class="literal">&lt;owner&gt;</code></a>: Owner to set to file or directory
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Change user and group to PostgreSQL data folder. </strong>
</p><pre class="programlisting">&lt;changeOwnerAndGroup&gt;
    &lt;files&gt;${installdir}/postgresql/data&lt;/files&gt;
    &lt;group&gt;postgres&lt;/group&gt;
    &lt;owner&gt;postgres&lt;/owner&gt;
&lt;/changeOwnerAndGroup&gt;</pre><p>
</p><h5><a id="_add_rights_to_account"></a>Add Rights to Account</h5><p>Add rights to user or group on Windows
The allowed properties in the <a class="link" href="apa.html#addWindowsAccountRights"><code class="literal">&lt;addWindowsAccountRights&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#addWindowsAccountRights.account"><code class="literal">&lt;account&gt;</code></a>: User or group name
</li><li class="listitem">
<a class="link" href="apa.html#addWindowsAccountRights.rights"><code class="literal">&lt;rights&gt;</code></a>: Account rights, separated by spaces; Example value: SeServiceLogonRight. A complete list can be obtained from <a class="ulink" href="http://msdn.microsoft.com/en-us/library/aa375728(v=VS.85).aspx" target="_top">http://msdn.microsoft.com/en-us/library/aa375728(v=VS.85).aspx</a>
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Grant postgres account with SeServiceLogonRight if it does not have it already. </strong>
</p><pre class="programlisting">&lt;addWindowsAccountRights&gt;
   &lt;abortOnError&gt;0&lt;/abortOnError&gt;
   &lt;showMessageOnError&gt;0&lt;/showMessageOnError&gt;
   &lt;account&gt;${postgres_account}&lt;/account&gt;
   &lt;rights&gt;SeServiceLogonRight&lt;/rights&gt;
   &lt;ruleList&gt;
     &lt;windowsAccountTest&gt;
        &lt;account&gt;${postgres_account}&lt;/account&gt;
        &lt;rights&gt;SeServiceLogonPrivilege&lt;/rights&gt;
        &lt;negate&gt;1&lt;/negate&gt;
     &lt;/windowsAccountTest&gt;
   &lt;/ruleList&gt;
&lt;/addWindowsAccountRights&gt;</pre><p>
</p><h5><a id="_remove_rights_from_account"></a>Remove Rights from Account</h5><p>Remove rights from user or group on Windows
The allowed properties in the <a class="link" href="apa.html#removeWindowsAccountRights"><code class="literal">&lt;removeWindowsAccountRights&gt;</code></a> action are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="apa.html#removeWindowsAccountRights.account"><code class="literal">&lt;account&gt;</code></a>: User or group name
</li><li class="listitem">
<a class="link" href="apa.html#removeWindowsAccountRights.rights"><code class="literal">&lt;rights&gt;</code></a>: Account rights, separated by spaces; Example value: SeServiceLogonRight. A complete list can be obtained from <a class="ulink" href="http://msdn.microsoft.com/en-us/library/aa375728(v=VS.85).aspx" target="_top">http://msdn.microsoft.com/en-us/library/aa375728(v=VS.85).aspx</a>
</li></ul></div><p><span class="strong"><strong>Examples:</strong></span></p><p><strong>Remove SeBatchLogonRight and SeInteractiveLogonRight rights from an account. </strong>
</p><pre class="programlisting">&lt;removeWindowsAccountRights&gt;
   &lt;abortOnError&gt;0&lt;/abortOnError&gt;
   &lt;showMessageOnError&gt;0&lt;/showMessageOnError&gt;
   &lt;account&gt;${account}&lt;/account&gt;
   &lt;rights&gt;SeBatchLogonRight SeInteractiveLogonRight&lt;/rights&gt;
&lt;/removeWindowsAccountRights&gt;</pre><p>
</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ar01s07.html"><img src="images/icons/prev.png" alt="Prev" /></a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="ar01s09.html"><img src="images/icons/next.png" alt="Next" /></a></td></tr><tr><td width="40%" align="left" valign="top">7. User Input </td><td width="20%" align="center"><a accesskey="h" href="index.html"><img src="images/icons/home.png" alt="Home" /></a></td><td width="40%" align="right" valign="top"> 9. Rules</td></tr></table></div></body></html>