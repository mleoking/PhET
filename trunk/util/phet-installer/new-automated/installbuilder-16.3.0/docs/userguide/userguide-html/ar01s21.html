<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>21. Troubleshooting</title><link rel="stylesheet" type="text/css" href="docbook-xsl.css" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="BitRock InstallBuilder User Guide 15" /><link rel="up" href="index.html" title="BitRock InstallBuilder User Guide 15" /><link rel="prev" href="ar01s20.html" title="20. Rollback" /><link rel="next" href="ar01s22.html" title="22. Updates" /></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">21. Troubleshooting</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ar01s20.html"><img src="images/icons/prev.png" alt="Prev" /></a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="ar01s22.html"><img src="images/icons/next.png" alt="Next" /></a></td></tr></table><hr /></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="troubleshooting"></a>21. Troubleshooting</h2></div></div></div><p>InstallBuilder provides a number of features to help you debug failing installations. Installations can fail either because of internal factors (such as faulty logic) or external factors (such as running
out of disk space)</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_debugger"></a>21.1. Debugger</h3></div></div></div><p>InstallBuilder allows including an embedded debugger within your installers. This built-in debugger makes easier to identify and correct issues, speeding and simplifying installer development. Its main features, detailed in successive sections, are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
Viewing and interactively editing installer variables at runtime.
</li><li class="listitem">
Extended logging in the built-in log widget.
</li><li class="listitem">
Step-by-step execution.
</li><li class="listitem">
Allows recovering from unexpected errors during the installation.
</li></ul></div><div class="figure"><a id="idm140427927306768"></a><p class="title"><strong>Figure 73. Debugger Window</strong></p><div class="figure-contents"><div class="mediaobject" align="center"><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="80%"><tr><td align="center"><img src="images/debugger-running.png" align="middle" width="100%" alt="Debugger Window" /></td></tr></table></div></div></div><br class="figure-break" /><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_including_the_debugger_in_your_installer"></a>Including the debugger in your installer</h4></div></div></div><p>Packing the debugger is completely optional and configurable at build-time through the <a class="link" href="apd.html#enableDebugger"><code class="literal">&lt;enableDebugger&gt;</code></a> setting:</p><p><a id="snip6753372"></a></p><pre class="programlisting">&lt;project&gt;
   ...
   &lt;enableDebugger&gt;1&lt;/enableDebugger&gt;
   ...
&lt;/project&gt;</pre><p>This is very convenient when you do not want to allow your users to inspect the internals of the installer or simply to avoid the size overhead introduced (around 1.5MB).</p><p>Take into account that the setting is only considered when performing full builds. If you try to include the debugger in an existing installer (that does not already include the debugger) using the <a class="link" href="ar01s25.html#quickbuild_section" title="25.2. Quickbuild">quickbuild</a>, the builder won’t pack it.</p><p>Similarly, you cannot remove the debugger from an existing installer by setting <code class="literal">&lt;enableDebugger&gt;0&lt;/enableDebugger&gt;</code> and performing a quickbuild. However, although the debugger will be still packed, it won’t be accessible at runtime so the only drawback will be the increment in size mentioned above.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_enabling_the_debugger_at_runtime"></a>Enabling the debugger at runtime</h4></div></div></div><p>If the debugger was packed at build-time, it will be available at runtime by launching the installer from a console prompt as:</p><pre class="screen">$&gt; ./sample-1.0-windows-installer.exe --enable-debugger</pre><p>If the debugger was not packed, the command line flag won’t be available and thus you will get an error.</p><p>As the debugger is only available in <code class="literal">xwindow</code>, <code class="literal">win32</code>, <code class="literal">osx</code> and <code class="literal">unattended</code> modes, calling the installer with <code class="literal">--enable-debugger</code> will also reconfigure the graphical mode to the appropriate one in the running platform:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<code class="literal">win32</code>: On Windows
</li><li class="listitem">
<code class="literal">osx</code>: On Mac OS X
</li><li class="listitem">
<code class="literal">xwindow</code>: On Linux (and other Unix platforms but OS X)
</li><li class="listitem">
<code class="literal">unattended</code>: When the installer is also launched with <code class="literal">--mode unattended</code> (all platforms allow it)
</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_testing_installers_with_the_debugger"></a>Testing installers with the debugger</h4></div></div></div><p>InstallBuilder builder GUI provides an easy way to run the debugger.</p><p>To test your installer with the debugger enabled, simply click the Debug Run button.</p><div class="note" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Note: TODO: IMAGE"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/icons/note.png" /></td><th align="left">TODO: IMAGE</th></tr><tr><td align="left" valign="top"><p>TODO: IMAGE</p></td></tr></table></div><p>It will run a build of the installer to ensure it contains the debugger enabled and then start it with the debugger enabled.</p><p>If the installer does not currently have the debugger enabled, a full build of the installer will be made.</p><p>A quick build will be made if installer already has the debugger enabled - either <a class="link" href="apd.html#enableDebugger"><code class="literal">&lt;enableDebugger&gt;</code></a> setting enabled or was last built by clicking on the Debug Run button</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_debugger_usage"></a>Debugger usage</h4></div></div></div><p>When the installer is started with the debugger enabled, it will cause the debugger window to be shown in addition to the installer window:</p><div class="figure"><a id="idm140427927274992"></a><p class="title"><strong>Figure 74. Debugger First Screen</strong></p><div class="figure-contents"><div class="mediaobject" align="center"><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="80%"><tr><td align="center"><img src="images/debugger-first-screen.png" align="middle" width="100%" alt="Debugger First Screen" /></td></tr></table></div></div></div><br class="figure-break" /><p>After the debugger is initialized, it will keep waiting until the <code class="literal">run</code> button is clicked, and then the installer will start the installation (the <code class="literal">&lt;initializationActionList&gt;</code>). This allows you to set the appropriate <code class="literal">breakpoints</code> in those sections of your project that require debugging.</p><p>The debugger includes five main tools:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
Project tree editor <code class="literal">(1)</code>: A full tree that allows basic modifications of the overall project. Some features such as adding and removing parameters, folders and components are disabled.
</li><li class="listitem">
Action List Execution Editor <code class="literal">(2)</code>: A tree displaying the current action list being executed. The action lists are just loaded if they contain any <a class="link" href="apa.html#action.breakpoint"><code class="literal">&lt;breakpoint&gt;</code></a> or if the debugger entered the action list in a <code class="literal">step</code>.
</li><li class="listitem">
Debugger log <code class="literal">(3)</code>: A configurable log including information about the installed files, executed programs, standard streams, actions, rules…
</li><li class="listitem">
Variable Editor <code class="literal">(4)</code>: A tree allowing the creation, editing and visualization of installer variables and project settings.
</li><li class="listitem">
XML evaluator <code class="literal">(5)</code>: Allows executing arbitrary InstallBuilder XML code with the same context of the installer (same variables and parameters).
</li></ul></div><p>It also includes a control toolbar (<code class="literal">(6)</code>) and a menu to configure the debugger.</p><div class="figure"><a id="idm140427927257520"></a><p class="title"><strong>Figure 75. Debugger Tools</strong></p><div class="figure-contents"><div class="mediaobject" align="center"><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="80%"><tr><td align="center"><img src="images/debugger-tools.png" align="middle" width="100%" alt="Debugger Tools" /></td></tr></table></div></div></div><br class="figure-break" /><div class="section"><div class="titlepage"><div><div><h5 class="title"><a id="_the_toolbar"></a>The toolbar</h5></div></div></div><p>The debugger toolbar is used to control the behavior of the debugger. The below listing explains the usage of its buttons:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
Step, Skip, Run, Go To, Repeat, Set Breakpoint, Unset Breakpoint: Used to control the <code class="literal">Action List Execution Editor</code>.
</li><li class="listitem">
Disable Debugger: When the debugger is disabled, it does not stop at breakpoints or log messages. This speeds up the execution in big projects until the installation reaches the desired point or simply lets the installation finish after you are done with the debugging.
</li><li class="listitem">
Eval XML Code: Launches the <code class="literal">XML evaluator</code> dialog.
</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a id="_project_tree_editor"></a>Project tree editor</h5></div></div></div><p>The project tree editor allows basic modifications of the project. It is especially useful when the debugger is initialized, before the execution of the installer starts, to set breakpoints in the desired actions to debug.</p><p>To set a breakpoint on an action or action list, right-click on the desired element and select <code class="literal">Set Breakpoint</code> (or <code class="literal">Unset Breakpoint</code> if it is already set).</p><p>Its behavior is similar to the GUI builder tree. To modify an element such as a component, action or rule, just double-click it. New actions can also be added by double-clicking on an action list.</p><p>The tree can be also hidden from the "View" menu by unchecking "Main Tree".</p><div class="figure"><a id="idm140427927243696"></a><p class="title"><strong>Figure 76. Debugger Tools - Main Tree</strong></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/debugger-tools-main-tree.png" align="middle" alt="Debugger Tools - Main Tree" /></div></div></div><br class="figure-break" /></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a id="_action_list_execution_editor"></a>Action List Execution Editor</h5></div></div></div><p>When an action list contains a breakpoint (either in the action list or in any of its child actions) or the debugger stops at it because of a <code class="literal">step</code>, it is loaded in the <code class="literal">Action List Execution Editor</code>. The action list is represented in a tree with a left strip, displaying the breakpoints (represented by red dots) of the actions and the action being executed (marked by an orange arrow).</p><p>The tree allows moving, deleting and editing the actions, as well as adding new ones. It supports editing them either using the GUI pop-ups or using the built-in XML editor.</p><p>It also supports some operations, controlled by the main toolbar:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<code class="literal">Skip</code>: When the debugger is stopped at a breakpoint or because it was performing an <code class="literal">step</code>, clicking on the <code class="literal">Skip</code> button will make the debugger jump to the next action. In the figure, the next action is a <code class="literal">&lt;registryGet&gt;</code> action, by clicking <code class="literal">Skip</code>, the debugger will not execute it and step into the next one, the <code class="literal">&lt;actionGroup&gt;</code>.
</li><li class="listitem">
<code class="literal">Step</code>: Allows the debugger to execute actions step by step. This is useful for reviewing the results of each action in the log or the <code class="literal">Variable Editor</code>.
</li><li class="listitem">
<code class="literal">Run</code>: Makes the debugger continuously execute actions until a breakpoint is reached.
</li><li class="listitem">
<code class="literal">Go To</code>: Allows jumping to any of the actions in the loaded action list. The appropriate action must be selected before clicking the button.
</li><li class="listitem">
<code class="literal">Repeat</code>: This button makes the debugger execute the current action without stepping into the next one afterwards. This is useful for troubleshooting an action that is failing by trial and error, for example, a regexp not matching.
</li><li class="listitem">
<code class="literal">Set Breakpoint</code>: This button sets a breakpoint in the selected action. Alternatively, you can click on the left strip in the desired position.
</li><li class="listitem">
<code class="literal">Unset Breakpoint</code>: This button unsets a breakpoint in the selected action. Alternatively, you can click on the left strip in the desired position.
</li></ul></div><div class="figure"><a id="idm140427927220976"></a><p class="title"><strong>Figure 77. Debugger Tools - Action List Execution Editor</strong></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/debugger-tools-exec-editor.png" align="middle" alt="Debugger Tools - Action List Execution Editor" /></div></div></div><br class="figure-break" /><p>If an error occurs in the action list being executed, the debugger will capture it before it is thrown and will display a dialog with the details and ask for the action to perform:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
Abort: Throws the error (the regular behavior)
</li><li class="listitem">
Execute Actions and Abort: Allows executing some custom actions and then throws the error.
</li><li class="listitem">
Ignore: The error is just ignored.
</li><li class="listitem">
Execute Actions and Ignore: Allows executing some custom actions and the error is ignored. This is helpful for recovering from errors and continue with the installation.
</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a id="_debugger_log"></a>Debugger log</h5></div></div></div><p>The debugger log allows configuring which elements to log as well as the verbosity and color of the messages. These settings can be configured in the <code class="literal">Log</code> section of the <code class="literal">Configure-&gt;Preferences</code> menu. The configurable elements to log are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
Actions: Actions executed, its properties before the execution.
</li><li class="listitem">
Rules: Evaluated rules with their results and properties.
</li><li class="listitem">
Tracked Variables: A message is logged when a variable being tracked (using the <code class="literal">Variables Editor</code>) is modified.
</li><li class="listitem">
Installation logs: The messages written in the installation log.
</li></ul></div><p>Apart from these elements, the debugger also logs the stdout, stderr (in red color) and exit code of all executed programs.</p><p>The log also allows saving its contents, copying the selected text and searching for specific entries.</p><p>The widget can be also hidden from the "View" menu by unchecking "Debugger log".</p><div class="figure"><a id="idm140427927204384"></a><p class="title"><strong>Figure 78. Debugger Tools - Log</strong></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/debugger-tools-log.png" align="middle" alt="Debugger Tools - Log" /></div></div></div><br class="figure-break" /></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a id="_variable_editor"></a>Variable Editor</h5></div></div></div><p>The <code class="literal">Variable Editor</code> is displayed as a tree with three main branches:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
Project Elements: Displays all of the referenciable project elements (using the <a class="link" href="">advanced syntax</a>) in a hierarchical way. All of the elements can be modified but new elements cannot be added. The text in the tree displays the key name of the element (usually the <code class="literal">&lt;name&gt;</code> property) and its type (<code class="literal">component</code>, <code class="literal">folder</code> or <code class="literal">parameter</code>).
</li><li class="listitem">
Built-in variables: Displays all the built-in variables. Its values can be manually added but it does not allow adding new elements. The text in the tree displays the name of the variable and a preview of its contents (or the full value if it is not very long).
</li><li class="listitem">
User defined variables: Displays the variables created by the user through <a class="link" href="apa.html#setInstallerVariable"><code class="literal">&lt;setInstallerVariable&gt;</code></a> actions (or similar). It allows modifying the values of existing elements as well as adding new ones, which will result in the creation of new installer variables. The text in the tree displays the name of the variable and a preview of its contents (or the full value if it is not very long.)
</li></ul></div><p>In addition to manipulating the installation variables and project elements, the widget also allows marking elements to be tracked by the debugger. When a tracked variable (or project element) is modified, a message will be written in the debugger log, detailing the new contents of the variable. To mark a variable, right-click on the desired element and select <code class="literal">Track Variable</code> (or <code class="literal">Untrack Variable</code> if it is already being tracked). If the item to track is a project element, the contextual menu will display an entry <code class="literal">Track Object Menu</code>, that will allow selecting the settings to track.</p><p>The widget can be also hidden from the "View" menu by unchecking "Variable Editor".</p><div class="figure"><a id="idm140427927187904"></a><p class="title"><strong>Figure 79. Debugger Tools - Variable Editor</strong></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/debugger-tools-var-editor.png" align="middle" alt="Debugger Tools - Variable Editor" /></div></div></div><br class="figure-break" /></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a id="_xml_evaluator"></a>XML evaluator</h5></div></div></div><p>The <code class="literal">XML evaluator</code> allows executing any XML code with the same installer environment (same variables and parameters) of the installation:</p><div class="figure"><a id="idm140427927182864"></a><p class="title"><strong>Figure 80. Debugger Tools - XML evaluator</strong></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/debugger-tools-xml-evaluator.png" align="middle" alt="Debugger Tools - XML evaluator" /></div></div></div><br class="figure-break" /></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_logs"></a>21.2. Logs</h3></div></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_installation_log"></a>Installation Log</h4></div></div></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a id="_where_the_log_is_located"></a>Where the Log is Located</h5></div></div></div><p>All InstallBuilder installers create an installation log in the system’s temporary directory.</p><p>The exact location of the log file is stored in the <code class="literal">${installer_installation_log}</code> variable. On Linux, Mac OS X and other Unix systems, this typically means the <code class="literal">/tmp</code> directory. On Windows, the log
will be created in the user’s local Temp directory, usually <code class="literal">C:\Documents and Settings\username\Local Settings\Temp</code>.</p><p>The default name of the generated log file is <code class="literal">bitrock_installer.log</code>, but if the file already exists from a previous installation, the installer will try to create an unique filename trying <code class="literal">bitrock_installer_[pid].log</code> and <code class="literal">bitrock_installer_[pid]_[uid].log</code> where <code class="literal">[pid]</code> is the PID of the process and <code class="literal">[uid]</code> is an unique identifier.</p><div class="note" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/icons/note.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>The system Temp directory is stored in the built-in variable <code class="literal">${system_temp_directory}</code>. In Unix, if the <code class="literal">/tmp</code> directory is not writable, it will attempt to use <code class="literal">/var/tmp</code>, <code class="literal">/usr/tmp</code> and <code class="literal">~/tmp</code> instead.</p></td></tr></table></div><p>You can use the <a class="link" href="apd.html#installationLogFile"><code class="literal">&lt;installationLogFile&gt;</code></a> and <a class="link" href="apd.html#uninstallationLogFile"><code class="literal">&lt;uninstallationLogFile&gt;</code></a> project properties to specify an alternate location for the log file once the installation has completed. Of course,
the initial log file is still created in the temporary directory, because the new location specified with that tag probably does not exist when the installer first runs.</p><p><a id="snip3932109"></a></p><pre class="programlisting">&lt;project&gt;
   ...
   &lt;!-- Configures the final destination of the installation log --&gt;
   &lt;installationLogFile&gt;${installdir}/${project.shortName}-installLog.log&lt;/installationLogFile&gt;
   &lt;!-- Configures the final destination of the uninstallation log --&gt;
   &lt;uninstallationLogFile&gt;${system_temp_directory}/${project.shortName}-uninstallation.log&lt;/uninstallationLogFile&gt;
   ...
&lt;/project&gt;</pre><p>It is possible to also mark a log file for deletion after the installation has completed.</p><p><a id="snip6965466"></a></p><pre class="programlisting">&lt;project&gt;
   ...
   &lt;removeLogFile&gt;1&lt;/removeLogFile&gt;
   ...
&lt;/project&gt;</pre></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a id="_verbosity_level"></a>Verbosity Level</h5></div></div></div><p>Most common errors during installation are related to the execution of third party programs or system commands. The installation log will include the stdout and stderr output of the program, as well
as the exit code:</p><pre class="screen">Executing /home/bitrock/lampstack-1.2-2/php/bin/php -q /home/bitrock/lampstack-1.2-2/php/bin/fixreg.php  /home/bitrock/lampstack-1.2-2/php
Script exit code: 0

Script output:
Patching /home/bitrock/lampstack-1.2-2/php/lib/php/.registry/archive_tar.reg
Patching /home/bitrock/lampstack-1.2-2/php/lib/php/.registry/console_getopt.reg
Patching /home/bitrock/lampstack-1.2-2/php/lib/php/.registry/pear.reg
Patching /home/bitrock/lampstack-1.2-2/php/lib/php/.registry/structures_graph.reg
Patching /home/bitrock/lampstack-1.2-2/php/lib/php/.registry/xml_util.reg

Script stderr:</pre><p>By default, standard streams are always logged independently of whether or not the execution succeeds but the debug level can be decreased to only log them after an error:</p><p><a id="snip8593646"></a></p><pre class="programlisting">&lt;project&gt;
  ...
  &lt;!-- Levels from 2 to 4 displays the streams --&gt;
  &lt;debugLevel&gt;0&lt;/debugLevel&gt;
  ...
&lt;/project&gt;</pre><p>This will log the standard streams only in the event that an error occurs. Reducing the debug level also prevents the arguments for the programs being executed from being logged. This can be useful if as part of the installation you are passing sensitive information as command line options and you do not want it stored
in the log file. A better approach is to add a <a class="link" href="ar01s04.html" title="4. Variables"><code class="literal">.password</code></a> suffix to the variable reference.</p></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a id="_logging_custom_information"></a>Logging custom information</h5></div></div></div><p>You can add custom information to the log at runtime using the <a class="link" href="apa.html#logMessage"><code class="literal">&lt;logMessage&gt;</code></a> action. It is possible to specify an optional, custom timestamp:</p><p><a id="snip3409236"></a></p><pre class="programlisting">  &lt;logMessage&gt;
     &lt;text&gt;Uninstalling old installation...&lt;/text&gt;
     &lt;timeStampFormat&gt;[%H:%M:%S]&lt;/timeStampFormat&gt;
     &lt;enableTimeStamp&gt;1&lt;/enableTimeStamp&gt;
  &lt;/logMessage&gt;</pre><p>You could also use the <a class="link" href="apa.html#writeFile"><code class="literal">&lt;writeFile&gt;</code></a> and <a class="link" href="apa.html#readFile"><code class="literal">&lt;readFile&gt;</code></a> actions to include important information from log files from other programs.</p><p><a id="snip9043705"></a></p><pre class="programlisting">&lt;preInstallationActionList&gt;
  &lt;readFile name="apacheErrorLog" path="${installdir}/apache2/log/error_log"/&gt;
  &lt;logMessage&gt;
     &lt;text&gt;Apache Error Log:&lt;/text&gt;
     &lt;timeStampFormat&gt;[%H:%M:%S]&lt;/timeStampFormat&gt;
     &lt;enableTimeStamp&gt;1&lt;/enableTimeStamp&gt;
  &lt;/logMessage&gt;
  &lt;writeFile text="${apacheErrorLog}" path="${project.installationLogFile}"/&gt;
&lt;/preInstallationActionList&gt;</pre></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_debugtrace_log"></a>Debugtrace Log</h4></div></div></div><p>If you run into issues that are hard to track down, you may be asked to provide a debug trace. This is an internal dump of the inner workings of the installer, serialized as an XML file. It
can help BitRock determine the root cause of the problem.</p><p>Both the Builder and the generated installers are capable of generating the debug file. You just need to use the <code class="literal">--debugtrace</code> flag:</p><pre class="programlisting">$&gt; sample-1.0-linux-installer.run --debugtrace debug.txt
Debug file written.</pre><p>You can then send the debug.txt file to <code class="literal">support@bitrock.com</code>. Please provide as much context information as possible.</p><div class="note" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/icons/note.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Take into account that the log is only serialized when the installer exits normally, either completing the installation or crashing with an error, but not if the process is killed by external methods.</p></td></tr></table></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_other_debugging_methods"></a>21.3. Other Debugging Methods</h3></div></div></div><p>As when debugging any program, the most basic (but useful nonetheless) method of debugging is to provide information of what is going on at different points in the process. This
helps you determine if what is happening is indeed what you were expecting to happen at that particular point in time. You can use a &lt;showInfo&gt; action to display messages during the installation process.</p><p>This technique can help, for example, when debugging why an action seems not to be executed:</p><p><a id="snip7561159"></a></p><pre class="programlisting">   &lt;showInfo text="About to run the program" /&gt;
   &lt;actionGroup&gt;
     &lt;actionList&gt;
        &lt;showInfo&gt;
          &lt;text&gt;Sharing the same rules will check that they are correctly evaluated"&lt;/text&gt;
        &lt;/showInfo&gt;
        &lt;runProgram&gt;
          &lt;program&gt;chown&lt;/program&gt;
          &lt;programArguments&gt;-R bitrock ${installdir}&lt;/programArguments&gt;
        &lt;/runProgram&gt;
     &lt;/actionList&gt;
     &lt;ruleList&gt;
        &lt;platformTest type="linu"/&gt;
     &lt;/ruleList&gt;
  &lt;/actionGroup&gt;
  &lt;showInfo text="After executing the program"/&gt;</pre><p>If you run an installer that includes the above code, you will see the first and the third pop-ups, so something is wrong with the rule. A closer look will make you realize that the type field in the
platformTest rule has a typo. It reads <code class="literal">linu</code>, when it should be <code class="literal">linux</code>. This particular case will be automatically reported to you by the builder when loading the project but other issues are
tackled the same way.</p><p>A similar approach can be used to check that variables have the expected value:</p><p><a id="snip410075"></a></p><pre class="programlisting">   &lt;setInstallerVariable name="docLocation" value="${intalldir}/doc"/&gt;
   ...
   &lt;renameFile origin="${intalldir}/app/oldDocDirectory" destination="${docLocation}"/&gt;</pre><p>The above code will not work because of a typo (<code class="literal">${intalldir}</code> instead of <code class="literal">{installdir}</code>). Adding a <a class="link" href="apa.html#showInfo"><code class="literal">&lt;showInfo&gt;</code></a> help will help track the issue:</p><p><a id="snip2135560"></a></p><pre class="programlisting">   &lt;setInstallerVariable name="docLocation" value="${intalldir}/doc"/&gt;
   ...
   &lt;showInfo text="Documents are stored in ${docLocation}"/&gt;
   &lt;renameFile origin="${intalldir}/app/oldDocDirectory" destination="${docLocation}"/&gt;</pre><p>It will display: <code class="literal">Documents are stored in ***unknown variable intalldir***/doc</code></p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ar01s20.html"><img src="images/icons/prev.png" alt="Prev" /></a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="ar01s22.html"><img src="images/icons/next.png" alt="Next" /></a></td></tr><tr><td width="40%" align="left" valign="top">20. Rollback </td><td width="20%" align="center"><a accesskey="h" href="index.html"><img src="images/icons/home.png" alt="Home" /></a></td><td width="40%" align="right" valign="top"> 22. Updates</td></tr></table></div></body></html>