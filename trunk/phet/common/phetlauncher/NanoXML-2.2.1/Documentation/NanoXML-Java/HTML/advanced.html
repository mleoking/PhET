<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">


<html lang="en" dir="LTR">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
    <meta name="author" content="Marc De Scheemaecker">
    <meta name="copyright" content="&copy; 2001 Marc De Scheemaecker">
    <meta name="keywords" lang="en" content="">
    <title>NanoXML/Java 2.1 - Chapter 4</title>
    <link rel="STYLESHEET" type="text/css" href="stylesheet.css">
</head>

<body>
<table border="0" width="100%" cellspacing="0" cellpadding="4">
<tr>
    <td class="title" colspan="2">
        <h1>NanoXML/Java 2.1</h1>
    </td>
</tr>
<tr valign="top">
<td class="menu">
    <div class="menuCurrent">
        <a href="index.html" class="menu">Contents</a><br>
        <a href="introduction.html" class="menu">Chapter&nbsp;1</a>&nbsp;&nbsp;<br>
        <a href="retrieving.html" class="menu">Chapter&nbsp;2</a>&nbsp;&nbsp;<br>
        <a href="streaming.html" class="menu">Chapter&nbsp;3</a>&nbsp;&nbsp;<br>
        <a href="advanced.html" class="menuCurrent">Chapter&nbsp;4</a>&nbsp;&nbsp;<br>
        &nbsp;<br><br><br><br>&nbsp;
    </div>
</td>
<td class="description" colspan="1">
<h2>Chapter 4. Advanced Topics</h2>

<div class="description">
<p>
    This chapter explains how you can customize the NanoXML parser setup. Unlike
    NanoXML 1, NanoXML/Java 2 is designed as a framework: it is composed of many
    different components which you can plug together. It's possible to change the
    reader, the builder, the validator and even the parser.
</p>

<p>
    <a class="tocSection" href="advanced.html#reader">4.1. The NanoXML Reader</a><br>
    <a class="tocSection" href="advanced.html#parser">4.2. The NanoXML Parser</a><br>
    <a class="tocSection" href="advanced.html#validator">4.3. The NanoXML Validator</a><br>
    <a class="tocSection" href="advanced.html#entity">4.4. The NanoXML Entity Resolvers</a><br>
    <a class="tocSubsection" href="advanced.html#entities_std">4.4.1. Standard Entities</a><br>
    <a class="tocSubsection" href="advanced.html#entities_param">4.4.2. Parameter Entities</a><br>
    <a class="tocSection" href="advanced.html#builder">4.5. The NanoXML Builder</a><br>
</p>

<p>
    NanoXML/Java comes with one set of components. Except for NanoXML/Lite,
    every branch offers its own set of components customized for a certain purpose.
    NanoXML/SAX offers components for using NanoXML as a parser for the SAX
    framework.
</p>

<p>
    The following figure gives a short representation of the major components.
</p>

<p>
    <img src="structure.gif" alt="Structure of NanoXML/Java" width="404" height="419">
</p>

<p>
    The <em>reader</em> retrieves data from a Java input stream and provides character data to
    the other components.
</p>

<p>
    The <em>parser</em> converts the character data it retrieves from the reader to XML events
    which it sends to the builder.
</p>

<p>
    The <em>validator</em> parses a DTD and validates the XML data. The current validator
    does only the minimum necessary for a non-validating parser.
</p>

<p>
    The <em>entity resolvers</em> converts entity references (&amp;...;) and parameter entity references
    (%...;) to character data. The resolver uses the reader to access external entities.
</p>

<p>
    The <em>builder</em> interpretes XML events coming from the parser and builds a tree of
    XML elements. The standard builder creates a tree of IXMLElement. You can
    provide your own builder to create a custom tree or if you are interested in the
    XML events themselves, e.g. to use XML streaming.
</p>

<h3><a name="reader"></a>4.1. The NanoXML Reader</h3>

<p>
    The reader retrieves data from some source and feeds it to the other components.
</p>

<p>
    The reader is basically a stack of push-back readers. Every time a new data stream
    becomes active, the current reader is pushed on a stack. When the current reader
    has no more data left, the parent reader is popped from the stack.
</p>

<p>
    If you want to implement public IDs using e.g. a catalog file similar to SGML, you
    could implement a reader by overriding the method openStream of
    StdXMLReader:
</p>

<p class="example">
    public class MyReader<br>
    &nbsp;&nbsp;&nbsp;&nbsp;extends StdXMLReader<br>
    {<br>
    &nbsp;&nbsp;&nbsp;&nbsp;private Properties publicIDs;<br>
    <br>
    &nbsp;&nbsp;&nbsp;&nbsp;public MyReader(Properties publicIDs)<br>
    &nbsp;&nbsp;&nbsp;&nbsp;{<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.publicIDs = publicIDs;<br>
    &nbsp;&nbsp;&nbsp;&nbsp;}<br>
    <br>
    &nbsp;&nbsp;&nbsp;&nbsp;public Reader openStream(String publicID,<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String systemID)<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throws MalformedURLException,<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    FileNotFoundException,<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    IOException<br>
    &nbsp;&nbsp;&nbsp;&nbsp;{<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (publicID != null) {<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    systemID = publicIDs.getProperty(publicID,<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;systemID);<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return super.openStream(publicID, systemID);<br>
    &nbsp;&nbsp;&nbsp;&nbsp;}<br>
    }
</p>

<p>
    In this example, you have to provide a properties object which maps public IDs to
    system IDs.
</p>

<h3><a name="parser"></a>4.2. The NanoXML Parser</h3>

<p>
    The parser analyzes the character stream it retrieves from the reader and sends
    XML events to the builder. It uses a validator to validate the data and an entity
    resolver to resolve general entities. You rarely need to create a custom parser. If you
    need to, you have to implement IXMLParser.
</p>

<h3><a name="validator"></a>4.3. The NanoXML Validator</h3>

<p>
    The validator parses the DTD and checks the XML data. NanoXML 2.0 uses a
    NonValidator implementation that only performs the minimum necessary for a
    non-validating parser.
</p>

<p>
    As a DTD is very vague, you can implement your own validator to perform a more
    fine-grained check of the XML data. The easiest way to create your own validator
    is to create a subclass of ValidatorPlugin.
</p>

<p>
    The following example shows how to implement a validator. It checks that every
    attribute named "id" starts with three capital letters.
</p>

<p class="example">
    public class MyValidator<br>
    &nbsp;&nbsp;&nbsp;&nbsp;extends ValidatorPlugin<br>
    {<br>
    &nbsp;&nbsp;&nbsp;&nbsp;public void attributeAdded(String key,<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String value,<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String systemID,<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int lineNr)<br>
    &nbsp;&nbsp;&nbsp;&nbsp;{<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;boolean valid = true;<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (key.equals("id")) {<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (value.length() &lt; 3) {<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    valid = false;<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    for (int i = 0; i &lt; 3; i++) {<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    &nbsp;&nbsp;char ch = value.charAt(i);<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    &nbsp;&nbsp;if ((ch &lt; 'A') || (ch &gt; 'Z')) {<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;valid = false;<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    &nbsp;&nbsp;}<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (valid) {<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    super.attributeAdded(key, value,<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    systemID, lineNr);<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    this.attributeWithInvalidValue(systemID,<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lineNr, null, key, value);<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
    &nbsp;&nbsp;&nbsp;&nbsp;}<br>
    }
</p>

<p>
    To register the validator to a parser, use the following code:
</p>

<p class="example">
    IXMLParser parser ...<br>
    ...<br>
    IXMLValidator val1 = parser.getValidator();<br>
    MyValidator val2 = new MyValidator();<br>
    val2.setDelegate(val1);<br>
    parser.setValidator(val2);
</p>

<h3><a name="entity"></a>4.4. The NanoXML Entity Resolvers</h3>

<p>
    The entity resolver converts entity references to XML data. If you want e.g. to
    retrieve entity values from a database, you have to create your own resolver.
</p>

<p>
    Entity resolvers have to implement IXMLEntityResolver. Usually, you only
    have to make a subclass of XMLEntityResolver and implement the method
    getEntity or openExternalEntity.
</p>

<p>
    Entities can be used in the XML data and in the DTD. As these entities are independent
    of each other, there are two entity resolvers.
</p>
<h4><a name="entity_std"></a>4.4.1. Standard Entities</h4>

<p>
    The resolver for standard entities has to be registered to the parser by calling
    setResolver. The following example registers a resolver that forces the entity
    "&amp;foo;" to be resolved to "bar":
</p>

<p class="example">
    import net.n3.nanoxml.*;<br>
    import java.io.*;<br>
    <br>
    class MyResolver<br>
    &nbsp;&nbsp;&nbsp;&nbsp;extends XMLEntityResolver<br>
    {<br>
    &nbsp;&nbsp;&nbsp;&nbsp;public Reader getEntity(IXMLReader xmlReader,<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String name)<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throws XMLParseException<br>
    &nbsp;&nbsp;&nbsp;&nbsp;{<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (name.equals("foo")) {<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    return new StringReader("bar");<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    return super.getEntity(xmlReader, name);<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
    &nbsp;&nbsp;&nbsp;&nbsp;}<br>
    }<br>
    <br>
    public class Demo<br>
    {<br>
    &nbsp;&nbsp;&nbsp;&nbsp;public static void main(String[] args)<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throws Exception<br>
    &nbsp;&nbsp;&nbsp;&nbsp;{<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IXMLParser parser<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= XMLParserFactory<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    .createDefaultXMLParser();<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parser.setResolver(new MyResolver());<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IXMLReader reader<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    = StdXMLReader.fileReader("test.xml");<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parser.setReader(reader);<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IXMLElement xml = (IXMLElement) parser.parse();<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;XMLWriter writer = new XMLWriter(System.out);<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;writer.write(xml);<br>
    &nbsp;&nbsp;&nbsp;&nbsp;}<br>
    }
</p>
<h4><a name="entity_param"></a>4.4.2. Parameter Entities</h4>

<p>
    The resolver for parameter entities has to be registered to the validator by calling
    setParameterEntityResolver. The following example show a custom version of the
    Demo class that registers MyResolver as a parameter entity resolver.
</p>

<p class="example">
    public class Demo<br>
    {<br>
    &nbsp;&nbsp;&nbsp;&nbsp;public static void main(String[] args)<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throws Exception<br>
    &nbsp;&nbsp;&nbsp;&nbsp;{<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IXMLParser parser<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= XMLParserFactory<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    .createDefaultXMLParser();<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IXMLValidator validator<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= parser.getValidator();<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;validator.setParameterEntityResolver(<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    new MyResolver());<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IXMLReader reader<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    = StdXMLReader.fileReader("test.xml");<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parser.setReader(reader);<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IXMLElement xml = (IXMLElement) parser.parse();<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;XMLWriter writer = new XMLWriter(System.out);<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;writer.write(xml);<br>
    &nbsp;&nbsp;&nbsp;&nbsp;}<br>
    }
</p>

<h3><a name="builder"></a>4.5. The NanoXML Builder</h3>

<p>
    The builder interpretes XML events coming from the parser and builds a tree of
    Java objects. When the parsing is done, the builder hands over its result to the
    parser.
</p>

<p>
    As explained in <a href="streaming.html">chapter 3</a>, the builder can also be used to read XML data
    while it's being streamed. This feature is useful if you don't want to wait until all the data has
    been read before processing the information.
</p>

<p>
    As an example, we have the following XML structure (document.dtd):
</p>

<p class="example">
    &lt;!ELEMENT Chapter (Paragraph*)&gt;<br>
    &lt;!ATTLIST Chapter<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;title CDATA #REQUIRED<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;id CDATA #REQUIRED&gt;<br>
    &lt;!ELEMENT Paragraph (#PCDATA)&gt;<br>
    &lt;!ATTLIST Paragraph<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;align (left|center|right) "left"&gt;
</p>

<p>
    The elements are put in the Java classes Chapter and Paragraph which, for
    convenience, extend the following base class:
</p>

<p class="example">
    public class DocumentElement<br>
    {<br>
    &nbsp;&nbsp;&nbsp;&nbsp;protected Properties attrs;<br>
    &nbsp;&nbsp;&nbsp;&nbsp;protected Vector children;<br>
    <br>
    &nbsp;&nbsp;&nbsp;&nbsp;public DocumentElement()<br>
    &nbsp;&nbsp;&nbsp;&nbsp;{<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.attrs = new Properties();<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.children = new Vector();<br>
    &nbsp;&nbsp;&nbsp;&nbsp;}<br>
    <br>
    &nbsp;&nbsp;&nbsp;&nbsp;public void setAttribute(String attrName,<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String value)<br>
    &nbsp;&nbsp;&nbsp;&nbsp;{<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.attrs.put(attrName, value);<br>
    &nbsp;&nbsp;&nbsp;&nbsp;}<br>
    <br>
    &nbsp;&nbsp;&nbsp;&nbsp;public void addChild(DocumentElement elt)<br>
    &nbsp;&nbsp;&nbsp;&nbsp;{<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.children.addElement(elt);<br>
    &nbsp;&nbsp;&nbsp;&nbsp;}<br>
    }
</p>

<p>
    This base class simply makes it easy for our builder to set attributes and to add children
    to an element.
</p>

<p>
    The Chapter and Paragraph classes extend this base class to give more practical
    access to their attributes and children:
</p>

<p class="example">
    public class Chapter<br>
    &nbsp;&nbsp;&nbsp;&nbsp;extends DocumentElement<br>
    {<br>
    &nbsp;&nbsp;&nbsp;&nbsp;public String getTitle()<br>
    &nbsp;&nbsp;&nbsp;&nbsp;{<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return this.attrs.getProperty("title");<br>
    &nbsp;&nbsp;&nbsp;&nbsp;}<br>
    <br>
    &nbsp;&nbsp;&nbsp;&nbsp;public String getID()<br>
    &nbsp;&nbsp;&nbsp;&nbsp;{<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return this.attrs.getProperty("id");<br>
    &nbsp;&nbsp;&nbsp;&nbsp;}<br>
    <br>
    &nbsp;&nbsp;&nbsp;&nbsp;public Enumeration getParagraphs()<br>
    &nbsp;&nbsp;&nbsp;&nbsp;{<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return this.children.elements();<br>
    &nbsp;&nbsp;&nbsp;&nbsp;}<br>
    }<br>
    <br>
    public class Paragraph<br>
    &nbsp;&nbsp;&nbsp;&nbsp;extends DocumentElement<br>
    {<br>
    &nbsp;&nbsp;&nbsp;&nbsp;public static final int LEFT = 0;<br>
    &nbsp;&nbsp;&nbsp;&nbsp;public static final int CENTER = 1;<br>
    &nbsp;&nbsp;&nbsp;&nbsp;public static final int RIGHT = 2;<br>
    <br>
    &nbsp;&nbsp;&nbsp;&nbsp;private static Hashtable alignments;<br>
    <br>
    &nbsp;&nbsp;&nbsp;&nbsp;static {<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;alignments = new Hashtable();<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;alignments.put("left", new Integer(LEFT));<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;alignments.put("center", new Integer(CENTER));<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;alignments.put("right", new Integer(RIGHT));<br>
    &nbsp;&nbsp;&nbsp;&nbsp;}<br>
    <br>
    &nbsp;&nbsp;&nbsp;&nbsp;public String getContent()<br>
    &nbsp;&nbsp;&nbsp;&nbsp;{<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return this.attrs.getProperty("#PCDATA");<br>
    &nbsp;&nbsp;&nbsp;&nbsp;}<br>
    <br>
    &nbsp;&nbsp;&nbsp;&nbsp;public int getAlignment()<br>
    &nbsp;&nbsp;&nbsp;&nbsp;{<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String str = this.attrs.getProperty("align");<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Integer align = alignments.get(str);<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return align.intValue();<br>
    &nbsp;&nbsp;&nbsp;&nbsp;}<br>
    }
</p>

<p>
    The builder creates the data structure based on the XML events it receives from the
    parser. Because both Chapter and Paragraph extend DocumentElement,
    the builder is fairly simple.
</p>

<p class="example">
import net.n3.nanoxml.*;<br>
import java.util.*;<br>
import java.io.*;<br>
<br>
public class DocumentBuilder<br>
&nbsp;&nbsp;&nbsp;&nbsp;implements IXMLBuilder<br>
{<br>
&nbsp;&nbsp;&nbsp;&nbsp;private static Hashtable classes;<br>
&nbsp;&nbsp;&nbsp;&nbsp;private Stack elements;<br>
&nbsp;&nbsp;&nbsp;&nbsp;private DocumentElement topElement;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;static {<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;classes = new Hashtable();<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;classes.put("Chapter", Chapter.class);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;classes.put("Paragraph", Paragraph.class);<br>
&nbsp;&nbsp;&nbsp;&nbsp;}<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;public void startBuilding(String systemID,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int lineNr)<br>
&nbsp;&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.elements = new Stack();<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.topElement = null;<br>
&nbsp;&nbsp;&nbsp;&nbsp;}<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;public void newProcessingInstruction(String target,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Reader reader)<br>
&nbsp;&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// nothing to do<br>
&nbsp;&nbsp;&nbsp;&nbsp;}<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;public void startElement(String name,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String nsPrefix,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String nsSystemID,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String systemID,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int lineNr)<br>
&nbsp;&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DocumentElement elt = null;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try {<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
Class cls = (Class) classes.get(name);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
elt = (DocumentElement) cls.newInstance();<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} catch (Exception e) {<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// ignore the exception<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.elements.push(elt);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (this.topElement == null) {<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.topElement = elt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
&nbsp;&nbsp;&nbsp;&nbsp;}<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;public void endElement(String name,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String nsPrefix,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String nsSystemID)<br>
&nbsp;&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DocumentElement child<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
= (DocumentElement) this.elements.pop();<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (! this.elements.isEmpty()) {<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DocumentElement parent<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
= (DocumentElement)this.elements.peek();<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parent.addChild(child);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
&nbsp;&nbsp;&nbsp;&nbsp;}<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;public void addAttribute(String key,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String nsPrefix,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String nsSystemID,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String value,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String type)<br>
&nbsp;&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DocumentElement child<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
= (DocumentElement) this.elements.peek();<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;child.setAttribute(key, value);<br>
&nbsp;&nbsp;&nbsp;&nbsp;}<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;public void elementAttributesProcessed(<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String name,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String nsPrefix,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String nsSystemID)<br>
&nbsp;&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// nothing to do<br>
&nbsp;&nbsp;&nbsp;&nbsp;}<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;public void addPCData(Reader reader,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String systemID,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int lineNr)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throws IOException<br>
&nbsp;&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;StringBuffer str = new StringBuffer(1024);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;char[] buf = new char[bufSize];<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for (;;) {<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int size = reader.read(buf);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (size &lt; 0) {<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
break;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;str.append(buf, 0, size);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.addAttribute("#PCDATA", null, null,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;str.toString(), "CDATA");<br>
&nbsp;&nbsp;&nbsp;&nbsp;}<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;public Object getResult()<br>
&nbsp;&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return topElement;<br>
&nbsp;&nbsp;&nbsp;&nbsp;}<br>
}
</p>

<p>
    Note that, for simplicity, error and exception handling is not present in this example.
    The builder holds a stack of the current elements it builds. Character data is
    read from a reader. The method addPCData reads this data in blocks of 1K.
</p>

<p>
    Finally, this application sets up the NanoXML parser and converts an XML document
    to HTML which it dumps on the standard output:
</p>

<p class="example">
    import java.util.*;<br>
    import net.n3.nanoxml.*;<br>
    <br>
    public class XML2HTML<br>
    {<br>
    &nbsp;&nbsp;&nbsp;&nbsp;public static void main(String[] params)<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throws Exception<br>
    &nbsp;&nbsp;&nbsp;&nbsp;{<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IXMLBuilder builder<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= new DocumentBuilder();<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IXMLParser parser<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= XMLParserFactory<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    .createDefaultXMLParser();<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parser.setBuilder(builder);<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IXMLReader reader<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    = StdXMLReader.fileReader(param[0]);<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parser.setReader(reader);<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Chapter chapter = (Chapter) parser.parse();<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println("&lt;!DOCTYPE ... &gt;");<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    System.out.print("&lt;HTML&gt;&lt;HEAD&gt;&lt;TITLE&gt;");<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.print(chapter.getTitle());<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    System.out.println("&lt;/TITLE&gt;&lt;/HEAD&gt;&lt;BODY&gt;");<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.print("&lt;H1&gt;");<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.print(chapter.getTitle());<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println("&lt;/H1&gt;");<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Enumeration enum = chapter.getParagraphs();<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while (enum.hasMoreElements()) {<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Paragraph para<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    = (Paragraph) enum.nextElement();<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    System.out.print("&lt;P&gt;");<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    System.out.print(para.getContent());<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    System.out.println("&lt;/P&gt;");<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    System.out.println("&lt;/BODY&gt;&lt;/HTML&gt;");<br>
    &nbsp;&nbsp;&nbsp;&nbsp;}<br>
    }
</p>

<p>
    If we run the example on the following XML file:
</p>

<p class="example">
    &lt;!DOCTYPE Chapter SYSTEM "document.dtd"&gt;<br>
    <br>
    &lt;Chapter id="ch01" title="The Title"&gt;<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&lt;Paragraph&gt;First paragraph...&lt;/Paragraph&gt;<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&lt;Paragraph&gt;Second paragraph...&lt;/Paragraph&gt;<br>
    &lt;/Chapter&gt;<br>
</p>

<p>
    The output will be:
</p>

<p class="example">
    &lt;!DOCTYPE HTML PUBLIC '-//W3C//DTD HTML 4.01//EN'<br>
    &nbsp;&nbsp;'http://www.w3.org/TR/html4/strict.dtd'&gt;<br>
    &lt;HTML&gt;&lt;HEAD&gt;&lt;TITLE&gt;The Title&lt;/TITLE&gt;&lt;/HEAD&gt;&lt;BODY&gt;<br>
    &lt;H1&gt;The Title&lt;/H1&gt;<br>
    &lt;P&gt;First paragraph...&lt;/P&gt;<br>
    &lt;P&gt;Second paragraph...&lt;/P&gt;<br>
    &lt;/BODY&gt;
</p>
</div>
</td>
</tr>
<tr>
    <td class="bottom" colspan="2">
        <table cellspacing="0" width="100%">
            <tr>
                <td>
                    <div class="bottom">
                        Copyright &copy;2000-2002 <a href="mailto:cyberelf@mac.com" class="bottom">Marc De
                        Scheemaecker</a>,
                        All Rights Reserved.
                        <br>
                        Last update: January 8th, 2002.
                    </div>
                </td>
                <td class="bottomPictures">
                    <a href="http://validator.w3.org/check?uri=http%3A%2F%2Fnanoxml.sourceforge.net%2FNanoXML-Java%2Fadvanced.html"
                       class="bottom"
                            ><img src="http://validator.w3.org/images/vh401" alt="Valid HTML 4.01!" height=31 width=88></a>
                    <a href="http://jigsaw.w3.org/css-validator/validator?uri=http://nanoxml.sourceforge.net/NanoXML-Java/advanced.html"
                       class="bottom"
                            ><img src="http://jigsaw.w3.org/css-validator/images/vcss.gif" alt="Valid CSS!"></a>
                    <a href="http://sourceforge.net" class="bottom"
                            ><img src="http://sourceforge.net/sflogo.php?group_id=4144" width="88" height="31"
                                  alt="SourceForge"
                            ></a>
                </td>
            </tr>
        </table>
    </td>
</tr>
</table>
</body>
</html>
