<project name="General Ant Build Script" default="Generate Jar" basedir=".">

    <!--  Set ant output directories.  -->
    <property name="ant.output" value="../ant_output"/>
    <property name="classes" location="${ant.output}/classes"/>
    <property name="jars" location="${ant.output}/jars"/>
    <property name="javadoc" location="${ant.output}/javadoc"/>

    <!--    Set current sister directories, for backup and release data. -->
    <property name="development" location=".."/>

    <!--  Set up child directories, for during the build.  -->
    <property name="src" location="../src"/>
    <property name="src-pc" location="../common/src"/>
    <property name="data" location="../data"/>
    <property name="data-pc" location="../common/data"/>

    <property file="./build.properties"/>

    <property name="build.number.txt" value="${data}/${distname}.build.number"/>
    <property name="timestamp.name" value="${data}/${distname}.build.time.stamp"/>

    <description>
        Build File.
    </description>

    <target name="test">
        <echo message="asdfasdf"/>                
    </target>

    <target name="init">
        <echo message="init"/>
        <tstamp/>
    </target>

    <target name="Clean"
        description="clean up">
        <echo message="Clean"/>
        <delete dir="${classes}"/>
        <delete dir="${jars}"/>
        <delete dir="${javadoc}"/>
    </target>

    <target name="Compile" depends="init"
        description="compile the source ">
        <echo message="Compile"/>
        <delete dir="${classes}"/>
        <mkdir dir="${classes}"/>
        <javac srcdir="${src};${src-pc}" destdir="${classes}"/>
    </target>

    <target name="Generate Build Info">
        <!--<buildnumber file="${build.number.txt}"/>-->
        <tstamp>
            <format property="jar.creation.time" pattern="d-MMMM-yyyy h:mm aa" locale="en" timezone="MST"></format>
        </tstamp>
        <echo file="${timestamp.name}" message="${jar.creation.time}"></echo>
    </target>

    <target name="Generate Jar" depends="Compile"
        description="generate the distribution">
        <!-- Create the distribution directory -->
        <delete dir="${jars}"/>
        <mkdir dir="${jars}"/>
        <antcall target="Generate Build Info"/>
        <property file="${build.number.txt}"/>
        <jar destfile="${jars}/${distname}.jar">
            <fileset dir="${classes}"/>
            <fileset dir="${data}"/>
            <fileset dir="${data-pc}"/>
            <manifest>
                <attribute name="Main-Class" value="${main.class}"/>
            </manifest>
        </jar>
    </target>

    <target name="Javadoc">
        <delete dir="${javadoc}"/>
        <javadoc destdir="${javadoc}" author="true" version="true" use="true">
            <packageset dir="src" defaultexcludes="yes">
            </packageset>
            <link href="http://java.sun.com/products/jdk/1.4/docs/api/"/>
        </javadoc>
    </target>

</project>
