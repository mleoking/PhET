var requirejs,require,define;(function(e){function l(e,t){var n,r,i,s,o,a,f,l,c,h,p=t&&t.split("/"),d=u.map,v=d&&d["*"]||{};if(e&&e.charAt(0)==="."&&t){p=p.slice(0,p.length-1),e=p.concat(e.split("/"));for(l=0;l<e.length;l+=1){h=e[l];if(h===".")e.splice(l,1),l-=1;else if(h===".."){if(l===1&&(e[2]===".."||e[0]===".."))break;l>0&&(e.splice(l-1,2),l-=2)}}e=e.join("/")}if((p||v)&&d){n=e.split("/");for(l=n.length;l>0;l-=1){r=n.slice(0,l).join("/");if(p)for(c=p.length;c>0;c-=1){i=d[p.slice(0,c).join("/")];if(i){i=i[r];if(i){s=i,o=l;break}}}if(s)break;!a&&v&&v[r]&&(a=v[r],f=l)}!s&&a&&(s=a,o=f),s&&(n.splice(0,o,s),e=n.join("/"))}return e}function c(t,r){return function(){return n.apply(e,f.call(arguments,0).concat([t,r]))}}function h(e){return function(t){return l(t,e)}}function p(e){return function(t){s[e]=t}}function d(n){if(o.hasOwnProperty(n)){var r=o[n];delete o[n],a[n]=!0,t.apply(e,r)}if(!s.hasOwnProperty(n)&&!a.hasOwnProperty(n))throw new Error("No "+n);return s[n]}function v(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function m(e){return function(){return u&&u.config&&u.config[e]||{}}}var t,n,r,i,s={},o={},u={},a={},f=[].slice;r=function(e,t){var n,r=v(e),i=r[0];return e=r[1],i&&(i=l(i,t),n=d(i)),i?n&&n.normalize?e=n.normalize(e,h(t)):e=l(e,t):(e=l(e,t),r=v(e),i=r[0],e=r[1],i&&(n=d(i))),{f:i?i+"!"+e:e,n:e,pr:i,p:n}},i={require:function(e){return c(e)},exports:function(e){var t=s[e];return typeof t!="undefined"?t:s[e]={}},module:function(e){return{id:e,uri:"",exports:s[e],config:m(e)}}},t=function(t,n,u,f){var l,h,v,m,g,y=[],b;f=f||t;if(typeof u=="function"){n=!n.length&&u.length?["require","exports","module"]:n;for(g=0;g<n.length;g+=1){m=r(n[g],f),h=m.f;if(h==="require")y[g]=i.require(t);else if(h==="exports")y[g]=i.exports(t),b=!0;else if(h==="module")l=y[g]=i.module(t);else if(s.hasOwnProperty(h)||o.hasOwnProperty(h)||a.hasOwnProperty(h))y[g]=d(h);else{if(!m.p)throw new Error(t+" missing "+h);m.p.load(m.n,c(f,!0),p(h),{}),y[g]=s[h]}}v=u.apply(s[t],y);if(t)if(l&&l.exports!==e&&l.exports!==s[t])s[t]=l.exports;else if(v!==e||!b)s[t]=v}else t&&(s[t]=u)},requirejs=require=n=function(s,o,a,f,l){return typeof s=="string"?i[s]?i[s](o):d(r(s,o).f):(s.splice||(u=s,o.splice?(s=o,o=a,a=null):s=e),o=o||function(){},typeof a=="function"&&(a=f,f=l),f?t(e,s,o,a):setTimeout(function(){t(e,s,o,a)},15),n)},n.config=function(e){return u=e,n},define=function(e,t,n){t.splice||(n=t,t=[]),o[e]=[e,t,n]},define.amd={jQuery:!0}})(),require([],function(){function e(){N()}function t(){c=$("#canvas")[0],c.getContext&&(p=c.getContext("2d")),document.onmousedown=onDocumentMouseDown,document.onmouseup=onDocumentMouseUp,document.onmousemove=onDocumentMouseMove,document.addEventListener("touchstart",onDocumentTouchStart,!1),document.addEventListener("touchmove",onDocumentTouchMove,!1),document.addEventListener("touchend",onDocumentTouchEnd,!1),b=new ElectronShell(new Point2D(325,150)),v=new Bucket(new Point2D(100,300),"gray","Neutrons"),m=new Bucket(new Point2D(400,300),"red","Protons"),y=new ResetButton(new Point2D(600,325),"orange"),w=new NucleusLabel(new Point2D(450,80)),s(),window.addEventListener("deviceorientation",onWindowDeviceOrientation,!1),document.addEventListener("touchmove",function(e){e.preventDefault()},!1),e()}function n(){p.save(),p.globalCompositeOperation="source-over",p.fillStyle="rgb(255, 255, 153)",p.fillRect(0,0,Math.max(2e3,x),Math.max(2e3,T)),p.restore()}function r(){p.fillStyle="#00f",p.font="30px sans-serif",p.textBaseline="top",p.textAlign="left",p.fillText("Build an Atom",10,10)}function i(){p.fillStyle="#f80",p.font="italic 20px sans-serif",p.textBaseline="top",p.fillText("PhET",E-70,S-30)}function s(){removeAllParticlesFromNucleus(),m.removeAllParticles(),v.removeAllParticles();for(var e=0;e<u;e++)m.addNucleonToBucket(new Proton);for(var e=0;e<a;e++)v.addNucleonToBucket(new Neutron)}function o(){n(),r(),i(),b.draw(p),y.draw(p),v.drawInterior(p),m.drawInterior(p);for(var e=0;e<d.length;e++)d[e].draw(p);var t=m.nucleonsInBucket.slice();t.reverse();for(var e=0;e<t.length;e++)t[e].draw(p);t=v.nucleonsInBucket.slice(),t.reverse();for(var e=0;e<t.length;e++)t[e].draw(p);g!==null&&g.draw(p),v.drawFront(p),m.drawFront(p),w.draw(p)}var u=10,a=10,f=20,l=10,c,h=!1,p,d=[],v,m,g=null,y,b,w,E=0,S=0,x=0,T=0,N=function(){if(window.innerWidth!=E||window.innerHeight!=S)E=window.innerWidth,c.width=E,S=window.innerHeight?window.innerHeight:$(window).height(),c.height=S,window.scrollTo(0,0),E>x&&(x=E),S>T&&(T=S),o()};$(document).ready(function(){t()}),$(window).resize(e)}),define("main",function(){}),require.config({deps:["main"],paths:{vendor:"../js/vendor",plugins:"../js/plugins",underscore:"../js/vendor/underscore-min",tpl:"../js/plugins/tpl",text:"../js/plugins/text",json:"../js/plugins/json"},shim:{underscore:{exports:"_"},"main-deprecated":[]}}),define("config",function(){});