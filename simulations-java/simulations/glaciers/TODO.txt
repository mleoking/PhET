-===============================================================================
"To Do" list for "Glaciers" simulation
================================================================================

DESIGN ISSUES (model):
- calibration of climate model parameters? 
- initial steady state of glacier?
- do we want to show values or relative ranges (cold-to-hot) for climate controls?
- odd behavior in ablation graph when elevation < 1000m
- new model for ice thickness & velocity?
- how do we reliably determine glacier length when model's 1D grid is finite?
- need a model for movement of points in and on the ice
- can borehole be evolved as a straight line between 2 points at ice-rock and ice-air interfaces?
- how should we control sim speed? vary dt or fps?

DESIGN ISSUES (graphs):
- can we combine glacialBudget+accumulation+ablation into 1 graph? title? x-axis?
- do time-dependent graphs record data only while open, or are they always recording?
- how much data do time-dependent graphs hold?
- do time-dependent graphs scroll like a strip chart?
- do time-dependent graphs use a fixed sample interval, or clock dt interval?
- do graphs have zoom buttons, autoscale,...?

DESIGN ISSUES (user interface):
- how can we display ice velocity vectors in such a small vertical space?
- does zoomed view need to be zoomed in further?
- what happens when equilibrium line is checked but the ELA is outside the birds-eye view?
- what do we do when birds-eye view is wider than the model width?
- user-interface design for climate experiments
- how does the "steady state" button work in the context of climate experiments?
- how does the "coordinates" feature work for a valley that does not have linear slope?
- should "snowfall" be a checkbox?
- should "ice flow" be a checkbox?
- what happens when we hit "ice sheet" condition? message dialog + reset all?
- origin indicator for measurement tools?
- are the conditions for when to automatically follow terminus OK? (p#3 of doc v3)


HIGH PRIORITY:
- add Glacier.getLength
- get new ice thickness & velocity models
- visualization of ice velocity (vectors remain stationary)
- optimization of ice velocity
- add proxy for snowfall visualization
- add coordinates view
- implement "glacier length v. time" graph
- implement "equilibrium line altitude v. time" graph (only useful for Advanced panel, where interpolating between climates)

MEDIUM PRIORITY:
- create convincing mountains, either with an image or with Java2D
- make clock speed control change framerate instead of dt, keep constant dt=1 year?
- should Glacial Budget graph show accumulation & ablation? if so, fix x-axis label
- x-axis of charts currently autoscales, set fixed range?
- clip equilibrium line to area where it intersects ice (what happens when it doesn't intersect ice?)
- fix layout problems with main control panel
- add pseudo-3D perspective
- adjust MVT and/or camera scaling to increase magnification of zoomed view (make zoomed view 2-2.5x bigger than current)
- apply an inverse scaling to tools and toolbox so that camera scaling only affects valley and glacier
- remove tools by dragging them back to the trash can (or toolbox?)
- if tools turn out to not need time (t), remove it from base class
- make Reset All reset model to initial state
- make Reset All reset all view-only control to their initial state
- make Reset All delete all tools
- refactor common module functionality into a base class
- redesign advanced climate controls
- create graphs
- constrain tools to dragging in birds-eye bounds
- fancy animation when a tool is dropped in the trash
- fix layout issues with various control panels
- make viewport automatically follow terminus whenever terminus is in the viewport
- add left and right arrows to zoom view, secondary viewport control
- what to do at right edge of the world?
- PlayArea.verticallyAlignZoomedViewport makes a change to viewport and results in itself being called again (it works, but not very elegant)
- generalize all charts, there's too much duplicated code (ditto in controller that wires control panel to charts)

LOW PRIORITY:
- add Help menu option to show pictures of real glaciers
- labels on slider ticks should be white, code to set their color is not working
- display distance and/or elevation as km ?
- add variable caliper size to ice measuring tool
- make mercury in thermometers move as temperature changes
- add rounded borders to control sub-panels
- change ViewportNode to show left and right dotted lines that always extend the full height of the birds-eye viewport?
- control panels in all modules should be the same height
- set foreground color of ticks & labels on BasicClimateControl sliders (Java 1.4 problem? looks OK on 1.5)
- why doesn't image created by GPSReceiverNode.createImage show coordinate values? Is it because PSwing component isn't realized?
- rotate some of the tool icons to reduce height of toolbox?
- anti-aliasing of valley path
- move DoubleSpinner to phetcommon

COMMON CODE:

CLEANUP:
- setPickable(false) on non-interactive nodes
- rescale image files to minimize file size
- disable all debug output
- optimize memory management by reusing mutable objects

DONE:
2/27/08 - update "ELA v. time" graph every time the clock ticks (for discussion)
2/27/08 - add stubs for time-dependent graphs, until we figure out how we want these to work
2/27/08 - add a visual indication of origin for each measuring tool
******** 0.00.09 (20001)
2/27/08 - rename SnowfallAndTemperatureControlPanel to ClimateControlPanel
2/27/08 - "mass balance" control panel was dropped, delete panel and problematic model code
2/27/08 - "age of ice" feature was dropped, delete checkbox in View control panel 
2/27/08 - display a proxy for mountains, 1000 meters above valley floor
******** 0.00.08 (19964)
2/25/08 - disable "steady state" button when glacier is in the steady state
2/25/08 - add time-dependence to glacier ice thickness model
2/25/08 - resolve climate-change timescale issues in model, always use ELA of current climate
2/25/08 - make all 1D grids a fixed size (adjustable via NUMBER_OF_X_SAMPLES)
2/25/08 - add additional 1D grids for handling temporal interpolation of ice thickness
2/25/08 - clean up glaciers model of length and thickness, in preparation for adding time dependence
2/25/08 - add accumulation and ablation curves to glacial budget chart (for discussion)
******** 0.00.07 (19949)
2/22/08 - add charts for "XXX v. elevation" graphs, where XXX=accumulation, ablation, glacial budget
2/22/08 - wire up real "temperature v. elevation" graph
2/22/08 - prototype "temperature v. elevation" graph
2/21/08 - change graphs control panel to use checkboxes
2/20/08 - set background color correctly for climate controls, make textfields appear to be editable
******** 0.00.06 (19893)
2/19/08 - disable ELA slider and wire it to the model, so we can see ELA range without domain mapping problems
2/19/08 - rewrite EquilibriumLineNode to show a dashed horizontal line at ELA
2/19/08 - move ELA model into Climate, delete EquilibriumLine class
2/19/08 - wire up Mass Balanace max snowfall control, stub out wiring for ELA control
2/19/08 - cleanup Climate model and associated javadoc
2/19/08 - clean up controller for Basic module
2/19/08 - show snowfall reference elevation in meters with integer precision
2/19/08 - rewrite Mass Balance control panel for ELA and max snowfall controls
2/19/08 - add ELA to temp/snowfall conversion in climate model
2/19/08 - used DefaultDecimalFormat to get rid of -0 displays
2/19/08 - add 1 decimal place of precision to ice thickness tool display
2/19/08 - fix some control panel layout issues (still not perfect)
2/14/08 - update climate continuously while dragging sliders, performance is OK
2/14/08 - provide separate controls from snowfall and snowfall reference elevation, in model and control panels
2/14/08 - change mass balance climate control panel, based on Archies new spec (design still has problems)
2/14/08 - fix glacial budget meter, it should use the meter's elevation, not the valley floor elevation
******** 0.00.05 (19804)
2/13/08 - fix Valley floor model so that elevation is never < 0
2/13/08 - implement new climate model, as received from Archie on 2/11
2/11/08 - change min range of snowfall control from "none" to "little"
******** 0.00.04 (19749)
2/11/08 - simplify GlacierListener interface
2/11/08 - rewrite ice velocity model in terms of new strategy for computing ice thickness
2/11/08 - optimize Glacier.getIceThickness
2/11/08 - implement Glacier.getIceThickness as a linear interpolation between samples
2/11/08 - compute and cache ice thickness on a 1D grid
2/6/08 - update climate only when temperature or snowfall slider is released, continuous update is too expensive
2/6/08 - add first part of timescale model
2/1/08 - added glacier ice view, but disabled because model calculations are prohibitively expensive
2/1/08 - use steady-state methods for ice thickness and velocity to test immediate effect of climate change
2/1/08 - add ice velocity model, use speed for velocity magnitude, use valley floor slope for direction
2/1/08 - change ice velocity model functions to ice *speed*
1/31/08 - change canvas background color to "sky blue", so that white glacier will be visible
1/31/08 - shorten visible name of ice thickness tool
1/31/08 - javadoc EquilibriumLine
1/31/08 - create EquilibriumLine outside of Glacier
1/31/08 - make IceThicknessTool a GlacierListener, interested in ice thickness changes
1/31/08 - add ice volume flux, length, terminus, and ice thickness steady state to glacier model
1/31/08 - standardize on using iterators for listener lists
1/31/08 - javadoc Climate model
1/31/08 - add Climate.getTemperatureModernTimes for setting the default temperature
1/31/08 - adjust climate model to work with absolute temperature, versus temperature offset from modern times
1/31/08 - change temperature control to set temperature, not temperature offset from modern times
1/31/08 - rename "snowfall lapse rate" to "snowfall", document
1/31/08 - tweak equilibrium line model, allow equilibrium line to be at x < 0
1/31/08 - place minX/maxX limitations on ValleyNode
1/31/08 - remove minX/maxX from Valley model, it has no limitations
******** 0.00.03 (19554)
1/30/08 - wire up visibility control to equilibrium line node
1/30/08 - add equilibrium line model and temporary view
1/30/08 - update glacial budget meter when position, snowfall or temperature is changed
1/30/08 - add glacial budget (mass balance) to climate model
1/30/08 - add temperature, snowfall, accumulation and ablation to climate model
1/28/08 - wire up custom "Reset All" button
1/28/08 - wire up custom help button, make it work with Help menu item
1/28/08 - disable standard module HelpPane (we are using our own reset button)
******** 0.00.02 (19477)
1/23/08 - make the zoomed viewport's vertical position follow the contour of the valley
1/23/08 - extend Valley shape down to sea level
1/23/08 - add Graphs control panel to "Basic" module, so that we can test graphs during development of basic model
1/23/08 - stub out most of "Advanced" module, it will come later after some redesign
1/23/08 - delete AdvanceClimateControlPanel, this needs to be redesigned
1/23/08 - add MassBalanceControlPanel to basic climate controls
1/23/08 - add range constants for mass balance controls
1/22/08 - create MassBalanceControlPanel for controlling mass-balance model of climate
1/22/08 - pull SnowfallAndTemperatureControlPanel out of climate control panel
1/22/08 - grab DoubleSpinner from bound-states, refine
1/22/08 - moved controller responsibilities for "Basic" module to BasicController
******** 0.00.01 (19431)
1/16/08 - wire up basic climate controls (temperature and snowfall)
1/16/08 - use one set of images for tools and their icons in the toolbox
1/15/08 - add README file to deploy directory
1/15/08 - use dirt texture map to fill shape of valley floor
1/15/08 - render valley contour as a filled shape instead of a line
1/15/08 - in ValleyNode, replace image with a GeneralPath that draws the shape of the valley floor
1/15/08 - remove debug tracer flag that was placed at valley's highest point
1/15/08 - specify birds-eye viewport's position as an offset from the valley's highest point
1/15/08 - clean up initialization of viewport positions
1/15/08 - eliminate need to store birds-eye camera view offset
1/15/08 - specify zoomed viewport stroke width in pixels, transform to canvas view coordinates for setting actual stroke width
1/15/08 - add Valley.getHighestPoint
1/15/08 - improve layout and borders in play area
1/15/08 - remove default border that comes with PhetPCanvas, it affects canvas bounds, which we're using for viewport calculations
1/15/08 - change control panel background color to pale green
1/15/08 - in ToolIconNode use PDragEventHandler for all phases of drag sequence
1/15/08 - clean up and javadoc before moving to next phase of development
1/15/08 - add unit tests for MVT "flip sign" feature
1/14/08 - disable debug output for viewports and cameras
1/14/08 - scale x axis in MVT so that we can fit 80 meters in the birds-eye view window at 1024x768
1/14/08 - scale y axis in MVT so that we can fit 4100 meters of elevation in the zoomed view window at 1024x768
1/14/08 - flip sign of y axis in MVT so that model has +y up
1/14/08 - add "flip sign" option to MVT, reflection via negative scaling turned out to be problematic
1/14/08 - add listener that adjusts birds-eye view camera when birds-eye viewport changes
1/14/08 - dynamically compute translation of birds-eye view camera
1/14/08 - place ValleyNode at x=0, y=Valley.getElevation(0)
1/14/08 - bugfix in scale/offset of PenguinNode, improper use of mvt results in upside-down penguin when yscale=-1
1/14/08 - verified that order of transforms is correct in MVT constructor
1/14/08 - JUnit test case for ModelViewTransform
1/13/08 - move Viewport to model package because it uses model coordinates
1/13/08 - fix bug in penguin scaling
1/13/08 - add tracer flag at valley's high point, for debugging camera offset and MVT scaling
1/13/08 - add offset to birds-eye camera, use to compute birds-eye viewport
1/13/08 - move responsibility to penguin to handle its own layout (scale & offset)
1/13/08 - organize imports
1/13/08 - major simplification of MVT rectangle transforms at the expense of memory allocation
1/13/08 - fix penguin scaling and layout to handle MVT y translation
1/13/08 - refactor PlayArea.updateLayout, break into smaller methods
1/13/08 - remove MVT distance transforms, they don't work unless xScale=yScale
1/13/08 - bugfix: resizing window snaps zoomed viewport to far left
1/13/08 - add convenience setters to Viewpoint
1/13/08 - bugfix in setting zoomed viewport bounds in PlayArea.updateLayout, handle y translation in MVT
1/13/08 - use MVT to set penguin y-alignment & scale
1/13/08 - bugfix in MVT method for transforming distance
1/13/08 - bugfix in MVT methods that transform rectangles, previous version didn't handle translation and negative scaling
1/13/08 - refactor PlayArea's resize responsibility to PlayAreaResizeListener
1/11/08 - fix misc stuff in PlayArea viewport management to handle MVT x-coordinate translation 
1/11/08 - bail on PlayArea.handlePlayAreaResize if the canvases don't have non-zero sizes
1/11/08 - make MVT distance transforms require positive values
1/11/08 - add convenience setters and getters to Viewport
1/11/08 - bugfix in MVT.viewToModel(double distance), need to know the offset between model and view origins
1/11/08 - change signature of MVT constructor to make it clearer
1/11/08 - move Viewport to model package, since it's in model coordinates
1/11/08 - use ComponentListener + AncestorListener for handling play area resize, this fixes problems with viewport transforms
1/10/08 - add default implementations for AbstractTool.handlePositionChanged and handleTimeChanged
1/9/08 - add named viewports, for debugging
1/9/08 - clean up ViewportListener interface
1/9/08 - add MVT to toolbox
1/9/08 - fix problems with viewport constrains when resizing main frame, should only consider left and right edges of viewport
1/9/08 - make it easier to drag viewport fully left or right
1/9/08 - add MVT to PenguinNode and ViewportNode
1/9/08 - scale PenguinNode to ensure that it is shorter than the birds-eye view; make it 75% of birds-eye height
1/9/08 - handle PenguinNode yOffset in PlayArea.handlePlayAreaResized
1/9/08 - bugfix: create tool using event.getPosition, not event.getCanvasPosition
1/9/08 - add GlacierNode, currently empty
1/9/08 - use model-view transform in management of viewports
1/9/08 - add model-view transform to nodes
1/9/08 - add identity model-view transform
1/9/08 - move ModelViewTransform to view package, model shouldn't know about it
1/9/08 - clean up add/remove listener interfaces
1/9/08 - use one viewport model for both birds-eye and zoomed views
1/9/08 - move Viewport to view package, it's not part of the physical model
1/9/08 - implement Valley elevation and width functions
1/8/08 - change strategy for adding/removing nodes, IToolProducer
1/8/08 - organize imports
1/8/08 - switch from ModelElement to ClockListener interface, because model is based on current time, not dt
1/8/08 - fix terminology: GPS -> GPS Receiver
1/8/08 - generalize layout of icons in toolbox
1/8/08 - show/hide GPS tool based on whether developer controls are enabled
1/8/08 - bugfix in Movable.setPosition(double,double), if expression should use "or"
1/8/08 - add GPS tool, for development testing
1/4/08 - add stubs to Glacier model for all required methods
1/4/08 - use sea level as default reference altitude for Climate
1/4/08 - flesh out basic Climate model
1/4/08 - add ModelViewTransform class (adapted from optical-tweezers)
1/3/08 - quick pass at glacier and atmosphere models
1/3/08 - add value formatters to tools
1/3/08 - simplify value display on thermometer node
1/3/08 - add value display to ice thickness tool
1/3/08 - sketch out model of ice thickness tool
1/3/08 - add position listeners to thermometer and glacial budget meter
1/3/08 - add cleanup methods to model and view elements
1/3/08 - add digital readout to glacial budget meter
1/3/08 - sketch model for glacial budget meter
1/3/08 - add round ball to bottom of trace flag's pole
1/3/08 - replace barrel of tracer flags with a single tracer flag in toolbox
1/2/08 - move resize listener to PlayArea panel to fix sequencing problem with setting of world and viewport bounds
1/2/08 - keep viewport in bounds when width of main window is reduced
1/2/08 - constrain viewport dragging to be horizontal
1/2/08 - use penguin for viewport control, put dashed vertical lines L&R of penguin to denote viewport bounds
1/2/08 - resize world based on size of top canvas
12/27/07 - add penguin, constrain dragging (not connected to viewport)
12/27/07 - convert penguin back to PImage
12/27/07 - increase size of valley image so that zoomed view scale~1
12/27/07 - integrate TestViewport example into sim's PlayArea
12/26/07 - set approximate registration points for each tool node
12/26/07 - add toolbox to Advanced panel
12/26/07 - refactor toolbox icons hierarchy
12/26/07 - organize imports
12/26/07 - refactor responsibility for creating tool-related model elements
12/26/07 - forward toolbox drag events to newly-created model elements
12/26/07 - rewrite model/view hierarchy for toolbox tools
12/26/07 - simplify toolbox
12/26/07 - convert graph control to combo box, radio button took up too much space
12/26/07 - create graphs control panel, start with radio buttons as requested
12/26/07 - in TestViewport, set magnification power for bottom view instead of using scale=1
12/24/07 - test app to demonstrate sharing of a layer between 2 canvases
12/20/07 - convert PenguinNode to be a test case for SVGNode
12/20/07 - extract missing SVG files from Archie's mockup, crop document size of other SVG images to fit
12/20/07 - check in Archie's SVG mockup of the user interface
12/20/07 - check in SVG images and license file, change penguin image
12/17/07 - add viewport demo to developer menu
12/17/07 - check in first version of model document
12/17/07 - clean up naming conventions for listeners
12/17/07 - listener interface for misc controls
12/17/07 - fix drag offset in ThermometerNode
12/17/07 - convert strings and images to statics
12/17/07 - move time units out of clock model
12/17/07 - add panning control to prototype, ala Google Maps
12/16/07 - started prototype for birds-eye and zoomed views of one model
12/12/07 - update thermometer view as thermometer model changes
12/12/07 - add basic thermometer model
12/11/07 - replace images for ice thickness tool
12/11/07 - add draggable tools to the canvas, no way to delete them yet
12/11/07 - first pass at ToolboxNode, no interactivity yet
12/10/07 - add all strings shown in design doc to localization file
12/10/07 - rename equilibrium button
12/10/07 - add BasicClimateControlPanel
12/6/07 - advanced vs basic climate controls
12/6/07 - add listener interface for View control panel
12/6/07 - rename localization properties related to clock
12/6/07 - delete View controls that were dropped, remove all icons from View controls
11/20/07 - review design doc #3
11/20/07 - add credits
11/20/07 - break into Basic and Advanced modules
11/14/07 - add stub for magnified view
11/14/07 - add drag handler to penguin, horizontally constrained
11/14/07 - add penguin as marker for which part of the valley we're zoomed in on
11/14/07 - remove example code
11/14/07 - stub for "birds eye view" of valley
11/14/07 - stubs for Climate Controls panel
11/14/07 - add icons to View controls
11/14/07 - add View controls (no icons)
11/14/07 - redo layout of clock control panel to have control over insets and justification (need to minimize space)
11/14/07 - first pass at clock control panel
11/14/07 - add a bunch of image files, extracted from SVG mockup
11/9/07 - move about.credits property to localization file
10/31/07 - review design doc #2
10/22/07 - review design doc #1
10/9/07 - inner classes for MVC observers
10/9/07 - add width and height controls to control panel
10/9/07 - flatten ExampleModelElement in preparation for replacing Observer pattern
10/9/07 - hook up developer controls for tab color and control panel color
10/9/07 - push more stuff into phetcommon
10/9/07 - migrate updateLayout to PhetPCanvas
10/9/07 - migrate "Reset All" and "set minimum width" features to phetcommon ControlPanel
10/8/07 - migrate XML persistence manager to phetcommon
10/3/07 - fold GlobalConfig into GlaciersConfig
10/3/07 - rewrite persistence code in preparation for migration to phetcommon
10/3/07 - constants for localized strings in GlaciersPersistenceManager
10/1/07 - add example model element, node, and control panel for demonstration
10/1/07 - package and class javadoc for skeleton
9/27/07 - set up simulation skeleton, check in to SVN

REJECTED:

===============================================================================
end of file